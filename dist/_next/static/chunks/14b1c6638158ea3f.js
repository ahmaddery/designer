(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var t=e.i(43476),l=e.i(71645),s=e.i(54548),a=e.i(30590),n=e.i(68834),i=e.i(79473);let r=[{type:"VARCHAR",label:"VARCHAR",hasLength:!0,hasPrecision:!1},{type:"INT",label:"INT",hasLength:!1,hasPrecision:!1},{type:"BIGINT",label:"BIGINT",hasLength:!1,hasPrecision:!1},{type:"SMALLINT",label:"SMALLINT",hasLength:!1,hasPrecision:!1},{type:"DECIMAL",label:"DECIMAL",hasLength:!1,hasPrecision:!0},{type:"NUMERIC",label:"NUMERIC",hasLength:!1,hasPrecision:!0},{type:"FLOAT",label:"FLOAT",hasLength:!1,hasPrecision:!1},{type:"DOUBLE",label:"DOUBLE",hasLength:!1,hasPrecision:!1},{type:"BOOLEAN",label:"BOOLEAN",hasLength:!1,hasPrecision:!1},{type:"DATE",label:"DATE",hasLength:!1,hasPrecision:!1},{type:"TIME",label:"TIME",hasLength:!1,hasPrecision:!1},{type:"DATETIME",label:"DATETIME",hasLength:!1,hasPrecision:!1},{type:"TIMESTAMP",label:"TIMESTAMP",hasLength:!1,hasPrecision:!1},{type:"TEXT",label:"TEXT",hasLength:!1,hasPrecision:!1},{type:"BLOB",label:"BLOB",hasLength:!1,hasPrecision:!1},{type:"JSON",label:"JSON",hasLength:!1,hasPrecision:!1},{type:"UUID",label:"UUID",hasLength:!1,hasPrecision:!1}],o=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1","#14B8A6","#A855F7"];var c=e.i(75157);let d=(0,n.create)()((0,i.persist)((e,t)=>({tables:[],relations:[],selectedTableId:null,selectedRelationId:null,selectedColumnId:null,addTable:l=>{let s=(0,c.generateId)(),{tables:a}=t(),n={id:s,name:(0,c.generateTableName)(a),columns:[{id:(0,c.generateId)(),name:"id",dataType:"INT",nullable:!1,isPrimaryKey:!0,isForeignKey:!1,isUnique:!1,isAutoIncrement:!0}],color:o[Math.floor(Math.random()*o.length)],position:l};return e({tables:[...a,n],selectedTableId:s}),s},updateTable:(l,s)=>{e({tables:t().tables.map(e=>e.id===l?{...e,...s}:e)})},deleteTable:l=>{let{tables:s,relations:a,selectedTableId:n}=t(),i=a.filter(e=>e.sourceTableId!==l&&e.targetTableId!==l);e({tables:s.filter(e=>e.id!==l),relations:i,selectedTableId:n===l?null:n})},duplicateTable:l=>{let{tables:s}=t(),a=s.find(e=>e.id===l);if(!a)return;let n=(0,c.generateId)();e({tables:[...s,{...a,id:n,name:`${a.name}_copy`,position:{x:a.position.x+50,y:a.position.y+50},columns:a.columns.map(e=>({...e,id:(0,c.generateId)(),isForeignKey:!1}))}],selectedTableId:n})},moveTable:(l,s)=>{e({tables:t().tables.map(e=>e.id===l?{...e,position:s}:e)})},addColumn:l=>{let{tables:s}=t(),a=s.find(e=>e.id===l);if(!a)return"";let n={id:(0,c.generateId)(),name:(0,c.generateColumnName)(a.columns),dataType:"VARCHAR",length:255,nullable:!0,isPrimaryKey:!1,isForeignKey:!1,isUnique:!1,isAutoIncrement:!1};return e({tables:s.map(e=>e.id===l?{...e,columns:[...e.columns,n]}:e),selectedColumnId:n.id}),n.id},updateColumn:(l,s,a)=>{e({tables:t().tables.map(e=>e.id===l?{...e,columns:e.columns.map(e=>e.id===s?{...e,...a}:e)}:e)})},deleteColumn:(l,s)=>{let{tables:a,relations:n}=t(),i=a.find(e=>e.id===l);if(!i||i.columns.length<=1)return;let r=n.filter(e=>(e.sourceTableId!==l||e.sourceColumnId!==s)&&(e.targetTableId!==l||e.targetColumnId!==s));e({tables:a.map(e=>e.id===l?{...e,columns:e.columns.filter(e=>e.id!==s)}:e),relations:r,selectedColumnId:null})},reorderColumns:(l,s)=>{e({tables:t().tables.map(e=>{if(e.id!==l)return e;let t=new Map(e.columns.map(e=>[e.id,e]));return{...e,columns:s.map(e=>t.get(e)).filter(e=>void 0!==e)}})})},addRelation:l=>{let s=(0,c.generateId)();return e({relations:[...t().relations,{...l,id:s}]}),s},updateRelation:(l,s)=>{e({relations:t().relations.map(e=>e.id===l?{...e,...s}:e)})},deleteRelation:l=>{e({relations:t().relations.filter(e=>e.id!==l),selectedRelationId:null})},selectTable:t=>{e({selectedTableId:t,selectedRelationId:null,selectedColumnId:null})},selectRelation:t=>{e({selectedRelationId:t,selectedTableId:null,selectedColumnId:null})},selectColumn:(t,l)=>{e({selectedTableId:t,selectedColumnId:l,selectedRelationId:null})},clearSelection:()=>{e({selectedTableId:null,selectedRelationId:null,selectedColumnId:null})},exportToJSON:()=>{let{tables:e,relations:l}=t();return JSON.stringify({tables:e,relations:l},null,2)},importFromJSON:t=>{try{let l=JSON.parse(t);l.tables&&Array.isArray(l.tables)&&e({tables:l.tables,relations:l.relations||[],selectedTableId:null,selectedRelationId:null,selectedColumnId:null})}catch(e){throw console.error("Failed to import JSON:",e),e}},exportToSQL:()=>{let{tables:e,relations:l}=t(),s="-- Generated by ERD Designer\n\n";return e.forEach(e=>{s+=`CREATE TABLE IF NOT EXISTS \`${e.name}\` (
`;let t=e.columns.map(e=>{let t=`  \`${e.name}\` ${e.dataType}`;return e.length?t+=`(${e.length})`:void 0!==e.precision&&void 0!==e.scale&&(t+=`(${e.precision},${e.scale})`),e.isPrimaryKey&&e.isAutoIncrement&&(t+=" AUTO_INCREMENT"),e.nullable||(t+=" NOT NULL"),void 0!==e.defaultValue&&""!==e.defaultValue&&(t+=` DEFAULT ${e.defaultValue}`),e.comment&&(t+=` COMMENT '${e.comment}'`),t}),l=e.columns.filter(e=>e.isPrimaryKey).map(e=>`\`${e.name}\``);l.length>0&&t.push(`  PRIMARY KEY (${l.join(", ")})`),e.columns.filter(e=>e.isUnique&&!e.isPrimaryKey).forEach(l=>{t.push(`  UNIQUE KEY \`uk_${e.name}_${l.name}\` (\`${l.name}\`)`)}),s+=t.join(",\n"),s+="\n",e.comment?s+=`) COMMENT='${e.comment}';

`:s+=");\n\n"}),l.forEach(t=>{let l=e.find(e=>e.id===t.sourceTableId),a=e.find(e=>e.id===t.targetTableId);if(l&&a){let e=l.columns.find(e=>e.id===t.sourceColumnId),n=a.columns.find(e=>e.id===t.targetColumnId);e&&n&&(s+=`ALTER TABLE \`${l.name}\` `,s+=`ADD CONSTRAINT \`fk_${l.name}_${e.name}\` `,s+=`FOREIGN KEY (\`${e.name}\`) `,s+=`REFERENCES \`${a.name}\`(\`${n.name}\`)`,t.onDelete&&(s+=` ON DELETE ${t.onDelete.replace("_"," ")}`),t.onUpdate&&(s+=` ON UPDATE ${t.onUpdate.replace("_"," ")}`),s+=";\n")}}),s},clearAll:()=>{e({tables:[],relations:[],selectedTableId:null,selectedRelationId:null,selectedColumnId:null})}}),{name:"erd-designer-storage"}));var x=e.i(75254);let m=(0,x.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var u=e.i(58524);let h=(0,x.default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var b=e.i(23585),p=e.i(7233),g=e.i(27612),N=e.i(74886),y=e.i(46932),f=e.i(88653);let j=(0,l.memo)(function({column:e,tableId:l,isSelected:s,onSelect:a,index:n}){let i=d(e=>e.deleteColumn),r=d(e=>e.selectedColumnId)===e.id;return(0,t.jsxs)(y.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.03*n},className:(0,c.cn)("group flex items-center gap-2 px-3 py-1.5 text-xs cursor-pointer transition-all duration-150","hover:bg-white/5",r&&"bg-white/10 ring-1 ring-white/20"),onClick:e=>{e.stopPropagation(),a()},children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 w-5 shrink-0",children:[e.isPrimaryKey&&(0,t.jsx)(m,{className:"w-3.5 h-3.5 text-amber-400"}),e.isForeignKey&&!e.isPrimaryKey&&(0,t.jsx)(u.Link2,{className:"w-3.5 h-3.5 text-blue-400"}),e.isUnique&&!e.isPrimaryKey&&(0,t.jsx)(h,{className:"w-3.5 h-3.5 text-purple-400"})]}),(0,t.jsx)("span",{className:(0,c.cn)("flex-1 font-medium truncate",e.isPrimaryKey?"text-amber-100":"text-slate-200"),children:e.name}),(0,t.jsxs)("span",{className:(0,c.cn)("text-[10px] font-mono shrink-0",{VARCHAR:"text-blue-400",TEXT:"text-blue-300",INT:"text-green-400",BIGINT:"text-green-300",SMALLINT:"text-green-300",DECIMAL:"text-yellow-400",NUMERIC:"text-yellow-400",FLOAT:"text-yellow-300",DOUBLE:"text-yellow-300",BOOLEAN:"text-purple-400",DATE:"text-pink-400",TIME:"text-pink-300",DATETIME:"text-pink-400",TIMESTAMP:"text-pink-500",BLOB:"text-gray-400",JSON:"text-orange-400",UUID:"text-cyan-400"}[e.dataType]||"text-gray-400"),children:[e.dataType,e.length&&`(${e.length})`,void 0!==e.precision&&`(${e.precision}${void 0!==e.scale?`,${e.scale}`:""})`]}),!e.nullable&&(0,t.jsx)("span",{className:"text-[9px] text-red-400 font-bold shrink-0",children:"*"}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),i(l,e.id)},className:"opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-red-500/20 text-red-400 transition-all shrink-0",children:(0,t.jsx)(g.Trash2,{className:"w-3 h-3"})})]})}),v=(0,l.memo)(function({data:e,selected:n}){let{tableId:i}=e,[r,o]=(0,l.useState)(!1),x=d(e=>e.tables.find(e=>e.id===i)),m=d(e=>e.selectedTableId),u=d(e=>e.selectTable),h=d(e=>e.selectColumn),v=d(e=>e.addColumn),w=d(e=>e.duplicateTable),C=d(e=>e.deleteTable),T=d(e=>e.updateTable),k=m===i,E=(0,l.useCallback)(e=>{e.stopPropagation(),v(i)},[v,i]),I=(0,l.useCallback)(e=>{e.stopPropagation(),w(i),o(!1)},[w,i]),A=(0,l.useCallback)(e=>{e.stopPropagation(),C(i),o(!1)},[C,i]),O=(0,l.useCallback)(e=>{T(i,{color:e}),o(!1)},[T,i]);return x?(0,t.jsxs)("div",{className:(0,c.cn)("relative rounded-xl overflow-hidden transition-all duration-200","bg-slate-900/95 backdrop-blur-sm border shadow-2xl",k?"border-white/30 shadow-white/10 ring-2 ring-white/20":"border-white/10 shadow-black/20","min-w-[240px] max-w-[320px]"),style:{boxShadow:k?`0 0 0 1px ${x.color}40, 0 20px 40px -10px rgba(0,0,0,0.5)`:"0 20px 40px -10px rgba(0,0,0,0.3)"},onClick:()=>u(i),children:[(0,t.jsxs)("div",{className:"relative px-4 py-3 flex items-center justify-between",style:{background:`linear-gradient(135deg, ${x.color}20 0%, ${x.color}10 100%)`,borderBottom:`1px solid ${x.color}30`},children:[(0,t.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1",style:{backgroundColor:x.color}}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 ml-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm text-white truncate",children:x.name}),x.comment&&(0,t.jsx)("p",{className:"text-[10px] text-slate-400 truncate",children:x.comment})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),o(!r)},className:"p-1.5 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors",children:(0,t.jsx)(b.MoreVertical,{className:"w-4 h-4"})}),(0,t.jsx)(f.AnimatePresence,{children:r&&(0,t.jsxs)(y.motion.div,{initial:{opacity:0,scale:.95,y:-5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-5},className:"absolute right-0 top-full mt-1 w-48 bg-slate-800 rounded-xl border border-white/10 shadow-2xl z-50 overflow-hidden",children:[(0,t.jsxs)("button",{onClick:I,className:"w-full px-3 py-2 flex items-center gap-2 text-xs text-slate-300 hover:bg-white/5 transition-colors",children:[(0,t.jsx)(N.Copy,{className:"w-3.5 h-3.5"}),"Duplicate Table"]}),(0,t.jsxs)("div",{className:"px-3 py-2 border-t border-white/5",children:[(0,t.jsx)("span",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Color"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-1.5",children:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16"].map(e=>(0,t.jsx)("button",{onClick:()=>O(e),className:(0,c.cn)("w-5 h-5 rounded-full transition-transform hover:scale-110",x.color===e&&"ring-2 ring-white"),style:{backgroundColor:e}},e))})]}),(0,t.jsxs)("button",{onClick:A,className:"w-full px-3 py-2 flex items-center gap-2 text-xs text-red-400 hover:bg-red-500/10 transition-colors border-t border-white/5",children:[(0,t.jsx)(g.Trash2,{className:"w-3.5 h-3.5"}),"Delete Table"]})]})})]}),r&&(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)})]}),(0,t.jsx)("div",{className:"py-1 max-h-[300px] overflow-y-auto scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent",children:x.columns.map((e,l)=>(0,t.jsx)(j,{column:e,tableId:i,isSelected:k,onSelect:()=>h(i,e.id),index:l},e.id))}),(0,t.jsxs)("button",{onClick:E,className:"w-full px-4 py-2 flex items-center justify-center gap-2 text-xs text-slate-400 hover:text-white hover:bg-white/5 transition-all border-t border-white/5",children:[(0,t.jsx)(p.Plus,{className:"w-3.5 h-3.5"}),"Add Column"]}),(0,t.jsx)(s.Handle,{type:"source",position:a.Position.Top,className:"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{top:-6}}),(0,t.jsx)(s.Handle,{type:"target",position:a.Position.Top,className:"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{top:-6}}),(0,t.jsx)(s.Handle,{type:"source",position:a.Position.Right,className:"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{right:-6}}),(0,t.jsx)(s.Handle,{type:"target",position:a.Position.Right,className:"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{right:-6}}),(0,t.jsx)(s.Handle,{type:"source",position:a.Position.Bottom,className:"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{bottom:-6}}),(0,t.jsx)(s.Handle,{type:"target",position:a.Position.Bottom,className:"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{bottom:-6}}),(0,t.jsx)(s.Handle,{type:"source",position:a.Position.Left,className:"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{left:-6}}),(0,t.jsx)(s.Handle,{type:"target",position:a.Position.Left,className:"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{left:-6}})]}):null});var w=e.i(37727);let C=(0,l.memo)(function({id:e,sourceX:n,sourceY:i,targetX:r,targetY:o,sourcePosition:x,targetPosition:m,data:u,selected:h}){let{relationId:b,type:p="ONE_TO_MANY"}=u||{},[g,N]=(0,l.useState)(!1),j=d(e=>e.selectedRelationId),v=d(e=>e.selectRelation),C=d(e=>e.deleteRelation),T=d(e=>e.updateRelation),k=j===b||h,[E,I,A]=(0,a.getBezierPath)({sourceX:n,sourceY:i,sourcePosition:x,targetX:r,targetY:o,targetPosition:m,curvature:.3}),O=(e=>{switch(e){case"ONE_TO_ONE":return{source:"1",target:"1"};case"ONE_TO_MANY":return{source:"1",target:"∞"};case"MANY_TO_MANY":return{source:"∞",target:"∞"};default:return{source:"1",target:"*"}}})(p),L=((e,t)=>{let l={strokeWidth:t?3:2,stroke:t?"#60A5FA":"#94A3B8"};switch(e){case"ONE_TO_ONE":case"ONE_TO_MANY":return{...l,strokeDasharray:void 0};case"MANY_TO_MANY":return{...l,strokeDasharray:"8,4"};default:return l}})(p,k??!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.BaseEdge,{path:E,style:L,className:"transition-all duration-200"}),(0,t.jsxs)(s.EdgeLabelRenderer,{children:[(0,t.jsx)("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${n}px, ${i}px)`,pointerEvents:"none"},className:(0,c.cn)("w-5 h-5 flex items-center justify-center rounded-full text-[10px] font-bold","bg-slate-800 border border-slate-600 text-slate-300"),children:O.source}),(0,t.jsx)("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${r}px, ${o}px)`,pointerEvents:"none"},className:(0,c.cn)("w-5 h-5 flex items-center justify-center rounded-full text-[10px] font-bold","bg-slate-800 border border-slate-600 text-slate-300"),children:O.target}),(0,t.jsx)("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${I}px, ${A}px)`},className:"nodrag nopan",onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),children:(0,t.jsx)(f.AnimatePresence,{children:g||k?(0,t.jsxs)(y.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:(0,c.cn)("flex items-center gap-1 p-1 rounded-lg","bg-slate-800 border border-slate-600 shadow-xl"),children:[(0,t.jsxs)("select",{value:p,onChange:e=>{var t;return t=e.target.value,void(b&&T(b,{type:t}))},onClick:e=>e.stopPropagation(),className:"text-[10px] bg-slate-700 text-slate-200 rounded px-1.5 py-0.5 border-none outline-none cursor-pointer",children:[(0,t.jsx)("option",{value:"ONE_TO_ONE",children:"1:1"}),(0,t.jsx)("option",{value:"ONE_TO_MANY",children:"1:N"}),(0,t.jsx)("option",{value:"MANY_TO_MANY",children:"N:N"})]}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),b&&C(b)},className:"p-1 rounded hover:bg-red-500/20 text-red-400 transition-colors",children:(0,t.jsx)(w.X,{className:"w-3 h-3"})})]}):(0,t.jsxs)(y.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:(0,c.cn)("px-2 py-0.5 rounded text-[10px] font-medium","bg-slate-800/80 text-slate-400 border border-slate-700/50"),children:["ONE_TO_ONE"===p&&"1:1","ONE_TO_MANY"===p&&"1:N","MANY_TO_MANY"===p&&"N:N"]})})})]}),(0,t.jsx)("path",{d:E,stroke:"transparent",strokeWidth:20,fill:"none",className:"cursor-pointer",onClick:()=>b&&v(b)})]})});var T=e.i(66459),k=e.i(40160),E=e.i(81399),I=e.i(41929),A=e.i(54212),O=e.i(20354),L=e.i(74344),R=e.i(95444);let P={table:v},S={relation:C};function M(){let e=(0,l.useRef)(null),{tables:n,relations:i,selectedTableId:r,selectedRelationId:o,addTable:x,addRelation:m,selectTable:u,selectRelation:h,clearSelection:b,updateTable:N,exportToJSON:f,exportToSQL:j,importFromJSON:v,clearAll:w}=d(),[C,M,U]=(0,s.useNodesState)([]),[D,_,B]=(0,s.useEdgesState)([]),[F,$]=(0,l.useState)(!0),[K,Y]=(0,l.useState)(!0),{fitView:V,zoomIn:J,zoomOut:q,screenToFlowPosition:H}=(0,s.useReactFlow)();(0,l.useEffect)(()=>{M(n.map(e=>({id:e.id,type:"table",position:e.position,data:{tableId:e.id},selected:e.id===r})))},[n,r,M]),(0,l.useEffect)(()=>{_(i.map(e=>({id:e.id,source:e.sourceTableId,target:e.targetTableId,type:"relation",data:{relationId:e.id,type:e.type},selected:e.id===o})))},[i,o,_]);let G=(0,l.useCallback)(e=>{if(e.source&&e.target){let t=n.find(t=>t.id===e.source),l=n.find(t=>t.id===e.target);if(t&&l){let s=l.columns.find(e=>e.isPrimaryKey);if(s){let a=t.columns.find(e=>e.isForeignKey);if(!a){let e={id:crypto.randomUUID(),name:`${l.name.toLowerCase()}_id`,dataType:s.dataType,nullable:!0,isPrimaryKey:!1,isForeignKey:!0,isUnique:!1,isAutoIncrement:!1},n=[...t.columns,e];N(t.id,{columns:n}),a=e}m({type:"ONE_TO_MANY",sourceTableId:e.source,sourceColumnId:a.id,targetTableId:e.target,targetColumnId:s.id,onDelete:"CASCADE",onUpdate:"CASCADE"})}}}_(t=>(0,a.addEdge)(e,t))},[m,_,n,N]),z=(0,l.useCallback)((e,t)=>{N(t.id,{position:t.position})},[N]),X=(0,l.useCallback)(()=>{b()},[b]),Q=(0,l.useCallback)((e,t)=>{u(t.id)},[u]),Z=(0,l.useCallback)((e,t)=>{let l=t.data?.relationId;l&&h(l)},[h]),W=(0,l.useCallback)(()=>{let t=e.current;if(t){let{width:e,height:l}=t.getBoundingClientRect(),s=H({x:e/2,y:l/2});x({x:s.x-120,y:s.y-100})}else x({x:100,y:100})},[x,H]),ee=(0,l.useCallback)(async()=>{if(e.current){let t=await (0,T.toPng)(e.current,{backgroundColor:"#0f172a"}),l=document.createElement("a");l.download="erd-diagram.png",l.href=t,l.click()}},[]),et=(0,l.useCallback)(()=>{let e=new Blob([f()],{type:"application/json"}),t=URL.createObjectURL(e),l=document.createElement("a");l.download="erd-schema.json",l.href=t,l.click(),URL.revokeObjectURL(t)},[f]),el=(0,l.useCallback)(()=>{let e=new Blob([j()],{type:"text/plain"}),t=URL.createObjectURL(e),l=document.createElement("a");l.download="schema.sql",l.href=t,l.click(),URL.revokeObjectURL(t)},[j]),es=(0,l.useCallback)(e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=e=>{try{let t=e.target?.result;v(t)}catch(e){alert("Invalid JSON file")}},e.readAsText(t)}e.target.value=""},[v]);return(0,t.jsx)("div",{className:"relative w-full h-full",ref:e,children:(0,t.jsxs)(s.ReactFlow,{nodes:C,edges:D,onNodesChange:U,onEdgesChange:B,onConnect:G,onNodeDragStop:z,onPaneClick:X,onNodeClick:Q,onEdgeClick:Z,nodeTypes:P,edgeTypes:S,connectionMode:a.ConnectionMode.Loose,fitView:!0,fitViewOptions:{padding:.2},defaultEdgeOptions:{type:"relation"},snapToGrid:!0,snapGrid:[15,15],className:"bg-slate-950",children:[F&&(0,t.jsx)(s.Background,{variant:s.BackgroundVariant.Dots,gap:20,size:1,color:"rgba(148, 163, 184, 0.15)",className:"bg-slate-950"}),(0,t.jsx)(s.Controls,{className:"!bg-slate-800/80 !border-slate-700 !shadow-xl !rounded-xl overflow-hidden",showInteractive:!1}),K&&(0,t.jsx)(s.MiniMap,{className:"!bg-slate-800/80 !border-slate-700 !rounded-xl !shadow-xl !overflow-hidden",nodeStrokeWidth:3,zoomable:!0,pannable:!0,maskColor:"rgba(15, 23, 42, 0.7)",nodeColor:e=>{let t=n.find(t=>t.id===e.id);return t?.color||"#64748B"}}),(0,t.jsx)(s.Panel,{position:"top-left",className:"m-4",children:(0,t.jsxs)(y.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-2 bg-slate-800/90 backdrop-blur-sm rounded-xl border border-slate-700 shadow-2xl",children:[(0,t.jsxs)("button",{onClick:W,className:"flex items-center gap-2 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-all",children:[(0,t.jsx)(p.Plus,{className:"w-4 h-4"}),"New Table"]}),(0,t.jsx)("div",{className:"w-px h-6 bg-slate-600 mx-1"}),(0,t.jsx)("button",{onClick:()=>q(),className:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Zoom Out",children:(0,t.jsx)(O.ZoomOut,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>V({padding:.2}),className:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Fit View",children:(0,t.jsx)(L.Maximize,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>J(),className:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Zoom In",children:(0,t.jsx)(A.ZoomIn,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"w-px h-6 bg-slate-600 mx-1"}),(0,t.jsx)("button",{onClick:()=>$(!F),className:(0,c.cn)("p-2 rounded-lg transition-colors",F?"text-blue-400 bg-blue-500/20":"text-slate-400 hover:text-white hover:bg-white/10"),title:"Toggle Grid",children:(0,t.jsx)(R.Grid3X3,{className:"w-4 h-4"})})]})}),(0,t.jsx)(s.Panel,{position:"top-right",className:"m-4",children:(0,t.jsxs)(y.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-slate-800/90 backdrop-blur-sm rounded-xl border border-slate-700 shadow-2xl",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm cursor-pointer transition-colors",children:[(0,t.jsx)(E.FileJson,{className:"w-4 h-4"}),"Import",(0,t.jsx)("input",{type:"file",accept:".json",onChange:es,className:"hidden"})]}),(0,t.jsx)("div",{className:"w-px h-6 bg-slate-600"}),(0,t.jsxs)("button",{onClick:et,className:"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-colors",title:"Export as JSON",children:[(0,t.jsx)(E.FileJson,{className:"w-4 h-4"}),"JSON"]}),(0,t.jsxs)("button",{onClick:el,className:"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-colors",title:"Export as SQL",children:[(0,t.jsx)(I.FileCode,{className:"w-4 h-4"}),"SQL"]}),(0,t.jsxs)("button",{onClick:ee,className:"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-colors",title:"Export as Image",children:[(0,t.jsx)(k.Download,{className:"w-4 h-4"}),"PNG"]}),(0,t.jsx)("div",{className:"w-px h-6 bg-slate-600"}),(0,t.jsx)("button",{onClick:()=>{confirm("Are you sure you want to clear all tables?")&&w()},className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors",title:"Clear All",children:(0,t.jsx)(g.Trash2,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("div",{className:"px-3 py-1.5 bg-slate-800/60 backdrop-blur-sm rounded-lg border border-slate-700/50",children:(0,t.jsxs)("span",{className:"text-xs text-slate-400",children:[n.length," table",1!==n.length?"s":""," • ",i.length," relation",1!==i.length?"s":""]})})})]})})]})})}function U(){return(0,t.jsx)(s.ReactFlowProvider,{children:(0,t.jsx)(M,{})})}var D=e.i(84765);let _=(0,x.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function B(){let e,s,a,n,[i,o]=(0,l.useState)("table"),{tables:x,relations:b,selectedTableId:N,selectedRelationId:j,selectedColumnId:v,updateTable:C,updateColumn:T,deleteColumn:k,updateRelation:E,deleteRelation:I,selectTable:A,clearSelection:O}=d(),L=x.find(e=>e.id===N),R=L?.columns.find(e=>e.id===v),P=b.find(e=>e.id===j);return(P&&"relation"!==i?o("relation"):R&&"column"!==i?o("column"):!L||"table"===i||R||P||o("table"),L||P)?(0,t.jsxs)(y.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"w-80 bg-slate-900/95 backdrop-blur-sm border-l border-slate-800 flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-800",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:P?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Link2,{className:"w-4 h-4 text-blue-400"}),(0,t.jsx)("h2",{className:"font-semibold text-slate-200",children:"Relation"})]}):R?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded bg-slate-700 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-amber-400"})}),(0,t.jsx)("h2",{className:"font-semibold text-slate-200",children:"Column"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:L?.color||"#64748B"}}),(0,t.jsx)("h2",{className:"font-semibold text-slate-200",children:"Table"})]})}),(0,t.jsx)("button",{onClick:O,className:"p-1.5 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors",children:(0,t.jsx)(w.X,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:(0,t.jsxs)(f.AnimatePresence,{mode:"wait",children:[P&&(0,t.jsxs)(y.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider mb-2 block",children:"Relation Type"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["ONE_TO_ONE","ONE_TO_MANY","MANY_TO_MANY"].map(e=>(0,t.jsxs)("button",{onClick:()=>E(P.id,{type:e}),className:(0,c.cn)("px-2 py-2 rounded-lg text-xs font-medium transition-all",P.type===e?"bg-blue-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),children:["ONE_TO_ONE"===e&&"1:1","ONE_TO_MANY"===e&&"1:N","MANY_TO_MANY"===e&&"N:N"]},e))})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"p-3 bg-slate-800/50 rounded-lg border border-slate-700/50",children:[(0,t.jsx)("span",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"From"}),(0,t.jsx)("div",{className:"mt-1",children:(e=x.find(e=>e.id===P.sourceTableId),s=e?.columns.find(e=>e.id===P.sourceColumnId),(0,t.jsxs)("div",{className:"text-sm text-slate-200",children:[(0,t.jsx)("span",{className:"font-medium",children:e?.name}),(0,t.jsx)("span",{className:"text-slate-500 mx-1",children:"."}),(0,t.jsx)("span",{className:"text-blue-400",children:s?.name})]}))})]}),(0,t.jsxs)("div",{className:"p-3 bg-slate-800/50 rounded-lg border border-slate-700/50",children:[(0,t.jsx)("span",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"To"}),(0,t.jsx)("div",{className:"mt-1",children:(a=x.find(e=>e.id===P.targetTableId),n=a?.columns.find(e=>e.id===P.targetColumnId),(0,t.jsxs)("div",{className:"text-sm text-slate-200",children:[(0,t.jsx)("span",{className:"font-medium",children:a?.name}),(0,t.jsx)("span",{className:"text-slate-500 mx-1",children:"."}),(0,t.jsx)("span",{className:"text-amber-400",children:n?.name})]}))})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:"On Delete"}),(0,t.jsxs)("select",{value:P.onDelete||"CASCADE",onChange:e=>E(P.id,{onDelete:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[(0,t.jsx)("option",{value:"CASCADE",children:"CASCADE"}),(0,t.jsx)("option",{value:"SET_NULL",children:"SET NULL"}),(0,t.jsx)("option",{value:"RESTRICT",children:"RESTRICT"}),(0,t.jsx)("option",{value:"NO_ACTION",children:"NO ACTION"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:"On Update"}),(0,t.jsxs)("select",{value:P.onUpdate||"CASCADE",onChange:e=>E(P.id,{onUpdate:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[(0,t.jsx)("option",{value:"CASCADE",children:"CASCADE"}),(0,t.jsx)("option",{value:"SET_NULL",children:"SET NULL"}),(0,t.jsx)("option",{value:"RESTRICT",children:"RESTRICT"}),(0,t.jsx)("option",{value:"NO_ACTION",children:"NO ACTION"})]})]})]}),(0,t.jsxs)("button",{onClick:()=>I(P.id),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg text-sm font-medium transition-colors",children:[(0,t.jsx)(g.Trash2,{className:"w-4 h-4"}),"Delete Relation"]})]},"relation"),R&&L&&(0,t.jsxs)(y.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:"Column Name"}),(0,t.jsx)("input",{type:"text",value:R.name,onChange:e=>T(L.id,R.id,{name:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"column_name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:"Data Type"}),(0,t.jsx)("select",{value:R.dataType,onChange:e=>T(L.id,R.id,{dataType:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:r.map(e=>(0,t.jsx)("option",{value:e.type,children:e.label},e.type))})]}),r.find(e=>e.type===R.dataType)?.hasLength&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:"Length"}),(0,t.jsx)("input",{type:"number",value:R.length||"",onChange:e=>T(L.id,R.id,{length:e.target.value?parseInt(e.target.value):void 0}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"255"})]}),r.find(e=>e.type===R.dataType)?.hasPrecision&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:"Precision"}),(0,t.jsx)("input",{type:"number",value:R.precision||"",onChange:e=>T(L.id,R.id,{precision:e.target.value?parseInt(e.target.value):void 0}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:"Scale"}),(0,t.jsx)("input",{type:"number",value:R.scale||"",onChange:e=>T(L.id,R.id,{scale:e.target.value?parseInt(e.target.value):void 0}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider mb-2 block",children:"Constraints"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center gap-3 p-2.5 bg-slate-800/50 rounded-lg cursor-pointer hover:bg-slate-800 transition-colors",children:[(0,t.jsx)("input",{type:"checkbox",checked:R.isPrimaryKey,onChange:e=>T(L.id,R.id,{isPrimaryKey:e.target.checked}),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-amber-500 focus:ring-amber-500/50"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m,{className:"w-4 h-4 text-amber-400"}),(0,t.jsx)("span",{className:"text-sm text-slate-300",children:"Primary Key"})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-3 p-2.5 bg-slate-800/50 rounded-lg cursor-pointer hover:bg-slate-800 transition-colors",children:[(0,t.jsx)("input",{type:"checkbox",checked:R.isUnique,onChange:e=>T(L.id,R.id,{isUnique:e.target.checked}),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-purple-500 focus:ring-purple-500/50"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h,{className:"w-4 h-4 text-purple-400"}),(0,t.jsx)("span",{className:"text-sm text-slate-300",children:"Unique"})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-3 p-2.5 bg-slate-800/50 rounded-lg cursor-pointer hover:bg-slate-800 transition-colors",children:[(0,t.jsx)("input",{type:"checkbox",checked:!R.nullable,onChange:e=>T(L.id,R.id,{nullable:!e.target.checked}),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-red-500 focus:ring-red-500/50"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(_,{className:"w-4 h-4 text-red-400"}),(0,t.jsx)("span",{className:"text-sm text-slate-300",children:"Required (NOT NULL)"})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-3 p-2.5 bg-slate-800/50 rounded-lg cursor-pointer hover:bg-slate-800 transition-colors",children:[(0,t.jsx)("input",{type:"checkbox",checked:R.isAutoIncrement,onChange:e=>T(L.id,R.id,{isAutoIncrement:e.target.checked}),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-green-500 focus:ring-green-500/50"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded flex items-center justify-center bg-green-500/20 text-green-400 text-[10px] font-bold",children:"+"}),(0,t.jsx)("span",{className:"text-sm text-slate-300",children:"Auto Increment"})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:"Default Value"}),(0,t.jsx)("input",{type:"text",value:R.defaultValue||"",onChange:e=>T(L.id,R.id,{defaultValue:e.target.value||void 0}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"NULL"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:"Comment"}),(0,t.jsx)("textarea",{value:R.comment||"",onChange:e=>T(L.id,R.id,{comment:e.target.value||void 0}),rows:2,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 resize-none",placeholder:"Column description..."})]}),!R.isPrimaryKey&&(0,t.jsxs)("button",{onClick:()=>k(L.id,R.id),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg text-sm font-medium transition-colors",children:[(0,t.jsx)(g.Trash2,{className:"w-4 h-4"}),"Delete Column"]})]},"column"),L&&!R&&(0,t.jsxs)(y.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:"Table Name"}),(0,t.jsx)("input",{type:"text",value:L.name,onChange:e=>C(L.id,{name:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"table_name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-2 block",children:"Color"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1","#14B8A6","#A855F7"].map(e=>(0,t.jsx)("button",{onClick:()=>C(L.id,{color:e}),className:(0,c.cn)("w-7 h-7 rounded-lg transition-all hover:scale-110",L.color===e?"ring-2 ring-white shadow-lg":"hover:ring-2 hover:ring-white/50"),style:{backgroundColor:e}},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:"Comment"}),(0,t.jsx)("textarea",{value:L.comment||"",onChange:e=>C(L.id,{comment:e.target.value||void 0}),rows:3,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 resize-none",placeholder:"Table description..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Columns"}),(0,t.jsxs)("span",{className:"text-xs text-slate-500",children:[L.columns.length," total"]})]}),(0,t.jsx)("div",{className:"space-y-1",children:L.columns.map((e,l)=>(0,t.jsxs)("div",{onClick:()=>A(L.id),className:(0,c.cn)("flex items-center gap-2 px-3 py-2 rounded-lg text-sm cursor-pointer transition-colors","hover:bg-slate-800/50",v===e.id&&"bg-slate-800 ring-1 ring-blue-500/50"),children:[(0,t.jsx)("span",{className:"text-xs text-slate-500 w-5",children:l+1}),e.isPrimaryKey&&(0,t.jsx)(m,{className:"w-3.5 h-3.5 text-amber-400"}),e.isForeignKey&&(0,t.jsx)(u.Link2,{className:"w-3.5 h-3.5 text-blue-400"}),!e.isPrimaryKey&&!e.isForeignKey&&(0,t.jsx)("div",{className:"w-3.5"}),(0,t.jsx)("span",{className:(0,c.cn)("flex-1",e.isPrimaryKey?"text-amber-100 font-medium":"text-slate-300"),children:e.name}),(0,t.jsx)("span",{className:"text-xs text-slate-500",children:e.dataType})]},e.id))})]})]},"table")]})})]}):(0,t.jsxs)(y.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"w-80 bg-slate-900/95 backdrop-blur-sm border-l border-slate-800 flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-800",children:(0,t.jsx)("h2",{className:"font-semibold text-slate-200",children:"Properties"})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4",children:(0,t.jsx)(D.Settings2,{className:"w-8 h-8 text-slate-500"})}),(0,t.jsx)("p",{className:"text-slate-400 text-sm",children:"Select a table, column, or relation to edit its properties"}),(0,t.jsxs)("div",{className:"mt-6 space-y-2 text-xs text-slate-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded bg-blue-500/20 flex items-center justify-center",children:(0,t.jsx)(p.Plus,{className:"w-2.5 h-2.5 text-blue-400"})}),(0,t.jsx)("span",{children:'Click "New Table" to add a table'})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded bg-slate-700 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-slate-400"})}),(0,t.jsx)("span",{children:"Drag handles to connect tables"})]})]})]})]})}e.i(58041),e.i(50682),e.i(74875),e.i(83086),e.i(64659),e.i(69074),e.i(39616);var F=e.i(37129);function $(){let{tables:e,relations:s,exportToJSON:a,exportToSQL:n,importFromJSON:i}=d(),r=(0,l.useCallback)(()=>{let e=new Blob([a()],{type:"application/json"}),t=URL.createObjectURL(e),l=document.createElement("a");l.download="erd-schema.json",l.href=t,l.click(),URL.revokeObjectURL(t)},[a]),o=(0,l.useCallback)(()=>{let e=new Blob([n()],{type:"text/plain"}),t=URL.createObjectURL(e),l=document.createElement("a");l.download="schema.sql",l.href=t,l.click(),URL.revokeObjectURL(t)},[n]),c=(0,l.useCallback)(e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=e=>{try{let t=e.target?.result;i(t)}catch(e){alert("Invalid JSON file")}},e.readAsText(t)}e.target.value=""},[i]);return(0,t.jsxs)("div",{className:"flex flex-col h-screen bg-slate-950 overflow-hidden",children:[(0,t.jsx)(F.default,{title:"ERD Designer",subtitle:"Visual Database Design",onExportJSON:r,onExportSQL:o,onImport:c,stats:[{label:"Tables",value:e.length},{label:"Relations",value:s.length}]}),(0,t.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,t.jsx)("div",{className:"flex-1 relative",children:(0,t.jsx)(U,{})}),(0,t.jsx)(B,{})]})]})}e.s(["default",()=>$],52683)}]);