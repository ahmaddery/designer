(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12593,e=>{"use strict";var t=e.i(43476),l=e.i(71645),s=e.i(54548),a=e.i(30590),r=e.i(68834),o=e.i(79473);let i=[{type:"start",label:"Start/End",icon:"Circle",description:"Terminal point - Start or end of process",defaultSize:{width:120,height:60},defaultColor:"#10B981"},{type:"process",label:"Process",icon:"Square",description:"Action or operation step",defaultSize:{width:140,height:80},defaultColor:"#3B82F6"},{type:"decision",label:"Decision",icon:"Diamond",description:"Conditional branch (Yes/No)",defaultSize:{width:140,height:100},defaultColor:"#F59E0B"},{type:"input",label:"Input",icon:"Parallelogram",description:"Data input operation",defaultSize:{width:140,height:70},defaultColor:"#8B5CF6"},{type:"output",label:"Output",icon:"Parallelogram",description:"Data output operation",defaultSize:{width:140,height:70},defaultColor:"#EC4899"},{type:"document",label:"Document",icon:"FileText",description:"Document or report",defaultSize:{width:140,height:90},defaultColor:"#06B6D4"},{type:"database",label:"Database",icon:"Database",description:"Database storage",defaultSize:{width:140,height:90},defaultColor:"#6366F1"},{type:"predefined",label:"Predefined",icon:"RectangleHorizontal",description:"Predefined process (subroutine)",defaultSize:{width:140,height:80},defaultColor:"#84CC16"},{type:"delay",label:"Delay",icon:"Clock",description:"Wait or delay operation",defaultSize:{width:120,height:70},defaultColor:"#F97316"},{type:"stored-data",label:"Stored Data",icon:"HardDrive",description:"Data storage",defaultSize:{width:140,height:90},defaultColor:"#14B8A6"},{type:"manual-input",label:"Manual Input",icon:"Keyboard",description:"Manual data entry",defaultSize:{width:140,height:80},defaultColor:"#A855F7"},{type:"display",label:"Display",icon:"Monitor",description:"Display output",defaultSize:{width:140,height:80},defaultColor:"#E11D48"},{type:"preparation",label:"Preparation",icon:"Hexagon",description:"Initialization or preparation",defaultSize:{width:140,height:90},defaultColor:"#0EA5E9"},{type:"connector",label:"Connector",icon:"CircleDot",description:"Connection point within page",defaultSize:{width:50,height:50},defaultColor:"#64748B"},{type:"off-page",label:"Off-Page",icon:"ArrowRightToLine",description:"Connection to another page",defaultSize:{width:100,height:60},defaultColor:"#94A3B8"}],n=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1","#14B8A6","#A855F7","#E11D48","#0EA5E9","#64748B"];var d=e.i(75157);let c=(0,r.create)()((0,o.persist)((e,t)=>({nodes:[],edges:[],selectedNodeId:null,selectedEdgeId:null,canUndo:!1,canRedo:!1,addNode:(l,s)=>{let a=(0,d.generateId)(),r=i.find(e=>e.type===l)||i[1],o={id:a,type:l,position:s,size:{...r.defaultSize},data:{label:r.label,description:"",color:r.defaultColor,borderColor:r.defaultColor,textColor:"#FFFFFF",fontSize:14,borderWidth:2,borderStyle:"solid",opacity:1},rotation:0,zIndex:t().nodes.length};return e({nodes:[...t().nodes,o],selectedNodeId:a,selectedEdgeId:null}),a},updateNode:(l,s)=>{e({nodes:t().nodes.map(e=>e.id===l?{...e,...s}:e)})},updateNodeData:(l,s)=>{e({nodes:t().nodes.map(e=>e.id===l?{...e,data:{...e.data,...s}}:e)})},deleteNode:l=>{let{nodes:s,edges:a,selectedNodeId:r}=t(),o=a.filter(e=>e.source!==l&&e.target!==l);e({nodes:s.filter(e=>e.id!==l),edges:o,selectedNodeId:r===l?null:r})},duplicateNode:l=>{let{nodes:s}=t(),a=s.find(e=>e.id===l);if(!a)return;let r=(0,d.generateId)(),o={...a,id:r,position:{x:a.position.x+50,y:a.position.y+50},zIndex:s.length};e({nodes:[...s,o],selectedNodeId:r})},moveNode:(l,s)=>{e({nodes:t().nodes.map(e=>e.id===l?{...e,position:s}:e)})},resizeNode:(l,s)=>{e({nodes:t().nodes.map(e=>e.id===l?{...e,size:s}:e)})},rotateNode:(l,s)=>{e({nodes:t().nodes.map(e=>e.id===l?{...e,rotation:s}:e)})},bringToFront:l=>{let{nodes:s}=t(),a=Math.max(...s.map(e=>e.zIndex||0));e({nodes:s.map(e=>e.id===l?{...e,zIndex:a+1}:e)})},sendToBack:l=>{let{nodes:s}=t(),a=Math.min(...s.map(e=>e.zIndex||0));e({nodes:s.map(e=>e.id===l?{...e,zIndex:a-1}:e)})},addEdge:l=>{let s=(0,d.generateId)(),a={...l,id:s,type:l.type||"smooth",data:{color:"#64748B",strokeWidth:2,strokeStyle:"solid",startArrow:!1,endArrow:!0,labelBgColor:"#1E293B",labelTextColor:"#F1F5F9",...l.data}};return e({edges:[...t().edges,a],selectedEdgeId:s,selectedNodeId:null}),s},updateEdge:(l,s)=>{e({edges:t().edges.map(e=>e.id===l?{...e,...s}:e)})},updateEdgeData:(l,s)=>{e({edges:t().edges.map(e=>e.id===l?{...e,data:{...e.data,...s}}:e)})},deleteEdge:l=>{let{edges:s,selectedEdgeId:a}=t();e({edges:s.filter(e=>e.id!==l),selectedEdgeId:a===l?null:a})},selectNode:t=>{e({selectedNodeId:t,selectedEdgeId:null})},selectEdge:t=>{e({selectedEdgeId:t,selectedNodeId:null})},clearSelection:()=>{e({selectedNodeId:null,selectedEdgeId:null})},deleteSelected:()=>{let{selectedNodeId:e,selectedEdgeId:l}=t();e?t().deleteNode(e):l&&t().deleteEdge(l)},duplicateSelected:()=>{let{selectedNodeId:e}=t();e&&t().duplicateNode(e)},exportToJSON:()=>{let{nodes:e,edges:l}=t();return JSON.stringify({nodes:e,edges:l},null,2)},importFromJSON:t=>{try{let l=JSON.parse(t);l.nodes&&Array.isArray(l.nodes)&&e({nodes:l.nodes,edges:l.edges||[],selectedNodeId:null,selectedEdgeId:null})}catch(e){throw console.error("Failed to import JSON:",e),e}},exportToPNG:async e=>"",clearAll:()=>{e({nodes:[],edges:[],selectedNodeId:null,selectedEdgeId:null})},undo:()=>{},redo:()=>{}}),{name:"flowchart-designer-storage"}));var x=e.i(23585),h=e.i(27612),u=e.i(74886),p=e.i(75254);let m=(0,p.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),b=(0,p.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var g=e.i(46932),f=e.i(88653);let y=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsx)("div",{className:(0,d.cn)("w-full h-full rounded-full flex items-center justify-center transition-all duration-200",a&&"ring-2 ring-white/50"),style:{backgroundColor:e,border:`${s}px solid ${l}`},children:r}),j=({color:e,borderColor:l,borderWidth:s,borderStyle:a,selected:r,children:o})=>(0,t.jsx)("div",{className:(0,d.cn)("w-full h-full rounded-xl flex items-center justify-center transition-all duration-200",r&&"ring-2 ring-white/50"),style:{backgroundColor:e,border:`${s}px ${a} ${l}`},children:o}),w=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsx)("div",{className:(0,d.cn)("w-full h-full flex items-center justify-center transition-all duration-200",a&&"ring-2 ring-white/50"),style:{backgroundColor:e,clipPath:"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)"},children:(0,t.jsx)("div",{className:"w-[70%] h-[70%] flex items-center justify-center",children:r})}),v=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsx)("div",{className:(0,d.cn)("w-full h-full flex items-center justify-center transition-all duration-200",a&&"ring-2 ring-white/50"),style:{backgroundColor:e,clipPath:"polygon(15% 0%, 100% 0%, 85% 100%, 0% 100%)"},children:(0,t.jsx)("div",{className:"w-[80%] h-[70%] flex items-center justify-center",children:r})}),N=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsxs)("div",{className:(0,d.cn)("w-full h-full rounded-t-xl flex items-center justify-center relative transition-all duration-200",a&&"ring-2 ring-white/50 rounded-b-xl"),style:{backgroundColor:e,border:`${s}px solid ${l}`,borderBottom:"none",borderRadius:"12px 12px 0 12px"},children:[(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-[30%] h-[30%]",style:{backgroundColor:l,clipPath:"polygon(100% 0, 0 100%, 100% 100%)"}}),(0,t.jsx)("div",{className:"w-[80%] h-[70%] flex items-center justify-center z-10",children:r})]}),k=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsxs)("div",{className:(0,d.cn)("w-full h-full flex flex-col items-center justify-center transition-all duration-200",a&&"ring-2 ring-white/50 rounded-xl"),children:[(0,t.jsx)("div",{className:"w-full h-[20%] rounded-[50%]",style:{backgroundColor:l,border:`${s}px solid ${l}`}}),(0,t.jsx)("div",{className:"w-full flex-1",style:{backgroundColor:e,borderLeft:`${s}px solid ${l}`,borderRight:`${s}px solid ${l}`}}),(0,t.jsx)("div",{className:"w-full h-[20%] rounded-[50%] border-t-0",style:{backgroundColor:e,border:`${s}px solid ${l}`}}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:r})]}),C=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsx)("div",{className:(0,d.cn)("w-full h-full flex items-center justify-center transition-all duration-200",a&&"ring-2 ring-white/50 rounded-xl"),style:{backgroundColor:e,border:`${s}px double ${l}`,borderRadius:"12px"},children:r}),S=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsx)("div",{className:(0,d.cn)("w-full h-full flex items-center justify-center transition-all duration-200",a&&"ring-2 ring-white/50"),style:{backgroundColor:e,border:`${s}px solid ${l}`,borderRadius:"12px 12px 40px 12px"},children:r}),z=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsx)("div",{className:(0,d.cn)("w-full h-full flex items-center justify-center transition-all duration-200",a&&"ring-2 ring-white/50 rounded-xl"),style:{backgroundColor:e,border:`${s}px solid ${l}`,borderRadius:"0 50% 50% 0"},children:r}),F=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsx)("div",{className:(0,d.cn)("w-full h-full flex items-center justify-center transition-all duration-200",a&&"ring-2 ring-white/50"),style:{backgroundColor:e,clipPath:"polygon(20% 0%, 80% 0%, 100% 50%, 80% 100%, 20% 100%, 0% 50%)"},children:(0,t.jsx)("div",{className:"w-[70%] h-[70%] flex items-center justify-center",children:r})}),E=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsx)("div",{className:(0,d.cn)("w-full h-full rounded-full flex items-center justify-center transition-all duration-200",a&&"ring-2 ring-white/50"),style:{backgroundColor:e,border:`${s}px solid ${l}`},children:r}),D=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsx)("div",{className:(0,d.cn)("w-full h-full flex items-center justify-center transition-all duration-200",a&&"ring-2 ring-white/50"),style:{backgroundColor:e,clipPath:"polygon(0% 0%, 75% 0%, 100% 50%, 75% 100%, 0% 100%)"},children:(0,t.jsx)("div",{className:"w-[70%] h-[70%] flex items-center justify-center",children:r})}),P=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsx)("div",{className:(0,d.cn)("w-full h-full flex items-center justify-center transition-all duration-200",a&&"ring-2 ring-white/50"),style:{backgroundColor:e,clipPath:"polygon(0% 25%, 100% 0%, 100% 100%, 0% 100%)"},children:(0,t.jsx)("div",{className:"w-[80%] h-[70%] flex items-center justify-center mt-2",children:r})}),B=({color:e,borderColor:l,borderWidth:s,selected:a,children:r})=>(0,t.jsx)("div",{className:(0,d.cn)("w-full h-full flex items-center justify-center transition-all duration-200",a&&"ring-2 ring-white/50"),style:{backgroundColor:e,clipPath:"polygon(15% 0%, 85% 0%, 100% 50%, 85% 100%, 15% 100%, 0% 50%)"},children:(0,t.jsx)("div",{className:"w-[70%] h-[70%] flex items-center justify-center",children:r})}),I=({node:e,isSelected:l})=>{let{data:s,type:a}=e,r={color:s.textColor||"#FFFFFF",fontSize:`${s.fontSize||14}px`,fontWeight:500,textAlign:"center",wordWrap:"break-word",maxWidth:"90%",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",lineHeight:1.3,opacity:s.opacity||1},o={color:s.color||"#3B82F6",borderColor:s.borderColor||"#1D4ED8",borderWidth:s.borderWidth||2,borderStyle:s.borderStyle||"solid",selected:l},i=(0,t.jsx)("span",{style:r,className:"px-2 select-none pointer-events-none",children:s.label});switch(a){case"start":case"end":return(0,t.jsx)(y,{...o,children:i});case"process":default:return(0,t.jsx)(j,{...o,children:i});case"decision":return(0,t.jsx)(w,{...o,children:i});case"input":case"output":return(0,t.jsx)(v,{...o,children:i});case"document":return(0,t.jsx)(N,{...o,children:i});case"database":return(0,t.jsx)(k,{...o,children:i});case"predefined":return(0,t.jsx)(C,{...o,children:i});case"delay":return(0,t.jsx)(S,{...o,children:i});case"stored-data":return(0,t.jsx)(z,{...o,children:i});case"preparation":return(0,t.jsx)(F,{...o,children:i});case"connector":return(0,t.jsx)(E,{...o,children:i});case"off-page":return(0,t.jsx)(D,{...o,children:i});case"manual-input":return(0,t.jsx)(P,{...o,children:i});case"display":return(0,t.jsx)(B,{...o,children:i})}},M=(0,l.memo)(function({data:e,selected:r}){let{nodeId:o}=e,[i,n]=(0,l.useState)(!1),[p,y]=(0,l.useState)(!1),j=c(e=>e.nodes.find(e=>e.id===o)),w=c(e=>e.selectedNodeId),v=c(e=>e.selectNode),N=c(e=>e.duplicateNode),k=c(e=>e.deleteNode),C=c(e=>e.bringToFront),S=c(e=>e.sendToBack),z=c(e=>e.updateNodeData),F=w===o||r;if(!j)return null;let E=j.rotation||0;return(0,t.jsxs)("div",{className:(0,d.cn)("relative transition-all duration-200",F&&"z-50"),style:{width:j.size.width,height:j.size.height,transform:`rotate(${E}deg)`,opacity:j.data.opacity||1},onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),onClick:()=>v(o),children:[(0,t.jsx)(I,{node:j,isSelected:F}),F&&(0,t.jsx)("div",{className:"absolute -inset-1 border-2 border-dashed border-blue-400 rounded-lg pointer-events-none"}),F&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"absolute -top-1 -left-1 w-3 h-3 bg-blue-500 rounded-full cursor-nw-resize"}),(0,t.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full cursor-ne-resize"}),(0,t.jsx)("div",{className:"absolute -bottom-1 -left-1 w-3 h-3 bg-blue-500 rounded-full cursor-sw-resize"}),(0,t.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-blue-500 rounded-full cursor-se-resize"})]}),(p||F)&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),n(!i)},className:"absolute -top-3 -right-3 p-1.5 rounded-full bg-slate-700 hover:bg-slate-600 text-slate-300 shadow-lg transition-all z-50",children:(0,t.jsx)(x.MoreVertical,{className:"w-3 h-3"})}),(0,t.jsx)(f.AnimatePresence,{children:i&&(0,t.jsxs)(g.motion.div,{initial:{opacity:0,scale:.95,y:-5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-5},className:"absolute -top-2 left-full ml-2 w-48 bg-slate-800 rounded-xl border border-slate-700 shadow-2xl z-50 overflow-hidden",children:[(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),N(o),n(!1)},className:"w-full px-3 py-2 flex items-center gap-2 text-xs text-slate-300 hover:bg-white/5 transition-colors",children:[(0,t.jsx)(u.Copy,{className:"w-3.5 h-3.5"}),"Duplicate"]}),(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),C(o),n(!1)},className:"w-full px-3 py-2 flex items-center gap-2 text-xs text-slate-300 hover:bg-white/5 transition-colors",children:[(0,t.jsx)(m,{className:"w-3.5 h-3.5"}),"Bring to Front"]}),(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),S(o),n(!1)},className:"w-full px-3 py-2 flex items-center gap-2 text-xs text-slate-300 hover:bg-white/5 transition-colors",children:[(0,t.jsx)(b,{className:"w-3.5 h-3.5"}),"Send to Back"]}),(0,t.jsxs)("div",{className:"px-3 py-2 border-t border-white/5",children:[(0,t.jsx)("span",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Color"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-1.5",children:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16"].map(e=>(0,t.jsx)("button",{onClick:()=>{z(o,{color:e,borderColor:e}),n(!1)},className:(0,d.cn)("w-5 h-5 rounded-full transition-transform hover:scale-110",j.data.color===e&&"ring-2 ring-white"),style:{backgroundColor:e}},e))})]}),(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),k(o),n(!1)},className:"w-full px-3 py-2 flex items-center gap-2 text-xs text-red-400 hover:bg-red-500/10 transition-colors border-t border-white/5",children:[(0,t.jsx)(h.Trash2,{className:"w-3.5 h-3.5"}),"Delete"]})]})}),i&&(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),(0,t.jsx)(s.Handle,{type:"source",position:a.Position.Top,className:"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{top:-6}}),(0,t.jsx)(s.Handle,{type:"target",position:a.Position.Top,className:"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{top:-6}}),(0,t.jsx)(s.Handle,{type:"source",position:a.Position.Right,className:"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{right:-6}}),(0,t.jsx)(s.Handle,{type:"target",position:a.Position.Right,className:"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{right:-6}}),(0,t.jsx)(s.Handle,{type:"source",position:a.Position.Bottom,className:"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{bottom:-6}}),(0,t.jsx)(s.Handle,{type:"target",position:a.Position.Bottom,className:"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{bottom:-6}}),(0,t.jsx)(s.Handle,{type:"source",position:a.Position.Left,className:"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{left:-6}}),(0,t.jsx)(s.Handle,{type:"target",position:a.Position.Left,className:"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors",style:{left:-6}})]})});var A=e.i(37727);let T=(0,l.memo)(function({id:e,sourceX:r,sourceY:o,targetX:i,targetY:n,sourcePosition:x,targetPosition:h,data:u,label:p,selected:m}){let[b,y]=(0,l.useState)(!1),j=c(e=>e.selectedEdgeId),w=c(e=>e.selectEdge),v=c(e=>e.deleteEdge),N=c(e=>e.updateEdge),k=c(e=>e.updateEdgeData),C=j===e||m,S=u?.type||"smooth",z=u?.color||"#64748B",F=u?.strokeWidth||2,E=u?.strokeStyle||"solid",D=u?.startArrow||!1,P=u?.endArrow!==!1,B="",I=0,M=0;switch(S){case"straight":[B,I,M]=(0,a.getStraightPath)({sourceX:r,sourceY:o,targetX:i,targetY:n});break;case"step":[B,I,M]=(0,a.getSmoothStepPath)({sourceX:r,sourceY:o,sourcePosition:x,targetX:i,targetY:n,targetPosition:h,borderRadius:0});break;default:[B,I,M]=(0,a.getBezierPath)({sourceX:r,sourceY:o,sourcePosition:x,targetX:i,targetY:n,targetPosition:h,curvature:.3})}let T=D?`url(#arrow-start-${e})`:void 0,L=P?`url(#arrow-end-${e})`:void 0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("defs",{children:[(0,t.jsx)("marker",{id:`arrow-start-${e}`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:(0,t.jsx)("path",{d:"M10,0 L0,3 L10,6",fill:"none",stroke:z,strokeWidth:"1.5"})}),(0,t.jsx)("marker",{id:`arrow-end-${e}`,markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:(0,t.jsx)("path",{d:"M0,0 L10,3 L0,6",fill:"none",stroke:z,strokeWidth:"1.5"})})]}),(0,t.jsx)(s.BaseEdge,{path:B,style:{stroke:z,strokeWidth:C?F+1:F,strokeDasharray:"dashed"===E?"8,4":"dotted"===E?"2,4":void 0},markerStart:T,markerEnd:L,className:"transition-all duration-200"}),(0,t.jsx)(s.EdgeLabelRenderer,{children:(0,t.jsx)("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${I}px, ${M}px)`},className:"nodrag nopan",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:(0,t.jsx)(f.AnimatePresence,{children:(b||C)&&(0,t.jsxs)(g.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:(0,d.cn)("flex items-center gap-1 p-1 rounded-lg","bg-slate-800 border border-slate-600 shadow-xl"),children:[(0,t.jsxs)("select",{value:S,onChange:t=>{var l;return l=t.target.value,void(e&&N(e,{type:l}))},onClick:e=>e.stopPropagation(),className:"text-[10px] bg-slate-700 text-slate-200 rounded px-1.5 py-0.5 border-none outline-none cursor-pointer",children:[(0,t.jsx)("option",{value:"smooth",children:"Smooth"}),(0,t.jsx)("option",{value:"straight",children:"Straight"}),(0,t.jsx)("option",{value:"step",children:"Step"})]}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),k(e,{endArrow:!P})},className:(0,d.cn)("px-1.5 py-0.5 rounded text-[10px] font-medium transition-colors",P?"bg-blue-500 text-white":"bg-slate-600 text-slate-300"),children:"→"}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),e&&v(e)},className:"p-1 rounded hover:bg-red-500/20 text-red-400 transition-colors",children:(0,t.jsx)(A.X,{className:"w-3 h-3"})})]})})})}),(0,t.jsx)("path",{d:B,stroke:"transparent",strokeWidth:15,fill:"none",className:"cursor-pointer",onClick:()=>e&&w(e)})]})});var L=e.i(66459),R=e.i(40160),$=e.i(81399),O=e.i(7233),W=e.i(54212),H=e.i(20354),U=e.i(74344),J=e.i(95444);let q=(0,p.default)("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),V={flowchartNode:M},X={flowchartEdge:T};function K(){let e=(0,l.useRef)(null),{nodes:r,edges:o,selectedNodeId:i,selectedEdgeId:n,addNode:x,addEdge:u,selectNode:p,selectEdge:m,clearSelection:b,moveNode:f,deleteSelected:y,duplicateSelected:j,exportToJSON:w,importFromJSON:v,clearAll:N}=c(),[k,C,S]=(0,s.useNodesState)([]),[z,F,E]=(0,s.useEdgesState)([]),[D,P]=(0,l.useState)(!0),[B,I]=(0,l.useState)(!0),{fitView:M,zoomIn:A,zoomOut:T,screenToFlowPosition:K}=(0,s.useReactFlow)();(0,l.useEffect)(()=>{C(r.map(e=>({id:e.id,type:"flowchartNode",position:e.position,data:{nodeId:e.id},selected:e.id===i,zIndex:e.zIndex||0})))},[r,i,C]),(0,l.useEffect)(()=>{F(o.map(e=>({id:e.id,source:e.source,target:e.target,type:"flowchartEdge",data:{edgeId:e.id,...e.data,type:e.type},selected:e.id===n,label:e.label})))},[o,n,F]);let G=(0,l.useCallback)(e=>{e.source&&e.target&&u({source:e.source,target:e.target,type:"smooth",sourceHandle:e.sourceHandle||void 0,targetHandle:e.targetHandle||void 0}),F(t=>(0,a.addEdge)(e,t))},[u,F]),Y=(0,l.useCallback)((e,t)=>{f(t.id,t.position)},[f]),Z=(0,l.useCallback)(()=>{b()},[b]),Q=(0,l.useCallback)((e,t)=>{p(t.id)},[p]),_=(0,l.useCallback)((e,t)=>{m(t.id)},[m]),ee=(0,l.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},[]),et=(0,l.useCallback)(t=>{t.preventDefault();let l=t.dataTransfer.getData("application/flowchart-shape");if(l&&e.current){let e=K({x:t.clientX,y:t.clientY});x(l,{x:e.x-70,y:e.y-40})}},[x,K]),el=(0,l.useCallback)((t="process")=>{let l=e.current;if(l){let{width:e,height:s}=l.getBoundingClientRect(),a=K({x:e/2,y:s/2});x(t,{x:a.x-70,y:a.y-40})}},[x,K]),es=(0,l.useCallback)(async()=>{if(e.current){let t=await (0,L.toPng)(e.current,{backgroundColor:"#0f172a"}),l=document.createElement("a");l.download="flowchart.png",l.href=t,l.click()}},[]),ea=(0,l.useCallback)(()=>{let e=new Blob([w()],{type:"application/json"}),t=URL.createObjectURL(e),l=document.createElement("a");l.download="flowchart.json",l.href=t,l.click(),URL.revokeObjectURL(t)},[w]),er=(0,l.useCallback)(e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=e=>{try{let t=e.target?.result;v(t)}catch(e){alert("Invalid JSON file")}},e.readAsText(t)}e.target.value=""},[v]);return(0,l.useEffect)(()=>{let e=e=>{let t=e.target,l="INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable;"Delete"!==e.key&&"Backspace"!==e.key||l||y(),(e.ctrlKey||e.metaKey)&&"d"===e.key&&(e.preventDefault(),j())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[y,j]),(0,t.jsx)("div",{className:"relative w-full h-full",ref:e,children:(0,t.jsxs)(s.ReactFlow,{nodes:k,edges:z,onNodesChange:S,onEdgesChange:E,onConnect:G,onNodeDragStop:Y,onPaneClick:Z,onNodeClick:Q,onEdgeClick:_,onDragOver:ee,onDrop:et,nodeTypes:V,edgeTypes:X,connectionMode:a.ConnectionMode.Loose,fitView:!0,fitViewOptions:{padding:.2},defaultEdgeOptions:{type:"flowchartEdge"},snapToGrid:!0,snapGrid:[15,15],className:"bg-slate-950",deleteKeyCode:["Backspace","Delete"],children:[D&&(0,t.jsx)(s.Background,{variant:s.BackgroundVariant.Dots,gap:20,size:1,color:"rgba(148, 163, 184, 0.15)",className:"bg-slate-950"}),(0,t.jsx)(s.Controls,{className:"!bg-slate-800/80 !border-slate-700 !shadow-xl !rounded-xl overflow-hidden",showInteractive:!1}),B&&(0,t.jsx)(s.MiniMap,{className:"!bg-slate-800/80 !border-slate-700 !rounded-xl !shadow-xl !overflow-hidden",nodeStrokeWidth:3,zoomable:!0,pannable:!0,maskColor:"rgba(15, 23, 42, 0.7)",nodeColor:e=>{let t=r.find(t=>t.id===e.id);return t?.data.color||"#64748B"}}),(0,t.jsx)(s.Panel,{position:"top-left",className:"m-4",children:(0,t.jsxs)(g.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-2 bg-slate-800/90 backdrop-blur-sm rounded-xl border border-slate-700 shadow-2xl",children:[(0,t.jsxs)("button",{onClick:()=>el("process"),className:"flex items-center gap-2 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-all",children:[(0,t.jsx)(O.Plus,{className:"w-4 h-4"}),"Add Node"]}),(0,t.jsx)("div",{className:"w-px h-6 bg-slate-600 mx-1"}),(0,t.jsx)("button",{onClick:()=>T(),className:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Zoom Out",children:(0,t.jsx)(H.ZoomOut,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>M({padding:.2}),className:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Fit View",children:(0,t.jsx)(U.Maximize,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>A(),className:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Zoom In",children:(0,t.jsx)(W.ZoomIn,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"w-px h-6 bg-slate-600 mx-1"}),(0,t.jsx)("button",{onClick:()=>P(!D),className:(0,d.cn)("p-2 rounded-lg transition-colors",D?"text-blue-400 bg-blue-500/20":"text-slate-400 hover:text-white hover:bg-white/10"),title:"Toggle Grid",children:(0,t.jsx)(J.Grid3X3,{className:"w-4 h-4"})})]})}),(0,t.jsx)(s.Panel,{position:"top-right",className:"m-4",children:(0,t.jsxs)(g.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-slate-800/90 backdrop-blur-sm rounded-xl border border-slate-700 shadow-2xl",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm cursor-pointer transition-colors",children:[(0,t.jsx)($.FileJson,{className:"w-4 h-4"}),"Import",(0,t.jsx)("input",{type:"file",accept:".json",onChange:er,className:"hidden"})]}),(0,t.jsx)("div",{className:"w-px h-6 bg-slate-600"}),(0,t.jsxs)("button",{onClick:ea,className:"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-colors",title:"Export as JSON",children:[(0,t.jsx)($.FileJson,{className:"w-4 h-4"}),"JSON"]}),(0,t.jsxs)("button",{onClick:es,className:"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-colors",title:"Export as Image",children:[(0,t.jsx)(R.Download,{className:"w-4 h-4"}),"PNG"]}),(0,t.jsx)("div",{className:"w-px h-6 bg-slate-600"}),(0,t.jsx)("button",{onClick:()=>{confirm("Are you sure you want to clear all?")&&N()},className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors",title:"Clear All",children:(0,t.jsx)(h.Trash2,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("div",{className:"px-3 py-1.5 bg-slate-800/60 backdrop-blur-sm rounded-lg border border-slate-700/50",children:(0,t.jsxs)("span",{className:"text-xs text-slate-400",children:[r.length," node",1!==r.length?"s":""," • ",o.length," connection",1!==o.length?"s":""]})})})]})}),(0,t.jsx)(s.Panel,{position:"bottom-center",className:"mb-4",children:(0,t.jsxs)("div",{className:"px-4 py-2 bg-slate-800/80 backdrop-blur-sm rounded-full border border-slate-700/50 text-xs text-slate-400 flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(q,{className:"w-3.5 h-3.5"}),"Shortcuts:"]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 bg-slate-700 rounded text-slate-300",children:"Delete"})," Remove"]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 bg-slate-700 rounded text-slate-300",children:"Ctrl+D"})," Duplicate"]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 bg-slate-700 rounded text-slate-300",children:"Drag"})," Connect"]})]})})]})})}function G(){return(0,t.jsx)(s.ReactFlowProvider,{children:(0,t.jsx)(K,{})})}let Y=(0,p.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Z=(0,p.default)("diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);var Q=e.i(58041);let _=(0,p.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ee=(0,p.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),et=(0,p.default)("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),el=(0,p.default)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),es=(0,p.default)("hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]),ea=(0,p.default)("circle-dot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]),er=(0,p.default)("arrow-right-to-line",[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]]),eo=(0,p.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var ei=e.i(64659);let en=(0,p.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),ed={Circle:(0,t.jsx)("div",{className:"w-4 h-4 rounded-full bg-current"}),Square:(0,t.jsx)(Y,{className:"w-4 h-4"}),Diamond:(0,t.jsx)(Z,{className:"w-4 h-4"}),Parallelogram:(0,t.jsx)("div",{className:"w-4 h-3 bg-current transform skew-x-12"}),FileText:(0,t.jsx)(_,{className:"w-4 h-4"}),Database:(0,t.jsx)(Q.Database,{className:"w-4 h-4"}),RectangleHorizontal:(0,t.jsx)("div",{className:"w-5 h-3 border-2 border-current"}),Clock:(0,t.jsx)(ee,{className:"w-4 h-4"}),HardDrive:(0,t.jsx)(et,{className:"w-4 h-4"}),Keyboard:(0,t.jsx)(q,{className:"w-4 h-4"}),Monitor:(0,t.jsx)(el,{className:"w-4 h-4"}),Hexagon:(0,t.jsx)(es,{className:"w-4 h-4"}),CircleDot:(0,t.jsx)(ea,{className:"w-4 h-4"}),ArrowRightToLine:(0,t.jsx)(er,{className:"w-4 h-4"})},ec=[{id:"basic",name:"Basic",types:["start","end","process","decision"]},{id:"io",name:"Input/Output",types:["input","output","document"]},{id:"data",name:"Data",types:["database","stored-data"]},{id:"advanced",name:"Advanced",types:["predefined","delay","manual-input","display","preparation"]},{id:"connector",name:"Connectors",types:["connector","off-page"]}];function ex({onDragStart:e}){let[s,a]=(0,l.useState)(""),[r,o]=(0,l.useState)(["basic"]),n=s?i.filter(e=>e.label.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase())):null;return(0,t.jsxs)("div",{className:"w-64 bg-slate-900/95 backdrop-blur-sm border-r border-slate-800 flex flex-col h-full",children:[(0,t.jsx)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-800",children:(0,t.jsx)("h2",{className:"font-semibold text-slate-200",children:"Shapes"})}),(0,t.jsx)("div",{className:"px-3 py-2 border-b border-slate-800",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(en,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),(0,t.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),placeholder:"Search shapes...",className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-9 pr-8 py-1.5 text-sm text-slate-200 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50"}),s&&(0,t.jsx)("button",{onClick:()=>a(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300",children:(0,t.jsx)(A.X,{className:"w-3.5 h-3.5"})})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto py-2",children:n?(0,t.jsxs)("div",{className:"px-2 space-y-1",children:[n.map(l=>(0,t.jsx)(eh,{shape:l,onDragStart:()=>e(l.type)},l.type)),0===n.length&&(0,t.jsx)("div",{className:"text-center py-8 text-slate-500 text-sm",children:"No shapes found"})]}):(0,t.jsx)("div",{className:"space-y-1",children:ec.map(l=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>{var e;return e=l.id,void o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:"w-full flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-colors",children:[r.includes(l.id)?(0,t.jsx)(ei.ChevronDown,{className:"w-4 h-4"}):(0,t.jsx)(eo,{className:"w-4 h-4"}),l.name]}),(0,t.jsx)(f.AnimatePresence,{children:r.includes(l.id)&&(0,t.jsx)(g.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:(0,t.jsx)("div",{className:"px-2 pb-2 space-y-1",children:l.types.map(l=>{let s=i.find(e=>e.type===l);return s?(0,t.jsx)(eh,{shape:s,onDragStart:()=>e(s.type)},s.type):null})})})})]},l.id))})}),(0,t.jsx)("div",{className:"px-4 py-3 border-t border-slate-800",children:(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"Drag shapes to the canvas or click to add at center"})})]})}function eh({shape:e,onDragStart:s}){let[a,r]=(0,l.useState)(!1);return(0,t.jsxs)("div",{draggable:!0,onDragStart:t=>{r(!0),s(),t.dataTransfer.setData("application/flowchart-shape",e.type),t.dataTransfer.effectAllowed="copy"},onDragEnd:()=>r(!1),className:(0,d.cn)("group flex items-center gap-3 px-3 py-2 rounded-lg cursor-grab","hover:bg-white/5 transition-all duration-200",a&&"opacity-50 cursor-grabbing"),children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-white shrink-0",style:{backgroundColor:e.defaultColor},children:ed[e.icon]||(0,t.jsx)(Y,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-300 group-hover:text-white truncate",children:e.label}),(0,t.jsx)("p",{className:"text-xs text-slate-500 truncate",children:e.description})]})]})}var eu=e.i(84765);let ep=(0,p.default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),em=(0,p.default)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),eb=(0,p.default)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),eg=(0,p.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),ef=(0,p.default)("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);var ey=e.i(58524);function ej(){let[e,s]=(0,l.useState)("node"),{nodes:a,edges:r,selectedNodeId:o,selectedEdgeId:i,updateNode:x,updateNodeData:p,updateEdge:y,updateEdgeData:j,deleteNode:w,deleteEdge:v,duplicateNode:N,bringToFront:k,sendToBack:C,clearSelection:S}=c(),z=a.find(e=>e.id===o),F=r.find(e=>e.id===i);return(F&&"edge"!==e?s("edge"):z&&"node"!==e&&"style"!==e&&s("node"),z||F)?(0,t.jsxs)(g.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"w-80 bg-slate-900/95 backdrop-blur-sm border-l border-slate-800 flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-800",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:F?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ey.Link2,{className:"w-4 h-4 text-blue-400"}),(0,t.jsx)("h2",{className:"font-semibold text-slate-200",children:"Connection"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:z?.data.color||"#3B82F6"}}),(0,t.jsx)("h2",{className:"font-semibold text-slate-200",children:"Node"})]})}),(0,t.jsx)("button",{onClick:S,className:"p-1.5 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors",children:(0,t.jsx)(A.X,{className:"w-4 h-4"})})]}),z&&(0,t.jsxs)("div",{className:"flex border-b border-slate-800",children:[(0,t.jsx)("button",{onClick:()=>s("node"),className:(0,d.cn)("flex-1 px-4 py-2 text-xs font-medium transition-colors","node"===e?"text-blue-400 border-b-2 border-blue-400":"text-slate-400 hover:text-slate-200"),children:"Content"}),(0,t.jsx)("button",{onClick:()=>s("style"),className:(0,d.cn)("flex-1 px-4 py-2 text-xs font-medium transition-colors","style"===e?"text-blue-400 border-b-2 border-blue-400":"text-slate-400 hover:text-slate-200"),children:"Style"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:(0,t.jsxs)(f.AnimatePresence,{mode:"wait",children:[z&&"node"===e&&(0,t.jsxs)(g.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5",children:[(0,t.jsx)(ep,{className:"w-3.5 h-3.5"}),"Label"]}),(0,t.jsx)("input",{type:"text",value:z.data.label,onChange:e=>p(z.id,{label:e.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"Enter label..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:"Description"}),(0,t.jsx)("textarea",{value:z.data.description||"",onChange:e=>p(z.id,{description:e.target.value}),rows:3,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 resize-none",placeholder:"Add description..."})]}),(0,t.jsxs)("div",{className:"p-3 bg-slate-800/50 rounded-lg border border-slate-700/50",children:[(0,t.jsx)("span",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Type"}),(0,t.jsx)("p",{className:"text-sm text-slate-300 mt-1 capitalize",children:z.type.replace("-"," ")})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5",children:[(0,t.jsx)(eg,{className:"w-3.5 h-3.5"}),"Width"]}),(0,t.jsx)("input",{type:"number",value:z.size.width,onChange:e=>x(z.id,{size:{...z.size,width:parseInt(e.target.value)||100}}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5",children:[(0,t.jsx)(eg,{className:"w-3.5 h-3.5"}),"Height"]}),(0,t.jsx)("input",{type:"number",value:z.size.height,onChange:e=>x(z.id,{size:{...z.size,height:parseInt(e.target.value)||60}}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5",children:[(0,t.jsx)(ef,{className:"w-3.5 h-3.5"}),"X Position"]}),(0,t.jsx)("input",{type:"number",value:Math.round(z.position.x),readOnly:!0,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5",children:[(0,t.jsx)(ef,{className:"w-3.5 h-3.5"}),"Y Position"]}),(0,t.jsx)("input",{type:"number",value:Math.round(z.position.y),readOnly:!0,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-2 block",children:"Layer Order"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>k(z.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs text-slate-300 transition-colors",children:[(0,t.jsx)(m,{className:"w-3.5 h-3.5"}),"To Front"]}),(0,t.jsxs)("button",{onClick:()=>C(z.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs text-slate-300 transition-colors",children:[(0,t.jsx)(b,{className:"w-3.5 h-3.5"}),"To Back"]})]})]}),(0,t.jsxs)("div",{className:"pt-4 border-t border-slate-800 space-y-2",children:[(0,t.jsxs)("button",{onClick:()=>N(z.id),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg text-sm transition-colors",children:[(0,t.jsx)(u.Copy,{className:"w-4 h-4"}),"Duplicate Node"]}),(0,t.jsxs)("button",{onClick:()=>w(z.id),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg text-sm transition-colors",children:[(0,t.jsx)(h.Trash2,{className:"w-4 h-4"}),"Delete Node"]})]})]},"node-content"),z&&"style"===e&&(0,t.jsxs)(g.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-slate-400 mb-2 flex items-center gap-1.5",children:[(0,t.jsx)(em,{className:"w-3.5 h-3.5"}),"Fill Color"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map(e=>(0,t.jsx)("button",{onClick:()=>p(z.id,{color:e}),className:(0,d.cn)("w-8 h-8 rounded-lg transition-all hover:scale-110",z.data.color===e?"ring-2 ring-white shadow-lg":"hover:ring-2 hover:ring-white/50"),style:{backgroundColor:e}},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-2 block",children:"Border Color"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map(e=>(0,t.jsx)("button",{onClick:()=>p(z.id,{borderColor:e}),className:(0,d.cn)("w-6 h-6 rounded-full transition-all hover:scale-110",z.data.borderColor===e?"ring-2 ring-white":"hover:ring-2 hover:ring-white/50"),style:{backgroundColor:e}},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-2 block",children:"Text Color"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>p(z.id,{textColor:"#FFFFFF"}),className:(0,d.cn)("w-8 h-8 rounded-lg bg-white border-2","#FFFFFF"===z.data.textColor?"border-blue-500":"border-slate-600")}),(0,t.jsx)("button",{onClick:()=>p(z.id,{textColor:"#0F172A"}),className:(0,d.cn)("w-8 h-8 rounded-lg bg-slate-900 border-2","#0F172A"===z.data.textColor?"border-blue-500":"border-slate-600")}),(0,t.jsx)("button",{onClick:()=>p(z.id,{textColor:"#94A3B8"}),className:(0,d.cn)("w-8 h-8 rounded-lg bg-slate-400 border-2","#94A3B8"===z.data.textColor?"border-blue-500":"border-slate-600")})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:["Font Size: ",z.data.fontSize||14,"px"]}),(0,t.jsx)("input",{type:"range",min:10,max:24,value:z.data.fontSize||14,onChange:e=>p(z.id,{fontSize:parseInt(e.target.value)}),className:"w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:["Border Width: ",z.data.borderWidth||2,"px"]}),(0,t.jsx)("input",{type:"range",min:0,max:5,value:z.data.borderWidth||2,onChange:e=>p(z.id,{borderWidth:parseInt(e.target.value)}),className:"w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-2 block",children:"Border Style"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["solid","dashed","dotted"].map(e=>(0,t.jsx)("button",{onClick:()=>p(z.id,{borderStyle:e}),className:(0,d.cn)("px-3 py-2 rounded-lg text-xs font-medium transition-all capitalize",z.data.borderStyle===e?"bg-blue-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:["Opacity: ",Math.round(100*(z.data.opacity||1)),"%"]}),(0,t.jsx)("input",{type:"range",min:.2,max:1,step:.1,value:z.data.opacity||1,onChange:e=>p(z.id,{opacity:parseFloat(e.target.value)}),className:"w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5",children:[(0,t.jsx)(eb,{className:"w-3.5 h-3.5"}),"Rotation: ",z.rotation||0,"°"]}),(0,t.jsx)("input",{type:"range",min:0,max:360,value:z.rotation||0,onChange:e=>x(z.id,{rotation:parseInt(e.target.value)}),className:"w-full"})]})]},"node-style"),F&&(0,t.jsxs)(g.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-2 block",children:"Connection Type"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["smooth","straight","step"].map(e=>(0,t.jsx)("button",{onClick:()=>y(F.id,{type:e}),className:(0,d.cn)("px-3 py-2 rounded-lg text-xs font-medium transition-all capitalize",F.type===e?"bg-blue-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-2 block",children:"Line Color"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:n.slice(0,8).map(e=>(0,t.jsx)("button",{onClick:()=>j(F.id,{color:e}),className:(0,d.cn)("w-6 h-6 rounded-full transition-all hover:scale-110",F.data?.color===e?"ring-2 ring-white":"hover:ring-2 hover:ring-white/50"),style:{backgroundColor:e}},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-slate-400 mb-1.5 block",children:["Line Width: ",F.data?.strokeWidth||2,"px"]}),(0,t.jsx)("input",{type:"range",min:1,max:5,value:F.data?.strokeWidth||2,onChange:e=>j(F.id,{strokeWidth:parseInt(e.target.value)}),className:"w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-2 block",children:"Line Style"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["solid","dashed","dotted"].map(e=>(0,t.jsx)("button",{onClick:()=>j(F.id,{strokeStyle:e}),className:(0,d.cn)("px-3 py-2 rounded-lg text-xs font-medium transition-all capitalize",F.data?.strokeStyle===e?"bg-blue-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400 mb-2 block",children:"Arrows"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>j(F.id,{startArrow:!F.data?.startArrow}),className:(0,d.cn)("flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all",F.data?.startArrow?"bg-blue-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),children:"← Start"}),(0,t.jsx)("button",{onClick:()=>j(F.id,{endArrow:!F.data?.endArrow}),className:(0,d.cn)("flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all",F.data?.endArrow!==!1?"bg-blue-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),children:"End →"})]})]}),(0,t.jsx)("div",{className:"pt-4 border-t border-slate-800",children:(0,t.jsxs)("button",{onClick:()=>v(F.id),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg text-sm transition-colors",children:[(0,t.jsx)(h.Trash2,{className:"w-4 h-4"}),"Delete Connection"]})})]},"edge")]})})]}):(0,t.jsxs)(g.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"w-80 bg-slate-900/95 backdrop-blur-sm border-l border-slate-800 flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-800",children:(0,t.jsx)("h2",{className:"font-semibold text-slate-200",children:"Properties"})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4",children:(0,t.jsx)(eu.Settings2,{className:"w-8 h-8 text-slate-500"})}),(0,t.jsx)("p",{className:"text-slate-400 text-sm",children:"Select a node or connection to edit its properties"}),(0,t.jsxs)("div",{className:"mt-6 space-y-2 text-xs text-slate-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded bg-slate-700"}),(0,t.jsx)("span",{children:"Drag shapes from the left panel"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full border-2 border-slate-500"}),(0,t.jsx)("span",{children:"Connect nodes by dragging handles"})]})]})]})]})}var ew=e.i(37129);function ev(){let{nodes:e,edges:s,exportToJSON:a,importFromJSON:r}=c(),o=(0,l.useCallback)(()=>{let e=new Blob([a()],{type:"application/json"}),t=URL.createObjectURL(e),l=document.createElement("a");l.download="flowchart.json",l.href=t,l.click(),URL.revokeObjectURL(t)},[a]),i=(0,l.useCallback)(e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=e=>{try{let t=e.target?.result;r(t)}catch(e){alert("Invalid JSON file")}},e.readAsText(t)}e.target.value=""},[r]);return(0,t.jsxs)("div",{className:"flex flex-col h-screen bg-slate-950 overflow-hidden",children:[(0,t.jsx)(ew.default,{title:"Flowchart Designer",subtitle:"Visual Process Design",onExportJSON:o,onImport:i,stats:[{label:"Nodes",value:e.length},{label:"Connections",value:s.length}]}),(0,t.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,t.jsx)(ex,{onDragStart:e=>{window.draggedShapeType=e}}),(0,t.jsx)("div",{className:"flex-1 relative",children:(0,t.jsx)(G,{})}),(0,t.jsx)(ej,{})]})]})}e.s(["default",()=>ev],12593)}]);