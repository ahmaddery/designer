(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80522,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(68834),a=e.i(79473),r=e.i(42923),i=e.i(75157);let n=(0,l.create)()((0,a.persist)((e,t)=>({nodes:[],edges:[],selectedNodeId:null,selectedEdgeId:null,addNode:(s,l)=>{let a=(0,i.generateId)(),n={id:a,type:s,position:l,size:(e=>{switch(e){case"ACTOR":return{width:80,height:100};case"USECASE":return{width:160,height:60};case"SYSTEM":return{width:300,height:400};case"NOTE":return{width:200,height:100};default:return{width:100,height:100}}})(s),data:{name:((e,t)=>{let s=t.filter(t=>t.type===e).length+1;switch(e){case"ACTOR":return`Actor ${s}`;case"USECASE":return`Use Case ${s}`;case"SYSTEM":return`System ${s}`;case"NOTE":return`Note ${s}`;default:return`Node ${s}`}})(s,t().nodes),color:r.USECASE_COLORS[Math.floor(Math.random()*r.USECASE_COLORS.length)]}};return e(e=>({nodes:[...e.nodes,n],selectedNodeId:a,selectedEdgeId:null})),a},updateNode:(t,s)=>{e(e=>({nodes:e.nodes.map(e=>e.id===t?{...e,data:{...e.data,...s}}:e)}))},moveNode:(t,s)=>{e(e=>({nodes:e.nodes.map(e=>e.id===t?{...e,position:s}:e)}))},resizeNode:(t,s)=>{e(e=>({nodes:e.nodes.map(e=>e.id===t?{...e,size:s}:e)}))},deleteNode:t=>{e(e=>({nodes:e.nodes.filter(e=>e.id!==t),edges:e.edges.filter(e=>e.sourceId!==t&&e.targetId!==t),selectedNodeId:e.selectedNodeId===t?null:e.selectedNodeId}))},addEdge:(t,s,l,a)=>{let r=(0,i.generateId)(),n=a;if(!n)switch(t){case"INCLUDE":n="«include»";break;case"EXTEND":n="«extend»";break;case"GENERALIZATION":n=""}let d={id:r,type:t,sourceId:s,targetId:l,label:n};return e(e=>({edges:[...e.edges,d],selectedEdgeId:r,selectedNodeId:null})),r},updateEdge:(t,s)=>{e(e=>({edges:e.edges.map(e=>e.id===t?{...e,...s}:e)}))},deleteEdge:t=>{e(e=>({edges:e.edges.filter(e=>e.id!==t),selectedEdgeId:e.selectedEdgeId===t?null:e.selectedEdgeId}))},selectNode:t=>{e({selectedNodeId:t,selectedEdgeId:null})},selectEdge:t=>{e({selectedEdgeId:t,selectedNodeId:null})},exportToJSON:()=>{let e=t();return JSON.stringify({nodes:e.nodes,edges:e.edges},null,2)},importFromJSON:t=>{try{let s=JSON.parse(t);s.nodes&&s.edges&&e({nodes:s.nodes,edges:s.edges,selectedNodeId:null,selectedEdgeId:null})}catch(e){throw console.error("Failed to import JSON:",e),e}},clearAll:()=>{e({nodes:[],edges:[],selectedNodeId:null,selectedEdgeId:null})}}),{name:"usecase-storage"}));var d=e.i(75254);let c=(0,d.default)("sticky-note",[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]]);function o({node:e,isSelected:s,onClick:l}){return(0,t.jsxs)("div",{onClick:l,className:(0,i.cn)("flex flex-col items-center gap-2 cursor-pointer group",s&&"ring-2 ring-blue-500 ring-offset-2 ring-offset-slate-950 rounded-lg"),style:{width:e.size.width,minHeight:e.size.height},children:[(0,t.jsxs)("svg",{width:"48",height:"64",viewBox:"0 0 48 64",fill:"none",className:"transition-transform group-hover:scale-105",children:[(0,t.jsx)("circle",{cx:"24",cy:"8",r:"6",stroke:e.data.color||"#94A3B8",strokeWidth:"2",fill:"none"}),(0,t.jsx)("line",{x1:"24",y1:"14",x2:"24",y2:"36",stroke:e.data.color||"#94A3B8",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"8",y1:"22",x2:"40",y2:"22",stroke:e.data.color||"#94A3B8",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"24",y1:"36",x2:"10",y2:"56",stroke:e.data.color||"#94A3B8",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"24",y1:"36",x2:"38",y2:"56",stroke:e.data.color||"#94A3B8",strokeWidth:"2"})]}),(0,t.jsxs)("div",{className:"text-center px-2",children:[(0,t.jsx)("span",{className:(0,i.cn)("text-sm font-medium text-slate-200",s&&"text-blue-400"),children:e.data.name}),e.data.stereotype&&(0,t.jsx)("p",{className:"text-[10px] text-slate-500",children:e.data.stereotype})]})]})}function x({node:e,isSelected:s,onClick:l}){return(0,t.jsxs)("div",{onClick:l,className:(0,i.cn)("relative flex items-center justify-center cursor-pointer",s&&"scale-105"),style:{width:e.size.width,height:e.size.height},children:[(0,t.jsx)("div",{className:(0,i.cn)("absolute inset-0 rounded-full border-2 transition-all",s?"border-blue-400 bg-blue-500/10 shadow-lg shadow-blue-500/20":"border-slate-600 bg-slate-800/50 group-hover:border-slate-500"),style:{borderColor:s?void 0:e.data.color}}),(0,t.jsxs)("div",{className:"relative z-10 text-center px-4 max-w-full",children:[e.data.stereotype&&(0,t.jsxs)("p",{className:"text-[10px] text-slate-500 mb-0.5",children:["«",e.data.stereotype,"»"]}),(0,t.jsx)("span",{className:(0,i.cn)("text-sm font-medium truncate block",s?"text-blue-400":"text-slate-200"),children:e.data.name})]})]})}function h({node:e,isSelected:s,onClick:l}){return(0,t.jsxs)("div",{onClick:l,className:(0,i.cn)("relative cursor-pointer",s&&"scale-[1.02]"),style:{width:e.size.width,height:e.size.height},children:[(0,t.jsx)("div",{className:(0,i.cn)("absolute inset-0 rounded-lg border-2 transition-all",s?"border-blue-400 bg-blue-500/5":"border-amber-500/50 bg-slate-900/30")}),(0,t.jsx)("div",{className:(0,i.cn)("absolute -top-3 left-4 px-3 py-1 rounded-md text-xs font-medium",s?"bg-blue-500 text-white":"bg-amber-500/20 text-amber-400 border border-amber-500/30"),children:e.data.name}),(0,t.jsx)("div",{className:"absolute inset-0 mt-4 p-4 overflow-hidden",children:e.data.description&&(0,t.jsx)("p",{className:"text-[10px] text-slate-500",children:e.data.description})})]})}function u({node:e,isSelected:s,onClick:l}){return(0,t.jsxs)("div",{onClick:l,className:(0,i.cn)("relative cursor-pointer p-3 transition-all",s&&"scale-[1.02]"),style:{width:e.size.width,height:e.size.height},children:[(0,t.jsx)("div",{className:(0,i.cn)("absolute inset-0 rounded-lg transition-all",s?"bg-purple-500/20 border-2 border-purple-400":"bg-yellow-500/10 border border-yellow-500/30"),style:{clipPath:"polygon(0 0, calc(100% - 16px) 0, 100% 16px, 100% 100%, 0 100%)"}}),(0,t.jsx)("div",{className:(0,i.cn)("absolute top-0 right-0 w-4 h-4 transition-all",s?"bg-purple-400":"bg-yellow-500/40"),style:{clipPath:"polygon(0 0, 100% 0, 100% 100%)"}}),(0,t.jsxs)("div",{className:"relative z-10 h-full overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mb-1.5",children:[(0,t.jsx)(c,{className:"w-3 h-3 text-yellow-500/70"}),(0,t.jsx)("span",{className:(0,i.cn)("text-xs font-medium",s?"text-purple-400":"text-yellow-500/80"),children:e.data.name})]}),e.data.description&&(0,t.jsx)("p",{className:"text-[10px] text-slate-400 leading-relaxed line-clamp-3",children:e.data.description})]})]})}function m({node:e,isSelected:s,onClick:l,onMouseDown:a,style:r}){return(0,t.jsx)("div",{className:"absolute select-none",style:{left:e.position.x,top:e.position.y,...r},onMouseDown:a,children:(()=>{let a={node:e,isSelected:s,onClick:l};switch(e.type){case"ACTOR":return(0,t.jsx)(o,{...a});case"USECASE":return(0,t.jsx)(x,{...a});case"SYSTEM":return(0,t.jsx)(h,{...a});case"NOTE":return(0,t.jsx)(u,{...a});default:return null}})()})}let p=(0,s.memo)(function({edge:e,sourceNode:l,targetNode:a,isSelected:r,onClick:n}){let{x1:d,y1:c,x2:o,y2:x}=(0,s.useMemo)(()=>{let e="USECASE"===l.type,t="USECASE"===a.type;return function(e,t,s,l){let a,r,i,n,d=e.position.x+e.size.width/2,c=e.position.y+e.size.height/2,o=t.position.x+t.size.width/2,x=t.position.y+t.size.height/2,h=Math.atan2(x-c,o-d);if(s){let t=e.size.width/2,s=e.size.height/2;a=d+t*Math.cos(h),r=c+s*Math.sin(h)}else{let t=e.size.width/2,s=e.size.height/2,l=Math.abs(Math.tan(h));t*l<=s?(a=d+(Math.cos(h)>0?t:-t),r=c+t*l*(Math.sin(h)>0?1:-1)):(a=d+s/l*(Math.cos(h)>0?1:-1),r=c+(Math.sin(h)>0?s:-s))}let u=h+Math.PI;if(l){let e=t.size.width/2,s=t.size.height/2;i=o+e*Math.cos(u),n=x+s*Math.sin(u)}else{let e=t.size.width/2,s=t.size.height/2,l=Math.abs(Math.tan(u));e*l<=s?(i=o+(Math.cos(u)>0?e:-e),n=x+e*l*(Math.sin(u)>0?1:-1)):(i=o+s/l*(Math.cos(u)>0?1:-1),n=x+(Math.sin(u)>0?s:-s))}return{x1:a,y1:r,x2:i,y2:n}}(l,a,e,t)},[l,a]),h=(d+o)/2,u=(c+x)/2;return(0,t.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none overflow-visible",style:{zIndex:r?20:1},children:[(0,t.jsxs)("defs",{children:[(0,t.jsx)("marker",{id:"arrowhead-triangle",markerWidth:"12",markerHeight:"12",refX:"10",refY:"6",orient:"auto",children:(0,t.jsx)("polygon",{points:"0 0, 12 6, 0 12",fill:r?"#60A5FA":"#64748B",stroke:r?"#60A5FA":"#64748B",strokeWidth:"1"})}),(0,t.jsx)("marker",{id:"arrowhead-open",markerWidth:"12",markerHeight:"12",refX:"10",refY:"6",orient:"auto",children:(0,t.jsx)("polyline",{points:"0 0, 12 6, 0 12",fill:"none",stroke:r?"#60A5FA":"#64748B",strokeWidth:"1.5"})})]}),(0,t.jsx)("line",{x1:d,y1:c,x2:o,y2:x,stroke:"transparent",strokeWidth:"20",className:"pointer-events-auto cursor-pointer",onClick:n}),(0,t.jsx)("line",{x1:d,y1:c,x2:o,y2:x,stroke:r?"#60A5FA":"#64748B",strokeWidth:r?2.5:1.5,markerEnd:(()=>{switch(e.type){case"GENERALIZATION":return"url(#arrowhead-triangle)";case"DEPENDENCY":case"INCLUDE":case"EXTEND":return"url(#arrowhead-open)";default:return}})(),className:"pointer-events-none transition-all duration-200",style:(()=>{switch(e.type){case"DEPENDENCY":case"INCLUDE":case"EXTEND":return{strokeDasharray:"8,4"};default:return{}}})()}),e.label&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("rect",{x:h-30,y:u-10,width:"60",height:"20",rx:"4",fill:"#0F172A",opacity:"0.9"}),(0,t.jsx)("text",{x:h,y:u+4,textAnchor:"middle",className:(0,i.cn)("text-[11px] font-medium pointer-events-auto cursor-pointer select-none",r?"fill-blue-400":"fill-slate-400"),onClick:n,children:e.label})]}),r&&(0,t.jsx)("circle",{cx:d,cy:c,r:"4",fill:"#60A5FA"}),r&&(0,t.jsx)("circle",{cx:o,cy:x,r:"4",fill:"#60A5FA"})]})}),g=(0,d.default)("mouse-pointer-2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);var b=e.i(6062),f=e.i(27612),j=e.i(54212),N=e.i(20354),y=e.i(74344);let v=(0,d.default)("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);function w(){let e=(0,s.useRef)(null),[l,a]=(0,s.useState)("select"),[r,d]=(0,s.useState)(1),[c,o]=(0,s.useState)({x:0,y:0}),[x,h]=(0,s.useState)(!1),[u,w]=(0,s.useState)({sourceId:null,sourceHandle:null}),[k,E]=(0,s.useState)({nodeId:null,startX:0,startY:0,initialX:0,initialY:0}),{nodes:C,edges:S,selectedNodeId:A,selectedEdgeId:I,addNode:M,moveNode:T,addEdge:O,selectNode:z,selectEdge:D,deleteNode:U,deleteEdge:P}=n();(0,s.useEffect)(()=>{let t=e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},s=t=>{if(t.preventDefault(),!e.current)return;let s=e.current.getBoundingClientRect(),l=window.draggedShapeType;l&&M(l,{x:(t.clientX-s.left-c.x)/r-40,y:(t.clientY-s.top-c.y)/r-30}),delete window.draggedShapeType},l=e.current;if(l)return l.addEventListener("dragover",t),l.addEventListener("drop",s),()=>{l.removeEventListener("dragover",t),l.removeEventListener("drop",s)}},[M,c,r]),(0,s.useEffect)(()=>{let e=e=>{("Delete"===e.key||"Backspace"===e.key)&&(A?U(A):I&&P(I)),"Escape"===e.key&&(z(null),D(null),w({sourceId:null,sourceHandle:null}))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[A,I,U,P,z,D]);let R=(0,s.useCallback)(t=>{"pan"===l||1===t.button||0===t.button&&t.altKey?(h(!0),E(e=>({...e,startX:t.clientX,startY:t.clientY,initialX:c.x,initialY:c.y})),t.preventDefault()):"select"===l&&t.target===e.current&&(z(null),D(null))},[l,c.x,c.y,z,D]),Y=(0,s.useCallback)(e=>{if(x){let t=e.clientX-k.startX,s=e.clientY-k.startY;o({x:k.initialX+t,y:k.initialY+s})}else if(k.nodeId){let t=(e.clientX-k.startX)/r,s=(e.clientY-k.startY)/r;T(k.nodeId,{x:k.initialX+t,y:k.initialY+s})}},[x,k,r,T]),L=(0,s.useCallback)(()=>{h(!1),E({nodeId:null,startX:0,startY:0,initialX:0,initialY:0})},[]),X=(0,s.useCallback)((e,t)=>{if("connect"===l)u.sourceId?u.sourceId!==t&&(O("ASSOCIATION",u.sourceId,t),w({sourceId:null,sourceHandle:null})):w({sourceId:t,sourceHandle:"center"}),e.stopPropagation();else if("select"===l){let s=C.find(e=>e.id===t);s&&(z(t),E({nodeId:t,startX:e.clientX,startY:e.clientY,initialX:s.position.x,initialY:s.position.y})),e.stopPropagation()}},[l,u,C,z,O]),B=()=>{d(1),o({x:0,y:0})},F=(0,s.useCallback)(e=>{if(e.ctrlKey||e.metaKey){e.preventDefault();let t=e.deltaY>0?.9:1.1;d(e=>Math.min(Math.max(e*t,.3),3))}},[]);return(0,t.jsxs)("div",{className:"relative flex-1 bg-slate-950 overflow-hidden",onMouseDown:R,onMouseMove:Y,onMouseUp:L,onMouseLeave:L,onWheel:F,children:[(0,t.jsx)("div",{ref:e,className:(0,i.cn)("absolute inset-0","pan"===l&&"cursor-grab",x&&"cursor-grabbing","connect"===l&&"cursor-crosshair"),style:{backgroundImage:`
            radial-gradient(circle at 1px 1px, rgba(71, 85, 105, 0.3) 1px, transparent 0)
          `,backgroundSize:`${20*r}px ${20*r}px`},children:(0,t.jsxs)("div",{className:"absolute inset-0 origin-top-left",style:{transform:`translate(${c.x}px, ${c.y}px) scale(${r})`},children:[S.map(e=>{let s=C.find(t=>t.id===e.sourceId),l=C.find(t=>t.id===e.targetId);return s&&l?(0,t.jsx)(p,{edge:e,sourceNode:s,targetNode:l,isSelected:I===e.id,onClick:()=>{D(e.id),z(null)}},e.id):null}),C.map(e=>(0,t.jsx)(m,{node:e,isSelected:A===e.id,onClick:()=>{"select"===l&&(z(e.id),D(null))},onMouseDown:t=>X(t,e.id)},e.id))]})}),(0,t.jsxs)("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col bg-slate-900/95 border border-slate-800 rounded-xl p-1.5 shadow-lg",children:[(0,t.jsx)("button",{onClick:()=>a("select"),className:(0,i.cn)("p-2.5 rounded-lg transition-all","select"===l?"bg-blue-500 text-white":"text-slate-400 hover:text-white hover:bg-white/5"),title:"Select (V)",children:(0,t.jsx)(g,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>a("pan"),className:(0,i.cn)("p-2.5 rounded-lg transition-all","pan"===l?"bg-blue-500 text-white":"text-slate-400 hover:text-white hover:bg-white/5"),title:"Pan (H)",children:(0,t.jsx)(v,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{a("connect"),w({sourceId:null,sourceHandle:null})},className:(0,i.cn)("p-2.5 rounded-lg transition-all","connect"===l?"bg-blue-500 text-white":"text-slate-400 hover:text-white hover:bg-white/5"),title:"Connect (C)",children:(0,t.jsx)(b.Move,{className:"w-4 h-4"})})]}),(A||I)&&(0,t.jsx)("button",{onClick:()=>{A&&U(A),I&&P(I)},className:"p-2.5 bg-red-500/10 border border-red-500/30 text-red-400 rounded-xl hover:bg-red-500/20 transition-all shadow-lg",title:"Delete (Del)",children:(0,t.jsx)(f.Trash2,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"absolute bottom-4 left-4 flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center bg-slate-900/95 border border-slate-800 rounded-xl p-1 shadow-lg",children:[(0,t.jsx)("button",{onClick:()=>d(e=>Math.max(e/1.2,.3)),className:"p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:(0,t.jsx)(N.ZoomOut,{className:"w-4 h-4"})}),(0,t.jsxs)("button",{onClick:B,className:"px-3 py-1.5 text-xs font-medium text-slate-300 hover:text-white transition-colors min-w-[60px]",children:[Math.round(100*r),"%"]}),(0,t.jsx)("button",{onClick:()=>d(e=>Math.min(1.2*e,3)),className:"p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:(0,t.jsx)(j.ZoomIn,{className:"w-4 h-4"})})]}),(0,t.jsx)("button",{onClick:B,className:"p-2 bg-slate-900/95 border border-slate-800 text-slate-400 hover:text-white hover:bg-white/5 rounded-xl transition-all shadow-lg",title:"Fit to view",children:(0,t.jsx)(y.Maximize,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:["connect"===l&&(0,t.jsx)("div",{className:"px-3 py-1.5 bg-blue-500/10 border border-blue-500/30 rounded-lg text-xs text-blue-400",children:u.sourceId?"Click target element":"Click source element"}),(0,t.jsxs)("div",{className:"px-3 py-1.5 bg-slate-900/95 border border-slate-800 rounded-lg text-xs text-slate-400",children:[C.length," nodes · ",S.length," edges"]})]}),"connect"===l&&u.sourceId&&(0,t.jsx)("div",{className:"absolute bottom-4 right-4",children:(0,t.jsx)("button",{onClick:()=>w({sourceId:null,sourceHandle:null}),className:"px-3 py-1.5 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs text-slate-300 transition-colors",children:"Cancel connection"})})]})}let k=(0,d.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),E=(0,d.default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var C=e.i(52044);let S=(0,d.default)("mouse-pointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]),A=(0,d.default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var I=e.i(75558);let M=(0,d.default)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);function T({type:e,icon:s,label:l,onDragStart:a}){return(0,t.jsxs)("div",{draggable:!0,onDragStart:t=>{t.dataTransfer.effectAllowed="copy",a(e)},className:(0,i.cn)("flex flex-col items-center gap-2 p-3 rounded-xl cursor-grab active:cursor-grabbing","bg-slate-800/50 hover:bg-slate-700/50 border border-slate-700/50 hover:border-slate-600/50","transition-all duration-200 group"),children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-900/50 flex items-center justify-center group-hover:scale-110 transition-transform",children:s}),(0,t.jsx)("span",{className:"text-[10px] text-slate-400 font-medium",children:l})]})}function O({icon:e,label:s}){return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 p-3 rounded-xl bg-slate-800/30 border border-slate-800/50",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-900/50 flex items-center justify-center",children:e}),(0,t.jsx)("span",{className:"text-[10px] text-slate-500 font-medium",children:s})]})}function z({onDragStart:e}){return(0,t.jsxs)("div",{className:"w-full h-full bg-slate-900/95 flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-slate-800",children:[(0,t.jsxs)("h2",{className:"text-sm font-semibold text-slate-200 flex items-center gap-2",children:[(0,t.jsx)(S,{className:"w-4 h-4 text-blue-400"}),"Elements"]}),(0,t.jsx)("p",{className:"text-[10px] text-slate-500 mt-1",children:"Drag to add elements"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h3",{className:"text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Nodes"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(T,{type:"ACTOR",icon:(0,t.jsx)(k,{className:"w-5 h-5 text-blue-400"}),label:"Actor",onDragStart:e}),(0,t.jsx)(T,{type:"USECASE",icon:(0,t.jsx)(E,{className:"w-5 h-5 text-emerald-400"}),label:"Use Case",onDragStart:e}),(0,t.jsx)(T,{type:"SYSTEM",icon:(0,t.jsx)(C.Square,{className:"w-5 h-5 text-amber-400"}),label:"System",onDragStart:e}),(0,t.jsx)(T,{type:"NOTE",icon:(0,t.jsx)(c,{className:"w-5 h-5 text-purple-400"}),label:"Note",onDragStart:e})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h3",{className:"text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Relationships"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O,{type:"ASSOCIATION",icon:(0,t.jsx)(A,{className:"w-5 h-5 text-slate-400"}),label:"Association"}),(0,t.jsx)(O,{type:"INCLUDE",icon:(0,t.jsx)(I.ArrowUp,{className:"w-5 h-5 text-slate-400 rotate-45"}),label:"«include»"}),(0,t.jsx)(O,{type:"EXTEND",icon:(0,t.jsx)(I.ArrowUp,{className:"w-5 h-5 text-slate-400 -rotate-45"}),label:"«extend»"}),(0,t.jsx)(O,{type:"GENERALIZATION",icon:(0,t.jsx)(M,{className:"w-5 h-5 text-slate-400"}),label:"Generalization"})]}),(0,t.jsx)("p",{className:"text-[10px] text-slate-500 italic",children:"Use Connect mode to create relationships"})]}),(0,t.jsxs)("div",{className:"p-3 rounded-xl bg-blue-500/5 border border-blue-500/10",children:[(0,t.jsx)("h4",{className:"text-xs font-medium text-blue-400 mb-2",children:"Quick Tips"}),(0,t.jsxs)("ul",{className:"text-[10px] text-slate-400 space-y-1",children:[(0,t.jsx)("li",{children:"• Drag elements to canvas"}),(0,t.jsx)("li",{children:"• Double-click to edit"}),(0,t.jsx)("li",{children:"• Press Delete to remove"}),(0,t.jsx)("li",{children:"• Use handles to connect"})]})]})]})]})}let D=(0,d.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var U=e.i(84765);function P(){let{nodes:e,edges:s,selectedNodeId:l,selectedEdgeId:a,updateNode:d,updateEdge:o,deleteNode:x,deleteEdge:h}=n(),u=e.find(e=>e.id===l),m=s.find(e=>e.id===a);return u||m?u?(0,t.jsxs)("div",{className:"w-full h-full bg-slate-900/95 flex flex-col",children:[(0,t.jsx)("div",{className:"p-4 border-b border-slate-800",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["ACTOR"===u.type&&(0,t.jsx)(k,{className:"w-4 h-4 text-blue-400"}),"USECASE"===u.type&&(0,t.jsx)(E,{className:"w-4 h-4 text-emerald-400"}),"SYSTEM"===u.type&&(0,t.jsx)(C.Square,{className:"w-4 h-4 text-amber-400"}),"NOTE"===u.type&&(0,t.jsx)(c,{className:"w-4 h-4 text-purple-400"}),(0,t.jsxs)("h2",{className:"text-sm font-semibold text-slate-200",children:["ACTOR"===u.type&&"Actor","USECASE"===u.type&&"Use Case","SYSTEM"===u.type&&"System","NOTE"===u.type&&"Note"]})]}),(0,t.jsx)("button",{onClick:()=>x(u.id),className:"p-1.5 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete",children:(0,t.jsx)(f.Trash2,{className:"w-4 h-4"})})]})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400",children:"Name"}),(0,t.jsx)("input",{type:"text",value:u.data.name,onChange:e=>d(u.id,{name:e.target.value}),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400",children:"Description"}),(0,t.jsx)("textarea",{value:u.data.description||"",onChange:e=>d(u.id,{description:e.target.value}),rows:3,placeholder:"Add a description...",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors resize-none"})]}),"USECASE"===u.type&&(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400",children:"Stereotype"}),(0,t.jsx)("input",{type:"text",value:u.data.stereotype||"",onChange:e=>d(u.id,{stereotype:e.target.value}),placeholder:"e.g., abstract",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"})]}),"SYSTEM"!==u.type&&(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400",children:"Color"}),(0,t.jsx)("div",{className:"grid grid-cols-6 gap-1.5",children:r.USECASE_COLORS.map(e=>(0,t.jsx)("button",{onClick:()=>d(u.id,{color:e}),className:(0,i.cn)("w-8 h-8 rounded-lg transition-all",u.data.color===e?"ring-2 ring-white ring-offset-2 ring-offset-slate-900 scale-110":"hover:scale-105"),style:{backgroundColor:e},title:e},e))})]}),(0,t.jsxs)("div",{className:"pt-4 border-t border-slate-800",children:[(0,t.jsx)("h3",{className:"text-xs font-medium text-slate-500 uppercase tracking-wider mb-3",children:"Position & Size"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[10px] text-slate-500",children:"X"}),(0,t.jsx)("div",{className:"px-3 py-1.5 bg-slate-800/50 rounded-lg text-sm text-slate-400",children:Math.round(u.position.x)})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[10px] text-slate-500",children:"Y"}),(0,t.jsx)("div",{className:"px-3 py-1.5 bg-slate-800/50 rounded-lg text-sm text-slate-400",children:Math.round(u.position.y)})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[10px] text-slate-500",children:"Width"}),(0,t.jsx)("div",{className:"px-3 py-1.5 bg-slate-800/50 rounded-lg text-sm text-slate-400",children:u.size.width})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-[10px] text-slate-500",children:"Height"}),(0,t.jsx)("div",{className:"px-3 py-1.5 bg-slate-800/50 rounded-lg text-sm text-slate-400",children:u.size.height})]})]})]})]})]}):m?(0,t.jsxs)("div",{className:"w-full h-full bg-slate-900/95 flex flex-col",children:[(0,t.jsx)("div",{className:"p-4 border-b border-slate-800",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(D,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("h2",{className:"text-sm font-semibold text-slate-200",children:"Relationship"})]}),(0,t.jsx)("button",{onClick:()=>h(m.id),className:"p-1.5 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete",children:(0,t.jsx)(f.Trash2,{className:"w-4 h-4"})})]})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400",children:"Type"}),(0,t.jsx)("select",{value:m.type,onChange:e=>o(m.id,{type:e.target.value}),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",children:[{value:"ASSOCIATION",label:"Association"},{value:"INCLUDE",label:"«include»"},{value:"EXTEND",label:"«extend»"},{value:"GENERALIZATION",label:"Generalization"},{value:"DEPENDENCY",label:"Dependency"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-400",children:"Label"}),(0,t.jsx)("input",{type:"text",value:m.label||"",onChange:e=>o(m.id,{label:e.target.value}),placeholder:"Add a label...",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"})]}),(0,t.jsxs)("div",{className:"pt-4 border-t border-slate-800",children:[(0,t.jsx)("h3",{className:"text-xs font-medium text-slate-500 uppercase tracking-wider mb-3",children:"Connected Elements"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-800/50 rounded-lg",children:[(0,t.jsx)("span",{className:"text-[10px] text-slate-500 w-12",children:"Source"}),(0,t.jsx)("span",{className:"text-sm text-slate-300 truncate",children:e.find(e=>e.id===m.sourceId)?.data.name||"Unknown"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-800/50 rounded-lg",children:[(0,t.jsx)("span",{className:"text-[10px] text-slate-500 w-12",children:"Target"}),(0,t.jsx)("span",{className:"text-sm text-slate-300 truncate",children:e.find(e=>e.id===m.targetId)?.data.name||"Unknown"})]})]})]})]})]}):null:(0,t.jsxs)("div",{className:"w-full h-full bg-slate-900/95 flex flex-col",children:[(0,t.jsx)("div",{className:"p-4 border-b border-slate-800",children:(0,t.jsx)("h2",{className:"text-sm font-semibold text-slate-200",children:"Properties"})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-500 p-6",children:[(0,t.jsx)(U.Settings2,{className:"w-12 h-12 mb-4 opacity-30"}),(0,t.jsx)("p",{className:"text-sm text-center",children:"Select an element to edit its properties"})]})]})}var R=e.i(37129),Y=e.i(79067),L=e.i(46932),X=e.i(88653),B=e.i(37727),F=e.i(23012),H=e.i(35745),W=e.i(7233),$=e.i(39616),q=e.i(40160);let J=(0,d.default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function G(){let{nodes:e,edges:l,exportToJSON:a,importFromJSON:r}=n(),{leftPanelOpen:d,rightPanelOpen:c,toggleLeftPanel:o,toggleRightPanel:x,closeLeftPanel:h,closeRightPanel:u,isMobile:m}=(0,Y.usePanelState)({storageKey:"usecase-panels",defaultLeftPanel:!0,defaultRightPanel:!0}),p=(0,s.useCallback)(()=>{let e=new Blob([a()],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.download="usecase-diagram.json",s.href=t,s.click(),URL.revokeObjectURL(t)},[a]),g=(0,s.useCallback)(e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=e=>{try{let t=e.target?.result;r(t)}catch(e){alert("Invalid JSON file")}},e.readAsText(t)}e.target.value=""},[r]),b=(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0",children:(0,t.jsx)(k,{className:"w-5 h-5 text-blue-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-slate-200",children:"Actors"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Represent users or external systems that interact with your system."})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0",children:(0,t.jsx)(W.Plus,{className:"w-5 h-5 text-emerald-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-slate-200",children:"Use Cases"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Ovals representing actions or functionality provided by the system."})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0",children:(0,t.jsx)($.Settings,{className:"w-5 h-5 text-amber-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-slate-200",children:"System Boundary"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Rectangle that defines the scope of your system."})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0",children:(0,t.jsx)(J,{className:"w-5 h-5 text-purple-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-slate-200",children:"Relationships"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Connect actors to use cases with associations, or use cases with «include» and «extend»."})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0",children:(0,t.jsx)(q.Download,{className:"w-5 h-5 text-cyan-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-slate-200",children:"Export"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Save your diagram as JSON to share or edit later."})]})]})]});return(0,t.jsxs)("div",{className:"flex flex-col h-screen bg-slate-950 overflow-hidden",children:[(0,t.jsx)(R.default,{title:"Use Case Designer",subtitle:"UML Use Case Diagram Tool",onExportJSON:p,onImport:g,stats:[{label:"Actors",value:e.filter(e=>"ACTOR"===e.type).length},{label:"Use Cases",value:e.filter(e=>"USECASE"===e.type).length},{label:"Relations",value:l.length}],helpContent:b,leftPanelOpen:d,rightPanelOpen:c,onToggleLeftPanel:o,onToggleRightPanel:x,showLeftPanelToggle:!0,showRightPanelToggle:!0}),(0,t.jsxs)("div",{className:"flex flex-1 overflow-hidden relative",children:[(0,t.jsx)(X.AnimatePresence,{children:d&&(0,t.jsxs)(t.Fragment,{children:[m&&(0,t.jsx)(L.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-30",onClick:h}),(0,t.jsxs)(L.motion.div,{initial:{x:"-100%",opacity:.5},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:.5},transition:{type:"spring",damping:30,stiffness:300},className:(0,i.cn)("fixed left-0 top-14 bottom-0 z-40","w-[280px] sm:w-[320px]","bg-slate-900/95 backdrop-blur-sm border-r border-slate-800"),children:[(0,t.jsxs)("div",{className:"lg:hidden flex items-center justify-between p-4 border-b border-slate-800",children:[(0,t.jsx)("h2",{className:"font-semibold text-slate-200",children:"Elements"}),(0,t.jsx)("button",{onClick:h,className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-white/10 transition-colors",children:(0,t.jsx)(B.X,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"h-full overflow-hidden",children:(0,t.jsx)(z,{onDragStart:e=>{window.draggedShapeType=e}})})]})]})}),(0,t.jsx)("div",{className:(0,i.cn)("flex-1 relative transition-all duration-300",d&&!m&&"ml-[280px] lg:ml-[320px]",c&&!m&&"mr-[320px]"),children:(0,t.jsx)(w,{})}),(0,t.jsx)(X.AnimatePresence,{children:c&&(0,t.jsxs)(t.Fragment,{children:[m&&(0,t.jsx)(L.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-30",onClick:u}),(0,t.jsxs)(L.motion.div,{initial:{x:"100%",opacity:.5},animate:{x:0,opacity:1},exit:{x:"100%",opacity:.5},transition:{type:"spring",damping:30,stiffness:300},className:(0,i.cn)("fixed right-0 top-14 bottom-0 z-40","w-full sm:w-[400px] lg:w-[320px]","bg-slate-900/95 backdrop-blur-sm border-l border-slate-800"),children:[(0,t.jsxs)("div",{className:"lg:hidden flex items-center justify-between p-4 border-b border-slate-800",children:[(0,t.jsx)("h2",{className:"font-semibold text-slate-200",children:"Properties"}),(0,t.jsx)("button",{onClick:u,className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-white/10 transition-colors",children:(0,t.jsx)(B.X,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"h-full overflow-hidden",children:(0,t.jsx)(P,{})})]})]})}),(0,t.jsx)(X.AnimatePresence,{children:!d&&!m&&(0,t.jsx)(L.motion.button,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},onClick:o,className:"fixed left-4 top-[72px] z-30 p-2.5 rounded-xl bg-slate-800/90 border border-slate-700 shadow-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors",title:"Open Elements Panel",children:(0,t.jsx)(F.PanelLeft,{className:"w-5 h-5"})})}),(0,t.jsx)(X.AnimatePresence,{children:!c&&(0,t.jsx)(L.motion.button,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},onClick:x,className:"fixed right-4 top-[72px] z-30 p-2.5 rounded-xl bg-slate-800/90 border border-slate-700 shadow-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors",title:"Open Properties Panel",children:(0,t.jsx)(H.PanelRight,{className:"w-5 h-5"})})})]})]})}e.s(["default",()=>G],80522)}]);