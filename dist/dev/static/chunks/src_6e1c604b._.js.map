{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/types/usecase.ts"],"sourcesContent":["// Types for Use Case Diagram\n\nexport type UseCaseNodeType = 'ACTOR' | 'USECASE' | 'SYSTEM' | 'NOTE';\n\nexport interface Position {\n  x: number;\n  y: number;\n}\n\nexport interface Size {\n  width: number;\n  height: number;\n}\n\nexport interface UseCaseNode {\n  id: string;\n  type: UseCaseNodeType;\n  position: Position;\n  size: Size;\n  data: {\n    name: string;\n    description?: string;\n    color?: string;\n    stereotype?: string;\n  };\n}\n\nexport type UseCaseEdgeType = 'ASSOCIATION' | 'INCLUDE' | 'EXTEND' | 'GENERALIZATION' | 'DEPENDENCY';\n\nexport interface UseCaseEdge {\n  id: string;\n  type: UseCaseEdgeType;\n  sourceId: string;\n  targetId: string;\n  label?: string;\n  style?: {\n    color?: string;\n    dashed?: boolean;\n  };\n}\n\nexport interface UseCaseState {\n  nodes: UseCaseNode[];\n  edges: UseCaseEdge[];\n  selectedNodeId: string | null;\n  selectedEdgeId: string | null;\n}\n\nexport const USECASE_COLORS = [\n  '#3B82F6', // Blue\n  '#10B981', // Emerald\n  '#F59E0B', // Amber\n  '#EF4444', // Red\n  '#8B5CF6', // Violet\n  '#EC4899', // Pink\n  '#06B6D4', // Cyan\n  '#84CC16', // Lime\n  '#F97316', // Orange\n  '#6366F1', // Indigo\n  '#14B8A6', // Teal\n  '#A855F7', // Purple\n];\n\nexport const DEFAULT_ACTOR_NAMES = [\n  'User',\n  'Admin',\n  'Customer',\n  'System',\n  'Manager',\n  'Guest',\n];\n\nexport const DEFAULT_USECASE_NAMES = [\n  'Login',\n  'Register',\n  'View Profile',\n  'Edit Profile',\n  'Delete Account',\n  'Search',\n  'Add Item',\n  'Update Item',\n  'Delete Item',\n  'View Reports',\n];\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;;;;AAgDtB,MAAM,iBAAiB;IAC5B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,sBAAsB;IACjC;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,wBAAwB;IACnC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport function generateId(): string {\n  return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n}\n\nexport function generateTableName(existingTables: { name: string }[]): string {\n  let counter = 1;\n  let name = `Table_${counter}`;\n  \n  while (existingTables.some(t => t.name === name)) {\n    counter++;\n    name = `Table_${counter}`;\n  }\n  \n  return name;\n}\n\nexport function generateColumnName(existingColumns: { name: string }[]): string {\n  let counter = 1;\n  let name = `column_${counter}`;\n  \n  while (existingColumns.some(c => c.name === name)) {\n    counter++;\n    name = `column_${counter}`;\n  }\n  \n  return name;\n}\n\nexport function toSnakeCase(str: string): string {\n  return str\n    .replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`)\n    .replace(/^_/, '');\n}\n\nexport function toPascalCase(str: string): string {\n  return str\n    .replace(/[_\\s]+(.)?/g, (_, char) => (char ? char.toUpperCase() : ''))\n    .replace(/^./, char => char.toUpperCase());\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB;AAEO,SAAS;IACd,OAAO,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG,MAAM,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG;AAC/F;AAEO,SAAS,kBAAkB,cAAkC;IAClE,IAAI,UAAU;IACd,IAAI,OAAO,CAAC,MAAM,EAAE,SAAS;IAE7B,MAAO,eAAe,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,MAAO;QAChD;QACA,OAAO,CAAC,MAAM,EAAE,SAAS;IAC3B;IAEA,OAAO;AACT;AAEO,SAAS,mBAAmB,eAAmC;IACpE,IAAI,UAAU;IACd,IAAI,OAAO,CAAC,OAAO,EAAE,SAAS;IAE9B,MAAO,gBAAgB,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,MAAO;QACjD;QACA,OAAO,CAAC,OAAO,EAAE,SAAS;IAC5B;IAEA,OAAO;AACT;AAEO,SAAS,YAAY,GAAW;IACrC,OAAO,IACJ,OAAO,CAAC,UAAU,CAAA,SAAU,CAAC,CAAC,EAAE,OAAO,WAAW,IAAI,EACtD,OAAO,CAAC,MAAM;AACnB;AAEO,SAAS,aAAa,GAAW;IACtC,OAAO,IACJ,OAAO,CAAC,eAAe,CAAC,GAAG,OAAU,OAAO,KAAK,WAAW,KAAK,IACjE,OAAO,CAAC,MAAM,CAAA,OAAQ,KAAK,WAAW;AAC3C"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/store/usecaseStore.ts"],"sourcesContent":["'use client';\n\nimport { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport type { \n  UseCaseNode, \n  UseCaseEdge, \n  UseCaseNodeType, \n  UseCaseEdgeType \n} from '@/types/usecase';\nimport { USECASE_COLORS } from '@/types/usecase';\nimport { generateId } from '@/lib/utils';\n\ninterface UseCaseStore {\n  nodes: UseCaseNode[];\n  edges: UseCaseEdge[];\n  selectedNodeId: string | null;\n  selectedEdgeId: string | null;\n  \n  // Node actions\n  addNode: (type: UseCaseNodeType, position: { x: number; y: number }) => string;\n  updateNode: (id: string, updates: Partial<UseCaseNode['data']>) => void;\n  moveNode: (id: string, position: { x: number; y: number }) => void;\n  resizeNode: (id: string, size: { width: number; height: number }) => void;\n  deleteNode: (id: string) => void;\n  \n  // Edge actions\n  addEdge: (type: UseCaseEdgeType, sourceId: string, targetId: string, label?: string) => string;\n  updateEdge: (id: string, updates: Partial<UseCaseEdge>) => void;\n  deleteEdge: (id: string) => void;\n  \n  // Selection\n  selectNode: (id: string | null) => void;\n  selectEdge: (id: string | null) => void;\n  \n  // Import/Export\n  exportToJSON: () => string;\n  importFromJSON: (json: string) => void;\n  \n  // Clear\n  clearAll: () => void;\n}\n\nconst getDefaultNodeName = (type: UseCaseNodeType, existingNodes: UseCaseNode[]): string => {\n  const count = existingNodes.filter(n => n.type === type).length + 1;\n  switch (type) {\n    case 'ACTOR':\n      return `Actor ${count}`;\n    case 'USECASE':\n      return `Use Case ${count}`;\n    case 'SYSTEM':\n      return `System ${count}`;\n    case 'NOTE':\n      return `Note ${count}`;\n    default:\n      return `Node ${count}`;\n  }\n};\n\nconst getDefaultNodeSize = (type: UseCaseNodeType): { width: number; height: number } => {\n  switch (type) {\n    case 'ACTOR':\n      return { width: 80, height: 100 };\n    case 'USECASE':\n      return { width: 160, height: 60 };\n    case 'SYSTEM':\n      return { width: 300, height: 400 };\n    case 'NOTE':\n      return { width: 200, height: 100 };\n    default:\n      return { width: 100, height: 100 };\n  }\n};\n\nexport const useUseCaseStore = create<UseCaseStore>()(\n  persist(\n    (set, get) => ({\n      nodes: [],\n      edges: [],\n      selectedNodeId: null,\n      selectedEdgeId: null,\n\n      addNode: (type, position) => {\n        const id = generateId();\n        const newNode: UseCaseNode = {\n          id,\n          type,\n          position,\n          size: getDefaultNodeSize(type),\n          data: {\n            name: getDefaultNodeName(type, get().nodes),\n            color: USECASE_COLORS[Math.floor(Math.random() * USECASE_COLORS.length)],\n          },\n        };\n        set((state) => ({\n          nodes: [...state.nodes, newNode],\n          selectedNodeId: id,\n          selectedEdgeId: null,\n        }));\n        return id;\n      },\n\n      updateNode: (id, updates) => {\n        set((state) => ({\n          nodes: state.nodes.map((node) =>\n            node.id === id ? { ...node, data: { ...node.data, ...updates } } : node\n          ),\n        }));\n      },\n\n      moveNode: (id, position) => {\n        set((state) => ({\n          nodes: state.nodes.map((node) =>\n            node.id === id ? { ...node, position } : node\n          ),\n        }));\n      },\n\n      resizeNode: (id, size) => {\n        set((state) => ({\n          nodes: state.nodes.map((node) =>\n            node.id === id ? { ...node, size } : node\n          ),\n        }));\n      },\n\n      deleteNode: (id) => {\n        set((state) => ({\n          nodes: state.nodes.filter((node) => node.id !== id),\n          edges: state.edges.filter((edge) => edge.sourceId !== id && edge.targetId !== id),\n          selectedNodeId: state.selectedNodeId === id ? null : state.selectedNodeId,\n        }));\n      },\n\n      addEdge: (type, sourceId, targetId, label) => {\n        const id = generateId();\n        \n        // Determine default label based on type\n        let defaultLabel = label;\n        if (!defaultLabel) {\n          switch (type) {\n            case 'INCLUDE':\n              defaultLabel = '«include»';\n              break;\n            case 'EXTEND':\n              defaultLabel = '«extend»';\n              break;\n            case 'GENERALIZATION':\n              defaultLabel = '';\n              break;\n          }\n        }\n\n        const newEdge: UseCaseEdge = {\n          id,\n          type,\n          sourceId,\n          targetId,\n          label: defaultLabel,\n        };\n        set((state) => ({\n          edges: [...state.edges, newEdge],\n          selectedEdgeId: id,\n          selectedNodeId: null,\n        }));\n        return id;\n      },\n\n      updateEdge: (id, updates) => {\n        set((state) => ({\n          edges: state.edges.map((edge) =>\n            edge.id === id ? { ...edge, ...updates } : edge\n          ),\n        }));\n      },\n\n      deleteEdge: (id) => {\n        set((state) => ({\n          edges: state.edges.filter((edge) => edge.id !== id),\n          selectedEdgeId: state.selectedEdgeId === id ? null : state.selectedEdgeId,\n        }));\n      },\n\n      selectNode: (id) => {\n        set({ selectedNodeId: id, selectedEdgeId: null });\n      },\n\n      selectEdge: (id) => {\n        set({ selectedEdgeId: id, selectedNodeId: null });\n      },\n\n      exportToJSON: () => {\n        const state = get();\n        return JSON.stringify({\n          nodes: state.nodes,\n          edges: state.edges,\n        }, null, 2);\n      },\n\n      importFromJSON: (json) => {\n        try {\n          const data = JSON.parse(json);\n          if (data.nodes && data.edges) {\n            set({\n              nodes: data.nodes,\n              edges: data.edges,\n              selectedNodeId: null,\n              selectedEdgeId: null,\n            });\n          }\n        } catch (error) {\n          console.error('Failed to import JSON:', error);\n          throw error;\n        }\n      },\n\n      clearAll: () => {\n        set({\n          nodes: [],\n          edges: [],\n          selectedNodeId: null,\n          selectedEdgeId: null,\n        });\n      },\n    }),\n    {\n      name: 'usecase-storage',\n    }\n  )\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 328, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/usecase/UseCaseNode.tsx"],"sourcesContent":["'use client';\n\nimport { memo } from 'react';\nimport { cn } from '@/lib/utils';\nimport type { UseCaseNode as UseCaseNodeType } from '@/types/usecase';\nimport { User, StickyNote } from 'lucide-react';\n\ninterface BaseNodeProps {\n  node: UseCaseNodeType;\n  isSelected: boolean;\n  onClick: () => void;\n}\n\n// Actor Node Component (Stick Figure Style)\nfunction ActorNode({ node, isSelected, onClick }: BaseNodeProps) {\n  return (\n    <div\n      onClick={onClick}\n      className={cn(\n        \"flex flex-col items-center gap-2 cursor-pointer group\",\n        isSelected && \"ring-2 ring-blue-500 ring-offset-2 ring-offset-slate-950 rounded-lg\"\n      )}\n      style={{ \n        width: node.size.width, \n        minHeight: node.size.height,\n      }}\n    >\n      {/* Stick Figure SVG */}\n      <svg\n        width=\"48\"\n        height=\"64\"\n        viewBox=\"0 0 48 64\"\n        fill=\"none\"\n        className=\"transition-transform group-hover:scale-105\"\n      >\n        {/* Head */}\n        <circle\n          cx=\"24\"\n          cy=\"8\"\n          r=\"6\"\n          stroke={node.data.color || '#94A3B8'}\n          strokeWidth=\"2\"\n          fill=\"none\"\n        />\n        {/* Body */}\n        <line\n          x1=\"24\"\n          y1=\"14\"\n          x2=\"24\"\n          y2=\"36\"\n          stroke={node.data.color || '#94A3B8'}\n          strokeWidth=\"2\"\n        />\n        {/* Arms */}\n        <line\n          x1=\"8\"\n          y1=\"22\"\n          x2=\"40\"\n          y2=\"22\"\n          stroke={node.data.color || '#94A3B8'}\n          strokeWidth=\"2\"\n        />\n        {/* Left Leg */}\n        <line\n          x1=\"24\"\n          y1=\"36\"\n          x2=\"10\"\n          y2=\"56\"\n          stroke={node.data.color || '#94A3B8'}\n          strokeWidth=\"2\"\n        />\n        {/* Right Leg */}\n        <line\n          x1=\"24\"\n          y1=\"36\"\n          x2=\"38\"\n          y2=\"56\"\n          stroke={node.data.color || '#94A3B8'}\n          strokeWidth=\"2\"\n        />\n      </svg>\n      {/* Actor Name */}\n      <div className=\"text-center px-2\">\n        <span className={cn(\n          \"text-sm font-medium text-slate-200\",\n          isSelected && \"text-blue-400\"\n        )}>\n          {node.data.name}\n        </span>\n        {node.data.stereotype && (\n          <p className=\"text-[10px] text-slate-500\">{node.data.stereotype}</p>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Use Case Node Component (Ellipse)\nfunction UseCaseNodeComponent({ node, isSelected, onClick }: BaseNodeProps) {\n  return (\n    <div\n      onClick={onClick}\n      className={cn(\n        \"relative flex items-center justify-center cursor-pointer\",\n        isSelected && \"scale-105\"\n      )}\n      style={{ \n        width: node.size.width, \n        height: node.size.height,\n      }}\n    >\n      {/* Ellipse Background */}\n      <div\n        className={cn(\n          \"absolute inset-0 rounded-full border-2 transition-all\",\n          isSelected\n            ? \"border-blue-400 bg-blue-500/10 shadow-lg shadow-blue-500/20\"\n            : \"border-slate-600 bg-slate-800/50 group-hover:border-slate-500\"\n        )}\n        style={{ borderColor: isSelected ? undefined : node.data.color }}\n      />\n      \n      {/* Text Content */}\n      <div className=\"relative z-10 text-center px-4 max-w-full\">\n        {node.data.stereotype && (\n          <p className=\"text-[10px] text-slate-500 mb-0.5\">«{node.data.stereotype}»</p>\n        )}\n        <span className={cn(\n          \"text-sm font-medium truncate block\",\n          isSelected ? \"text-blue-400\" : \"text-slate-200\"\n        )}>\n          {node.data.name}\n        </span>\n      </div>\n    </div>\n  );\n}\n\n// System Boundary Node Component (Rectangle with tab)\nfunction SystemNode({ node, isSelected, onClick }: BaseNodeProps) {\n  return (\n    <div\n      onClick={onClick}\n      className={cn(\n        \"relative cursor-pointer\",\n        isSelected && \"scale-[1.02]\"\n      )}\n      style={{ \n        width: node.size.width, \n        height: node.size.height,\n      }}\n    >\n      {/* Border */}\n      <div\n        className={cn(\n          \"absolute inset-0 rounded-lg border-2 transition-all\",\n          isSelected\n            ? \"border-blue-400 bg-blue-500/5\"\n            : \"border-amber-500/50 bg-slate-900/30\"\n        )}\n      />\n      \n      {/* Tab with system name */}\n      <div\n        className={cn(\n          \"absolute -top-3 left-4 px-3 py-1 rounded-md text-xs font-medium\",\n          isSelected\n            ? \"bg-blue-500 text-white\"\n            : \"bg-amber-500/20 text-amber-400 border border-amber-500/30\"\n        )}\n      >\n        {node.data.name}\n      </div>\n      \n      {/* Content area - could contain other elements */}\n      <div className=\"absolute inset-0 mt-4 p-4 overflow-hidden\">\n        {node.data.description && (\n          <p className=\"text-[10px] text-slate-500\">{node.data.description}</p>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Note Node Component\nfunction NoteNode({ node, isSelected, onClick }: BaseNodeProps) {\n  return (\n    <div\n      onClick={onClick}\n      className={cn(\n        \"relative cursor-pointer p-3 transition-all\",\n        isSelected && \"scale-[1.02]\"\n      )}\n      style={{ \n        width: node.size.width, \n        height: node.size.height,\n      }}\n    >\n      {/* Note background with folded corner effect */}\n      <div\n        className={cn(\n          \"absolute inset-0 rounded-lg transition-all\",\n          isSelected\n            ? \"bg-purple-500/20 border-2 border-purple-400\"\n            : \"bg-yellow-500/10 border border-yellow-500/30\"\n        )}\n        style={{\n          clipPath: 'polygon(0 0, calc(100% - 16px) 0, 100% 16px, 100% 100%, 0 100%)',\n        }}\n      />\n      \n      {/* Folded corner */}\n      <div\n        className={cn(\n          \"absolute top-0 right-0 w-4 h-4 transition-all\",\n          isSelected\n            ? \"bg-purple-400\"\n            : \"bg-yellow-500/40\"\n        )}\n        style={{\n          clipPath: 'polygon(0 0, 100% 0, 100% 100%)',\n        }}\n      />\n      \n      {/* Content */}\n      <div className=\"relative z-10 h-full overflow-hidden\">\n        <div className=\"flex items-center gap-1.5 mb-1.5\">\n          <StickyNote className=\"w-3 h-3 text-yellow-500/70\" />\n          <span className={cn(\n            \"text-xs font-medium\",\n            isSelected ? \"text-purple-400\" : \"text-yellow-500/80\"\n          )}>\n            {node.data.name}\n          </span>\n        </div>\n        {node.data.description && (\n          <p className=\"text-[10px] text-slate-400 leading-relaxed line-clamp-3\">\n            {node.data.description}\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Main UseCaseNode Component\ninterface UseCaseNodeProps {\n  node: UseCaseNodeType;\n  isSelected: boolean;\n  onClick: () => void;\n  onMouseDown?: (e: React.MouseEvent) => void;\n  style?: React.CSSProperties;\n}\n\nexport default function UseCaseNode({ \n  node, \n  isSelected, \n  onClick, \n  onMouseDown,\n  style \n}: UseCaseNodeProps) {\n  const renderNode = () => {\n    const baseProps = { node, isSelected, onClick };\n    \n    switch (node.type) {\n      case 'ACTOR':\n        return <ActorNode {...baseProps} />;\n      case 'USECASE':\n        return <UseCaseNodeComponent {...baseProps} />;\n      case 'SYSTEM':\n        return <SystemNode {...baseProps} />;\n      case 'NOTE':\n        return <NoteNode {...baseProps} />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div\n      className=\"absolute select-none\"\n      style={{\n        left: node.position.x,\n        top: node.position.y,\n        ...style,\n      }}\n      onMouseDown={onMouseDown}\n    >\n      {renderNode()}\n    </div>\n  );\n}\n\n// Export individual node types for direct use\nexport { ActorNode, UseCaseNodeComponent, SystemNode, NoteNode };\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 721, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/usecase/UseCaseEdge.tsx"],"sourcesContent":["'use client';\n\nimport { memo, useMemo } from 'react';\nimport { cn } from '@/lib/utils';\nimport type { UseCaseEdge as UseCaseEdgeType, UseCaseNode } from '@/types/usecase';\n\ninterface UseCaseEdgeProps {\n  edge: UseCaseEdgeType;\n  sourceNode: UseCaseNode;\n  targetNode: UseCaseNode;\n  isSelected: boolean;\n  onClick: () => void;\n}\n\n// Calculate intersection point between line and rectangle/ellipse\nfunction getIntersectionPoint(\n  source: UseCaseNode,\n  target: UseCaseNode,\n  isSourceEllipse: boolean,\n  isTargetEllipse: boolean\n): { x1: number; y1: number; x2: number; y2: number } {\n  const sx = source.position.x + source.size.width / 2;\n  const sy = source.position.y + source.size.height / 2;\n  const tx = target.position.x + target.size.width / 2;\n  const ty = target.position.y + target.size.height / 2;\n\n  const dx = tx - sx;\n  const dy = ty - sy;\n  const angle = Math.atan2(dy, dx);\n\n  // Source point\n  let x1: number, y1: number;\n  if (isSourceEllipse) {\n    // Ellipse intersection\n    const a = source.size.width / 2;\n    const b = source.size.height / 2;\n    x1 = sx + a * Math.cos(angle);\n    y1 = sy + b * Math.sin(angle);\n  } else {\n    // Rectangle intersection\n    const hw = source.size.width / 2;\n    const hh = source.size.height / 2;\n    const absAngle = Math.abs(angle);\n    const tanAngle = Math.abs(Math.tan(angle));\n    \n    if (hw * tanAngle <= hh) {\n      // Intersects with left or right side\n      x1 = sx + (Math.cos(angle) > 0 ? hw : -hw);\n      y1 = sy + hw * tanAngle * (Math.sin(angle) > 0 ? 1 : -1);\n    } else {\n      // Intersects with top or bottom side\n      x1 = sx + hh / tanAngle * (Math.cos(angle) > 0 ? 1 : -1);\n      y1 = sy + (Math.sin(angle) > 0 ? hh : -hh);\n    }\n  }\n\n  // Target point (reverse angle)\n  const reverseAngle = angle + Math.PI;\n  let x2: number, y2: number;\n  if (isTargetEllipse) {\n    const a = target.size.width / 2;\n    const b = target.size.height / 2;\n    x2 = tx + a * Math.cos(reverseAngle);\n    y2 = ty + b * Math.sin(reverseAngle);\n  } else {\n    const hw = target.size.width / 2;\n    const hh = target.size.height / 2;\n    const tanAngle = Math.abs(Math.tan(reverseAngle));\n    \n    if (hw * tanAngle <= hh) {\n      x2 = tx + (Math.cos(reverseAngle) > 0 ? hw : -hw);\n      y2 = ty + hw * tanAngle * (Math.sin(reverseAngle) > 0 ? 1 : -1);\n    } else {\n      x2 = tx + hh / tanAngle * (Math.cos(reverseAngle) > 0 ? 1 : -1);\n      y2 = ty + (Math.sin(reverseAngle) > 0 ? hh : -hh);\n    }\n  }\n\n  return { x1, y1, x2, y2 };\n}\n\nfunction UseCaseEdge({ edge, sourceNode, targetNode, isSelected, onClick }: UseCaseEdgeProps) {\n  const points = useMemo(() => {\n    const isSourceEllipse = sourceNode.type === 'USECASE';\n    const isTargetEllipse = targetNode.type === 'USECASE';\n    return getIntersectionPoint(sourceNode, targetNode, isSourceEllipse, isTargetEllipse);\n  }, [sourceNode, targetNode]);\n\n  const { x1, y1, x2, y2 } = points;\n  const midX = (x1 + x2) / 2;\n  const midY = (y1 + y2) / 2;\n\n  // Arrow marker based on edge type\n  const getMarkerEnd = () => {\n    switch (edge.type) {\n      case 'GENERALIZATION':\n        return 'url(#arrowhead-triangle)';\n      case 'DEPENDENCY':\n      case 'INCLUDE':\n      case 'EXTEND':\n        return 'url(#arrowhead-open)';\n      default:\n        return undefined;\n    }\n  };\n\n  // Line style based on edge type\n  const getLineStyle = () => {\n    switch (edge.type) {\n      case 'DEPENDENCY':\n      case 'INCLUDE':\n      case 'EXTEND':\n        return { strokeDasharray: '8,4' };\n      default:\n        return {};\n    }\n  };\n\n  return (\n    <svg\n      className=\"absolute inset-0 w-full h-full pointer-events-none overflow-visible\"\n      style={{ zIndex: isSelected ? 20 : 1 }}\n    >\n      <defs>\n        {/* Arrowhead for generalization (filled triangle) */}\n        <marker\n          id=\"arrowhead-triangle\"\n          markerWidth=\"12\"\n          markerHeight=\"12\"\n          refX=\"10\"\n          refY=\"6\"\n          orient=\"auto\"\n        >\n          <polygon\n            points=\"0 0, 12 6, 0 12\"\n            fill={isSelected ? '#60A5FA' : '#64748B'}\n            stroke={isSelected ? '#60A5FA' : '#64748B'}\n            strokeWidth=\"1\"\n          />\n        </marker>\n        \n        {/* Open arrowhead for dependency */}\n        <marker\n          id=\"arrowhead-open\"\n          markerWidth=\"12\"\n          markerHeight=\"12\"\n          refX=\"10\"\n          refY=\"6\"\n          orient=\"auto\"\n        >\n          <polyline\n            points=\"0 0, 12 6, 0 12\"\n            fill=\"none\"\n            stroke={isSelected ? '#60A5FA' : '#64748B'}\n            strokeWidth=\"1.5\"\n          />\n        </marker>\n      </defs>\n\n      {/* Invisible wider line for easier clicking */}\n      <line\n        x1={x1}\n        y1={y1}\n        x2={x2}\n        y2={y2}\n        stroke=\"transparent\"\n        strokeWidth=\"20\"\n        className=\"pointer-events-auto cursor-pointer\"\n        onClick={onClick}\n      />\n\n      {/* Visible line */}\n      <line\n        x1={x1}\n        y1={y1}\n        x2={x2}\n        y2={y2}\n        stroke={isSelected ? '#60A5FA' : '#64748B'}\n        strokeWidth={isSelected ? 2.5 : 1.5}\n        markerEnd={getMarkerEnd()}\n        className=\"pointer-events-none transition-all duration-200\"\n        style={getLineStyle()}\n      />\n\n      {/* Label background */}\n      {edge.label && (\n        <>\n          <rect\n            x={midX - 30}\n            y={midY - 10}\n            width=\"60\"\n            height=\"20\"\n            rx=\"4\"\n            fill=\"#0F172A\"\n            opacity=\"0.9\"\n          />\n          <text\n            x={midX}\n            y={midY + 4}\n            textAnchor=\"middle\"\n            className={cn(\n              \"text-[11px] font-medium pointer-events-auto cursor-pointer select-none\",\n              isSelected ? \"fill-blue-400\" : \"fill-slate-400\"\n            )}\n            onClick={onClick}\n          >\n            {edge.label}\n          </text>\n        </>\n      )}\n\n      {/* Selection indicator */}\n      {isSelected && (\n        <circle\n          cx={x1}\n          cy={y1}\n          r=\"4\"\n          fill=\"#60A5FA\"\n        />\n      )}\n      {isSelected && (\n        <circle\n          cx={x2}\n          cy={y2}\n          r=\"4\"\n          fill=\"#60A5FA\"\n        />\n      )}\n    </svg>\n  );\n}\n\nexport default memo(UseCaseEdge);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 990, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/usecase/UseCaseCanvas.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useCallback, useEffect } from 'react';\nimport { useUseCaseStore } from '@/store/usecaseStore';\nimport UseCaseNode from './UseCaseNode';\nimport UseCaseEdge from './UseCaseEdge';\nimport type { UseCaseNodeType, UseCaseEdgeType } from '@/types/usecase';\nimport { cn } from '@/lib/utils';\nimport { \n  MousePointer2, \n  Move, \n  Trash2, \n  ZoomIn, \n  ZoomOut,\n  Maximize,\n  Hand\n} from 'lucide-react';\n\ntype CanvasMode = 'select' | 'connect' | 'pan';\ntype ConnectionState = {\n  sourceId: string | null;\n  sourceHandle: string | null;\n};\n\nexport default function UseCaseCanvas() {\n  const canvasRef = useRef<HTMLDivElement>(null);\n  const [mode, setMode] = useState<CanvasMode>('select');\n  const [scale, setScale] = useState(1);\n  const [pan, setPan] = useState({ x: 0, y: 0 });\n  const [isPanning, setIsPanning] = useState(false);\n  const [connection, setConnection] = useState<ConnectionState>({ sourceId: null, sourceHandle: null });\n  const [dragState, setDragState] = useState<{\n    nodeId: string | null;\n    startX: number;\n    startY: number;\n    initialX: number;\n    initialY: number;\n  }>({ nodeId: null, startX: 0, startY: 0, initialX: 0, initialY: 0 });\n\n  const {\n    nodes,\n    edges,\n    selectedNodeId,\n    selectedEdgeId,\n    addNode,\n    moveNode,\n    addEdge,\n    selectNode,\n    selectEdge,\n    deleteNode,\n    deleteEdge,\n  } = useUseCaseStore();\n\n  // Handle drag from shape library\n  useEffect(() => {\n    const handleDragOver = (e: DragEvent) => {\n      e.preventDefault();\n      e.dataTransfer!.dropEffect = 'copy';\n    };\n\n    const handleDrop = (e: DragEvent) => {\n      e.preventDefault();\n      if (!canvasRef.current) return;\n\n      const rect = canvasRef.current.getBoundingClientRect();\n      const type = (window as any).draggedShapeType as UseCaseNodeType;\n      \n      if (type) {\n        const x = (e.clientX - rect.left - pan.x) / scale - 40;\n        const y = (e.clientY - rect.top - pan.y) / scale - 30;\n        addNode(type, { x, y });\n      }\n      \n      delete (window as any).draggedShapeType;\n    };\n\n    const canvas = canvasRef.current;\n    if (canvas) {\n      canvas.addEventListener('dragover', handleDragOver);\n      canvas.addEventListener('drop', handleDrop);\n      return () => {\n        canvas.removeEventListener('dragover', handleDragOver);\n        canvas.removeEventListener('drop', handleDrop);\n      };\n    }\n  }, [addNode, pan, scale]);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Delete' || e.key === 'Backspace') {\n        if (selectedNodeId) {\n          deleteNode(selectedNodeId);\n        } else if (selectedEdgeId) {\n          deleteEdge(selectedEdgeId);\n        }\n      }\n      \n      if (e.key === 'Escape') {\n        selectNode(null);\n        selectEdge(null);\n        setConnection({ sourceId: null, sourceHandle: null });\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [selectedNodeId, selectedEdgeId, deleteNode, deleteEdge, selectNode, selectEdge]);\n\n  // Mouse handlers for panning\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\n    if (mode === 'pan' || (e.button === 1) || (e.button === 0 && e.altKey)) {\n      setIsPanning(true);\n      setDragState(prev => ({\n        ...prev,\n        startX: e.clientX,\n        startY: e.clientY,\n        initialX: pan.x,\n        initialY: pan.y,\n      }));\n      e.preventDefault();\n    } else if (mode === 'select' && e.target === canvasRef.current) {\n      selectNode(null);\n      selectEdge(null);\n    }\n  }, [mode, pan.x, pan.y, selectNode, selectEdge]);\n\n  const handleMouseMove = useCallback((e: React.MouseEvent) => {\n    if (isPanning) {\n      const dx = e.clientX - dragState.startX;\n      const dy = e.clientY - dragState.startY;\n      setPan({\n        x: dragState.initialX + dx,\n        y: dragState.initialY + dy,\n      });\n    } else if (dragState.nodeId) {\n      const dx = (e.clientX - dragState.startX) / scale;\n      const dy = (e.clientY - dragState.startY) / scale;\n      moveNode(dragState.nodeId, {\n        x: dragState.initialX + dx,\n        y: dragState.initialY + dy,\n      });\n    }\n  }, [isPanning, dragState, scale, moveNode]);\n\n  const handleMouseUp = useCallback(() => {\n    setIsPanning(false);\n    setDragState({ nodeId: null, startX: 0, startY: 0, initialX: 0, initialY: 0 });\n  }, []);\n\n  // Node drag handlers\n  const handleNodeMouseDown = useCallback((e: React.MouseEvent, nodeId: string) => {\n    if (mode === 'connect') {\n      // Start connection\n      if (!connection.sourceId) {\n        setConnection({ sourceId: nodeId, sourceHandle: 'center' });\n      } else if (connection.sourceId !== nodeId) {\n        // Complete connection\n        addEdge('ASSOCIATION', connection.sourceId, nodeId);\n        setConnection({ sourceId: null, sourceHandle: null });\n      }\n      e.stopPropagation();\n    } else if (mode === 'select') {\n      const node = nodes.find(n => n.id === nodeId);\n      if (node) {\n        selectNode(nodeId);\n        setDragState({\n          nodeId,\n          startX: e.clientX,\n          startY: e.clientY,\n          initialX: node.position.x,\n          initialY: node.position.y,\n        });\n      }\n      e.stopPropagation();\n    }\n  }, [mode, connection, nodes, selectNode, addEdge]);\n\n  // Zoom handlers\n  const handleZoomIn = () => setScale(s => Math.min(s * 1.2, 3));\n  const handleZoomOut = () => setScale(s => Math.max(s / 1.2, 0.3));\n  const handleZoomReset = () => {\n    setScale(1);\n    setPan({ x: 0, y: 0 });\n  };\n\n  // Wheel zoom\n  const handleWheel = useCallback((e: React.WheelEvent) => {\n    if (e.ctrlKey || e.metaKey) {\n      e.preventDefault();\n      const delta = e.deltaY > 0 ? 0.9 : 1.1;\n      setScale(s => Math.min(Math.max(s * delta, 0.3), 3));\n    }\n  }, []);\n\n  return (\n    <div \n      className=\"relative flex-1 bg-slate-950 overflow-hidden\"\n      onMouseDown={handleMouseDown}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n      onMouseLeave={handleMouseUp}\n      onWheel={handleWheel}\n    >\n      {/* Canvas Background */}\n      <div\n        ref={canvasRef}\n        className={cn(\n          \"absolute inset-0\",\n          mode === 'pan' && \"cursor-grab\",\n          isPanning && \"cursor-grabbing\",\n          mode === 'connect' && \"cursor-crosshair\"\n        )}\n        style={{\n          backgroundImage: `\n            radial-gradient(circle at 1px 1px, rgba(71, 85, 105, 0.3) 1px, transparent 0)\n          `,\n          backgroundSize: `${20 * scale}px ${20 * scale}px`,\n        }}\n      >\n        {/* Transform Container */}\n        <div\n          className=\"absolute inset-0 origin-top-left\"\n          style={{\n            transform: `translate(${pan.x}px, ${pan.y}px) scale(${scale})`,\n          }}\n        >\n          {/* Edges */}\n          {edges.map(edge => {\n            const sourceNode = nodes.find(n => n.id === edge.sourceId);\n            const targetNode = nodes.find(n => n.id === edge.targetId);\n            if (!sourceNode || !targetNode) return null;\n            \n            return (\n              <UseCaseEdge\n                key={edge.id}\n                edge={edge}\n                sourceNode={sourceNode}\n                targetNode={targetNode}\n                isSelected={selectedEdgeId === edge.id}\n                onClick={() => {\n                  selectEdge(edge.id);\n                  selectNode(null);\n                }}\n              />\n            );\n          })}\n\n          {/* Nodes */}\n          {nodes.map(node => (\n            <UseCaseNode\n              key={node.id}\n              node={node}\n              isSelected={selectedNodeId === node.id}\n              onClick={() => {\n                if (mode === 'select') {\n                  selectNode(node.id);\n                  selectEdge(null);\n                }\n              }}\n              onMouseDown={(e) => handleNodeMouseDown(e, node.id)}\n            />\n          ))}\n        </div>\n      </div>\n\n      {/* Toolbar */}\n      <div className=\"absolute top-4 left-4 flex flex-col gap-2\">\n        <div className=\"flex flex-col bg-slate-900/95 border border-slate-800 rounded-xl p-1.5 shadow-lg\">\n          <button\n            onClick={() => setMode('select')}\n            className={cn(\n              \"p-2.5 rounded-lg transition-all\",\n              mode === 'select'\n                ? \"bg-blue-500 text-white\"\n                : \"text-slate-400 hover:text-white hover:bg-white/5\"\n            )}\n            title=\"Select (V)\"\n          >\n            <MousePointer2 className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => setMode('pan')}\n            className={cn(\n              \"p-2.5 rounded-lg transition-all\",\n              mode === 'pan'\n                ? \"bg-blue-500 text-white\"\n                : \"text-slate-400 hover:text-white hover:bg-white/5\"\n            )}\n            title=\"Pan (H)\"\n          >\n            <Hand className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => {\n              setMode('connect');\n              setConnection({ sourceId: null, sourceHandle: null });\n            }}\n            className={cn(\n              \"p-2.5 rounded-lg transition-all\",\n              mode === 'connect'\n                ? \"bg-blue-500 text-white\"\n                : \"text-slate-400 hover:text-white hover:bg-white/5\"\n            )}\n            title=\"Connect (C)\"\n          >\n            <Move className=\"w-4 h-4\" />\n          </button>\n        </div>\n\n        {/* Delete button when selection */}\n        {(selectedNodeId || selectedEdgeId) && (\n          <button\n            onClick={() => {\n              if (selectedNodeId) deleteNode(selectedNodeId);\n              if (selectedEdgeId) deleteEdge(selectedEdgeId);\n            }}\n            className=\"p-2.5 bg-red-500/10 border border-red-500/30 text-red-400 rounded-xl hover:bg-red-500/20 transition-all shadow-lg\"\n            title=\"Delete (Del)\"\n          >\n            <Trash2 className=\"w-4 h-4\" />\n          </button>\n        )}\n      </div>\n\n      {/* Zoom Controls */}\n      <div className=\"absolute bottom-4 left-4 flex items-center gap-2\">\n        <div className=\"flex items-center bg-slate-900/95 border border-slate-800 rounded-xl p-1 shadow-lg\">\n          <button\n            onClick={handleZoomOut}\n            className=\"p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\n          >\n            <ZoomOut className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={handleZoomReset}\n            className=\"px-3 py-1.5 text-xs font-medium text-slate-300 hover:text-white transition-colors min-w-[60px]\"\n          >\n            {Math.round(scale * 100)}%\n          </button>\n          <button\n            onClick={handleZoomIn}\n            className=\"p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\n          >\n            <ZoomIn className=\"w-4 h-4\" />\n          </button>\n        </div>\n        <button\n          onClick={handleZoomReset}\n          className=\"p-2 bg-slate-900/95 border border-slate-800 text-slate-400 hover:text-white hover:bg-white/5 rounded-xl transition-all shadow-lg\"\n          title=\"Fit to view\"\n        >\n          <Maximize className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {/* Status indicator */}\n      <div className=\"absolute top-4 right-4 flex items-center gap-2\">\n        {mode === 'connect' && (\n          <div className=\"px-3 py-1.5 bg-blue-500/10 border border-blue-500/30 rounded-lg text-xs text-blue-400\">\n            {connection.sourceId ? 'Click target element' : 'Click source element'}\n          </div>\n        )}\n        <div className=\"px-3 py-1.5 bg-slate-900/95 border border-slate-800 rounded-lg text-xs text-slate-400\">\n          {nodes.length} nodes · {edges.length} edges\n        </div>\n      </div>\n\n      {/* Connection line preview */}\n      {mode === 'connect' && connection.sourceId && (\n        <div className=\"absolute bottom-4 right-4\">\n          <button\n            onClick={() => setConnection({ sourceId: null, sourceHandle: null })}\n            className=\"px-3 py-1.5 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs text-slate-300 transition-colors\"\n          >\n            Cancel connection\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1550, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/usecase/ShapeLibrary.tsx"],"sourcesContent":["'use client';\n\nimport { cn } from '@/lib/utils';\nimport type { UseCaseNodeType } from '@/types/usecase';\nimport { \n  User, \n  Circle, \n  Square, \n  StickyNote,\n  MousePointer,\n  Minus,\n  ArrowUp,\n  GitBranch\n} from 'lucide-react';\n\ninterface ShapeLibraryProps {\n  onDragStart: (type: UseCaseNodeType) => void;\n}\n\ninterface ShapeItemProps {\n  type: UseCaseNodeType;\n  icon: React.ReactNode;\n  label: string;\n  onDragStart: (type: UseCaseNodeType) => void;\n}\n\nfunction ShapeItem({ type, icon, label, onDragStart }: ShapeItemProps) {\n  const handleDragStart = (e: React.DragEvent) => {\n    e.dataTransfer.effectAllowed = 'copy';\n    onDragStart(type);\n  };\n\n  return (\n    <div\n      draggable\n      onDragStart={handleDragStart}\n      className={cn(\n        \"flex flex-col items-center gap-2 p-3 rounded-xl cursor-grab active:cursor-grabbing\",\n        \"bg-slate-800/50 hover:bg-slate-700/50 border border-slate-700/50 hover:border-slate-600/50\",\n        \"transition-all duration-200 group\"\n      )}\n    >\n      <div className=\"w-10 h-10 rounded-lg bg-slate-900/50 flex items-center justify-center group-hover:scale-110 transition-transform\">\n        {icon}\n      </div>\n      <span className=\"text-[10px] text-slate-400 font-medium\">{label}</span>\n    </div>\n  );\n}\n\ninterface EdgeTypeItemProps {\n  type: string;\n  icon: React.ReactNode;\n  label: string;\n}\n\nfunction EdgeTypeItem({ icon, label }: EdgeTypeItemProps) {\n  return (\n    <div className=\"flex flex-col items-center gap-2 p-3 rounded-xl bg-slate-800/30 border border-slate-800/50\">\n      <div className=\"w-10 h-10 rounded-lg bg-slate-900/50 flex items-center justify-center\">\n        {icon}\n      </div>\n      <span className=\"text-[10px] text-slate-500 font-medium\">{label}</span>\n    </div>\n  );\n}\n\nexport default function ShapeLibrary({ onDragStart }: ShapeLibraryProps) {\n  return (\n    <div className=\"w-full h-full bg-slate-900/95 flex flex-col overflow-hidden\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-slate-800\">\n        <h2 className=\"text-sm font-semibold text-slate-200 flex items-center gap-2\">\n          <MousePointer className=\"w-4 h-4 text-blue-400\" />\n          Elements\n        </h2>\n        <p className=\"text-[10px] text-slate-500 mt-1\">\n          Drag to add elements\n        </p>\n      </div>\n\n      {/* Scrollable Content */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-6\">\n        {/* Nodes Section */}\n        <div className=\"space-y-3\">\n          <h3 className=\"text-xs font-medium text-slate-500 uppercase tracking-wider\">\n            Nodes\n          </h3>\n          <div className=\"grid grid-cols-2 gap-2\">\n            <ShapeItem\n              type=\"ACTOR\"\n              icon={<User className=\"w-5 h-5 text-blue-400\" />}\n              label=\"Actor\"\n              onDragStart={onDragStart}\n            />\n            <ShapeItem\n              type=\"USECASE\"\n              icon={<Circle className=\"w-5 h-5 text-emerald-400\" />}\n              label=\"Use Case\"\n              onDragStart={onDragStart}\n            />\n            <ShapeItem\n              type=\"SYSTEM\"\n              icon={<Square className=\"w-5 h-5 text-amber-400\" />}\n              label=\"System\"\n              onDragStart={onDragStart}\n            />\n            <ShapeItem\n              type=\"NOTE\"\n              icon={<StickyNote className=\"w-5 h-5 text-purple-400\" />}\n              label=\"Note\"\n              onDragStart={onDragStart}\n            />\n          </div>\n        </div>\n\n        {/* Edge Types Reference */}\n        <div className=\"space-y-3\">\n          <h3 className=\"text-xs font-medium text-slate-500 uppercase tracking-wider\">\n            Relationships\n          </h3>\n          <div className=\"space-y-2\">\n            <EdgeTypeItem\n              type=\"ASSOCIATION\"\n              icon={<Minus className=\"w-5 h-5 text-slate-400\" />}\n              label=\"Association\"\n            />\n            <EdgeTypeItem\n              type=\"INCLUDE\"\n              icon={<ArrowUp className=\"w-5 h-5 text-slate-400 rotate-45\" />}\n              label=\"«include»\"\n            />\n            <EdgeTypeItem\n              type=\"EXTEND\"\n              icon={<ArrowUp className=\"w-5 h-5 text-slate-400 -rotate-45\" />}\n              label=\"«extend»\"\n            />\n            <EdgeTypeItem\n              type=\"GENERALIZATION\"\n              icon={<GitBranch className=\"w-5 h-5 text-slate-400\" />}\n              label=\"Generalization\"\n            />\n          </div>\n          <p className=\"text-[10px] text-slate-500 italic\">\n            Use Connect mode to create relationships\n          </p>\n        </div>\n\n        {/* Quick Tips */}\n        <div className=\"p-3 rounded-xl bg-blue-500/5 border border-blue-500/10\">\n          <h4 className=\"text-xs font-medium text-blue-400 mb-2\">Quick Tips</h4>\n          <ul className=\"text-[10px] text-slate-400 space-y-1\">\n            <li>• Drag elements to canvas</li>\n            <li>• Double-click to edit</li>\n            <li>• Press Delete to remove</li>\n            <li>• Use handles to connect</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;AA0BA,SAAS,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAkB;IACnE,MAAM,kBAAkB,CAAC;QACvB,EAAE,YAAY,CAAC,aAAa,GAAG;QAC/B,YAAY;IACd;IAEA,qBACE,6LAAC;QACC,SAAS;QACT,aAAa;QACb,WAAW,IAAA,4HAAE,EACX,sFACA,8FACA;;0BAGF,6LAAC;gBAAI,WAAU;0BACZ;;;;;;0BAEH,6LAAC;gBAAK,WAAU;0BAA0C;;;;;;;;;;;;AAGhE;KAtBS;AA8BT,SAAS,aAAa,EAAE,IAAI,EAAE,KAAK,EAAqB;IACtD,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACZ;;;;;;0BAEH,6LAAC;gBAAK,WAAU;0BAA0C;;;;;;;;;;;;AAGhE;MATS;AAWM,SAAS,aAAa,EAAE,WAAW,EAAqB;IACrE,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;;0CACZ,6LAAC,yOAAY;gCAAC,WAAU;;;;;;4BAA0B;;;;;;;kCAGpD,6LAAC;wBAAE,WAAU;kCAAkC;;;;;;;;;;;;0BAMjD,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA8D;;;;;;0CAG5E,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,MAAK;wCACL,oBAAM,6LAAC,6MAAI;4CAAC,WAAU;;;;;;wCACtB,OAAM;wCACN,aAAa;;;;;;kDAEf,6LAAC;wCACC,MAAK;wCACL,oBAAM,6LAAC,mNAAM;4CAAC,WAAU;;;;;;wCACxB,OAAM;wCACN,aAAa;;;;;;kDAEf,6LAAC;wCACC,MAAK;wCACL,oBAAM,6LAAC,mNAAM;4CAAC,WAAU;;;;;;wCACxB,OAAM;wCACN,aAAa;;;;;;kDAEf,6LAAC;wCACC,MAAK;wCACL,oBAAM,6LAAC,mOAAU;4CAAC,WAAU;;;;;;wCAC5B,OAAM;wCACN,aAAa;;;;;;;;;;;;;;;;;;kCAMnB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA8D;;;;;;0CAG5E,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,MAAK;wCACL,oBAAM,6LAAC,gNAAK;4CAAC,WAAU;;;;;;wCACvB,OAAM;;;;;;kDAER,6LAAC;wCACC,MAAK;wCACL,oBAAM,6LAAC,0NAAO;4CAAC,WAAU;;;;;;wCACzB,OAAM;;;;;;kDAER,6LAAC;wCACC,MAAK;wCACL,oBAAM,6LAAC,0NAAO;4CAAC,WAAU;;;;;;wCACzB,OAAM;;;;;;kDAER,6LAAC;wCACC,MAAK;wCACL,oBAAM,6LAAC,gOAAS;4CAAC,WAAU;;;;;;wCAC3B,OAAM;;;;;;;;;;;;0CAGV,6LAAC;gCAAE,WAAU;0CAAoC;;;;;;;;;;;;kCAMnD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAyC;;;;;;0CACvD,6LAAC;gCAAG,WAAU;;kDACZ,6LAAC;kDAAG;;;;;;kDACJ,6LAAC;kDAAG;;;;;;kDACJ,6LAAC;kDAAG;;;;;;kDACJ,6LAAC;kDAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMhB;MA9FwB"}},
    {"offset": {"line": 1934, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/usecase/PropertiesPanel.tsx"],"sourcesContent":["'use client';\n\nimport { useUseCaseStore } from '@/store/usecaseStore';\nimport { USECASE_COLORS } from '@/types/usecase';\nimport { cn } from '@/lib/utils';\nimport { \n  Trash2, \n  User, \n  Circle, \n  Square, \n  StickyNote,\n  ArrowRight,\n  Settings2\n} from 'lucide-react';\n\nexport default function PropertiesPanel() {\n  const {\n    nodes,\n    edges,\n    selectedNodeId,\n    selectedEdgeId,\n    updateNode,\n    updateEdge,\n    deleteNode,\n    deleteEdge,\n  } = useUseCaseStore();\n\n  const selectedNode = nodes.find((n) => n.id === selectedNodeId);\n  const selectedEdge = edges.find((e) => e.id === selectedEdgeId);\n\n  if (!selectedNode && !selectedEdge) {\n    return (\n      <div className=\"w-full h-full bg-slate-900/95 flex flex-col\">\n        <div className=\"p-4 border-b border-slate-800\">\n          <h2 className=\"text-sm font-semibold text-slate-200\">Properties</h2>\n        </div>\n        <div className=\"flex-1 flex flex-col items-center justify-center text-slate-500 p-6\">\n          <Settings2 className=\"w-12 h-12 mb-4 opacity-30\" />\n          <p className=\"text-sm text-center\">\n            Select an element to edit its properties\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  // Node Properties\n  if (selectedNode) {\n    return (\n      <div className=\"w-full h-full bg-slate-900/95 flex flex-col\">\n        {/* Header */}\n        <div className=\"p-4 border-b border-slate-800\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              {selectedNode.type === 'ACTOR' && <User className=\"w-4 h-4 text-blue-400\" />}\n              {selectedNode.type === 'USECASE' && <Circle className=\"w-4 h-4 text-emerald-400\" />}\n              {selectedNode.type === 'SYSTEM' && <Square className=\"w-4 h-4 text-amber-400\" />}\n              {selectedNode.type === 'NOTE' && <StickyNote className=\"w-4 h-4 text-purple-400\" />}\n              <h2 className=\"text-sm font-semibold text-slate-200\">\n                {selectedNode.type === 'ACTOR' && 'Actor'}\n                {selectedNode.type === 'USECASE' && 'Use Case'}\n                {selectedNode.type === 'SYSTEM' && 'System'}\n                {selectedNode.type === 'NOTE' && 'Note'}\n              </h2>\n            </div>\n            <button\n              onClick={() => deleteNode(selectedNode.id)}\n              className=\"p-1.5 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors\"\n              title=\"Delete\"\n            >\n              <Trash2 className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Properties */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n          {/* Name */}\n          <div className=\"space-y-1.5\">\n            <label className=\"text-xs font-medium text-slate-400\">\n              Name\n            </label>\n            <input\n              type=\"text\"\n              value={selectedNode.data.name}\n              onChange={(e) => updateNode(selectedNode.id, { name: e.target.value })}\n              className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors\"\n            />\n          </div>\n\n          {/* Description */}\n          <div className=\"space-y-1.5\">\n            <label className=\"text-xs font-medium text-slate-400\">\n              Description\n            </label>\n            <textarea\n              value={selectedNode.data.description || ''}\n              onChange={(e) => updateNode(selectedNode.id, { description: e.target.value })}\n              rows={3}\n              placeholder=\"Add a description...\"\n              className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors resize-none\"\n            />\n          </div>\n\n          {/* Stereotype (for UseCase only) */}\n          {selectedNode.type === 'USECASE' && (\n            <div className=\"space-y-1.5\">\n              <label className=\"text-xs font-medium text-slate-400\">\n                Stereotype\n              </label>\n              <input\n                type=\"text\"\n                value={selectedNode.data.stereotype || ''}\n                onChange={(e) => updateNode(selectedNode.id, { stereotype: e.target.value })}\n                placeholder=\"e.g., abstract\"\n                className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors\"\n              />\n            </div>\n          )}\n\n          {/* Color picker */}\n          {selectedNode.type !== 'SYSTEM' && (\n            <div className=\"space-y-1.5\">\n              <label className=\"text-xs font-medium text-slate-400\">\n                Color\n              </label>\n              <div className=\"grid grid-cols-6 gap-1.5\">\n                {USECASE_COLORS.map((color) => (\n                  <button\n                    key={color}\n                    onClick={() => updateNode(selectedNode.id, { color })}\n                    className={cn(\n                      \"w-8 h-8 rounded-lg transition-all\",\n                      selectedNode.data.color === color\n                        ? \"ring-2 ring-white ring-offset-2 ring-offset-slate-900 scale-110\"\n                        : \"hover:scale-105\"\n                    )}\n                    style={{ backgroundColor: color }}\n                    title={color}\n                  />\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Position info */}\n          <div className=\"pt-4 border-t border-slate-800\">\n            <h3 className=\"text-xs font-medium text-slate-500 uppercase tracking-wider mb-3\">\n              Position & Size\n            </h3>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div className=\"space-y-1\">\n                <label className=\"text-[10px] text-slate-500\">X</label>\n                <div className=\"px-3 py-1.5 bg-slate-800/50 rounded-lg text-sm text-slate-400\">\n                  {Math.round(selectedNode.position.x)}\n                </div>\n              </div>\n              <div className=\"space-y-1\">\n                <label className=\"text-[10px] text-slate-500\">Y</label>\n                <div className=\"px-3 py-1.5 bg-slate-800/50 rounded-lg text-sm text-slate-400\">\n                  {Math.round(selectedNode.position.y)}\n                </div>\n              </div>\n              <div className=\"space-y-1\">\n                <label className=\"text-[10px] text-slate-500\">Width</label>\n                <div className=\"px-3 py-1.5 bg-slate-800/50 rounded-lg text-sm text-slate-400\">\n                  {selectedNode.size.width}\n                </div>\n              </div>\n              <div className=\"space-y-1\">\n                <label className=\"text-[10px] text-slate-500\">Height</label>\n                <div className=\"px-3 py-1.5 bg-slate-800/50 rounded-lg text-sm text-slate-400\">\n                  {selectedNode.size.height}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Edge Properties\n  if (selectedEdge) {\n    const edgeTypes = [\n      { value: 'ASSOCIATION', label: 'Association' },\n      { value: 'INCLUDE', label: '«include»' },\n      { value: 'EXTEND', label: '«extend»' },\n      { value: 'GENERALIZATION', label: 'Generalization' },\n      { value: 'DEPENDENCY', label: 'Dependency' },\n    ];\n\n    return (\n      <div className=\"w-full h-full bg-slate-900/95 flex flex-col\">\n        {/* Header */}\n        <div className=\"p-4 border-b border-slate-800\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <ArrowRight className=\"w-4 h-4 text-slate-400\" />\n              <h2 className=\"text-sm font-semibold text-slate-200\">Relationship</h2>\n            </div>\n            <button\n              onClick={() => deleteEdge(selectedEdge.id)}\n              className=\"p-1.5 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors\"\n              title=\"Delete\"\n            >\n              <Trash2 className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Properties */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n          {/* Type */}\n          <div className=\"space-y-1.5\">\n            <label className=\"text-xs font-medium text-slate-400\">\n              Type\n            </label>\n            <select\n              value={selectedEdge.type}\n              onChange={(e) => updateEdge(selectedEdge.id, { type: e.target.value as any })}\n              className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors\"\n            >\n              {edgeTypes.map((type) => (\n                <option key={type.value} value={type.value}>\n                  {type.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Label */}\n          <div className=\"space-y-1.5\">\n            <label className=\"text-xs font-medium text-slate-400\">\n              Label\n            </label>\n            <input\n              type=\"text\"\n              value={selectedEdge.label || ''}\n              onChange={(e) => updateEdge(selectedEdge.id, { label: e.target.value })}\n              placeholder=\"Add a label...\"\n              className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors\"\n            />\n          </div>\n\n          {/* Connected Nodes Info */}\n          <div className=\"pt-4 border-t border-slate-800\">\n            <h3 className=\"text-xs font-medium text-slate-500 uppercase tracking-wider mb-3\">\n              Connected Elements\n            </h3>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center gap-2 px-3 py-2 bg-slate-800/50 rounded-lg\">\n                <span className=\"text-[10px] text-slate-500 w-12\">Source</span>\n                <span className=\"text-sm text-slate-300 truncate\">\n                  {nodes.find(n => n.id === selectedEdge.sourceId)?.data.name || 'Unknown'}\n                </span>\n              </div>\n              <div className=\"flex items-center gap-2 px-3 py-2 bg-slate-800/50 rounded-lg\">\n                <span className=\"text-[10px] text-slate-500 w-12\">Target</span>\n                <span className=\"text-sm text-slate-300 truncate\">\n                  {nodes.find(n => n.id === selectedEdge.targetId)?.data.name || 'Unknown'}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2625, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/usecase/index.ts"],"sourcesContent":["export { default as UseCaseCanvas } from './UseCaseCanvas';\nexport { default as UseCaseNode } from './UseCaseNode';\nexport { default as UseCaseEdge } from './UseCaseEdge';\nexport { default as ShapeLibrary } from './ShapeLibrary';\nexport { default as PropertiesPanel } from './PropertiesPanel';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 2670, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/layout/AppHeader.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { cn } from '@/lib/utils';\nimport { \n  Database, \n  Workflow,\n  Users,\n  Github, \n  HelpCircle, \n  Sparkles,\n  ChevronDown,\n  Download,\n  Upload,\n  FileCode,\n  Keyboard,\n  Settings,\n  Plus,\n  Menu,\n  X,\n  PanelLeft,\n  PanelRight,\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface AppHeaderProps {\n  onExportJSON?: () => void;\n  onExportSQL?: () => void;\n  onExportPNG?: () => void;\n  onImport?: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  stats?: { label: string; value: number }[];\n  title?: string;\n  subtitle?: string;\n  helpContent?: React.ReactNode;\n  // Panel toggle props\n  leftPanelOpen?: boolean;\n  rightPanelOpen?: boolean;\n  onToggleLeftPanel?: () => void;\n  onToggleRightPanel?: () => void;\n  showLeftPanelToggle?: boolean;\n  showRightPanelToggle?: boolean;\n}\n\nexport default function AppHeader({\n  onExportJSON,\n  onExportSQL,\n  onExportPNG,\n  onImport,\n  stats = [],\n  title = 'Designer',\n  subtitle = 'Visual Design Tool',\n  helpContent,\n  // Panel toggles\n  leftPanelOpen,\n  rightPanelOpen,\n  onToggleLeftPanel,\n  onToggleRightPanel,\n  showLeftPanelToggle,\n  showRightPanelToggle,\n}: AppHeaderProps) {\n  const [showHelp, setShowHelp] = useState(false);\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\n  const pathname = usePathname();\n\n  const isERD = pathname === '/';\n  const isFlowchart = pathname === '/flowchart';\n  const isUseCase = pathname === '/usecase';\n\n  return (\n    <>\n      <header className=\"h-14 bg-slate-900/95 backdrop-blur-sm border-b border-slate-800 flex items-center justify-between px-3 lg:px-4 shrink-0 z-50\">\n        {/* Left Section: Logo & Panel Toggles */}\n        <div className=\"flex items-center gap-2 lg:gap-4\">\n          {/* Panel Toggles (Mobile/Tablet) */}\n          {showLeftPanelToggle && onToggleLeftPanel && (\n            <button\n              onClick={onToggleLeftPanel}\n              className={cn(\n                \"lg:hidden p-2 rounded-lg transition-colors\",\n                leftPanelOpen \n                  ? \"text-blue-400 bg-blue-500/10\" \n                  : \"text-slate-400 hover:text-white hover:bg-white/5\"\n              )}\n              title=\"Toggle Sidebar\"\n            >\n              <PanelLeft className=\"w-5 h-5\" />\n            </button>\n          )}\n\n          {/* Logo */}\n          <Link href=\"/\" className=\"flex items-center gap-2 lg:gap-3\">\n            <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg shadow-blue-500/20\">\n              {isERD ? (\n                <Database className=\"w-4 h-4 text-white\" />\n              ) : isUseCase ? (\n                <Users className=\"w-4 h-4 text-white\" />\n              ) : (\n                <Workflow className=\"w-4 h-4 text-white\" />\n              )}\n            </div>\n            <div className=\"hidden sm:block\">\n              <h1 className=\"font-bold text-slate-100 text-sm\">{title}</h1>\n              <p className=\"text-[10px] text-slate-500 hidden lg:block\">{subtitle}</p>\n            </div>\n          </Link>\n\n          {/* Desktop Navigation Tabs */}\n          <div className=\"hidden md:flex items-center gap-1 p-1 bg-slate-800/50 rounded-lg border border-slate-700/50 ml-2 lg:ml-4\">\n            <Link\n              href=\"/\"\n              className={cn(\n                \"flex items-center gap-2 px-2 lg:px-3 py-1.5 rounded-md text-xs font-medium transition-all\",\n                isERD\n                  ? \"bg-blue-500 text-white\"\n                  : \"text-slate-400 hover:text-slate-200 hover:bg-white/5\"\n              )}\n            >\n              <Database className=\"w-3.5 h-3.5\" />\n              <span className=\"hidden lg:inline\">ERD</span>\n            </Link>\n            <Link\n              href=\"/flowchart\"\n              className={cn(\n                \"flex items-center gap-2 px-2 lg:px-3 py-1.5 rounded-md text-xs font-medium transition-all\",\n                isFlowchart\n                  ? \"bg-blue-500 text-white\"\n                  : \"text-slate-400 hover:text-slate-200 hover:bg-white/5\"\n              )}\n            >\n              <Workflow className=\"w-3.5 h-3.5\" />\n              <span className=\"hidden lg:inline\">Flowchart</span>\n            </Link>\n            <Link\n              href=\"/usecase\"\n              className={cn(\n                \"flex items-center gap-2 px-2 lg:px-3 py-1.5 rounded-md text-xs font-medium transition-all\",\n                isUseCase\n                  ? \"bg-blue-500 text-white\"\n                  : \"text-slate-400 hover:text-slate-200 hover:bg-white/5\"\n              )}\n            >\n              <Users className=\"w-3.5 h-3.5\" />\n              <span className=\"hidden lg:inline\">Use Case</span>\n            </Link>\n          </div>\n        </div>\n\n        {/* Center: Stats */}\n        {stats.length > 0 && (\n          <div className=\"hidden lg:flex items-center gap-3\">\n            {stats.map((stat, index) => (\n              <div \n                key={index}\n                className=\"flex items-center gap-2 px-3 py-1.5 bg-slate-800/50 rounded-lg border border-slate-700/50\"\n              >\n                <span className=\"text-xs text-slate-400\">{stat.label}:</span>\n                <span className=\"text-xs font-semibold text-slate-200\">{stat.value}</span>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Right: Actions */}\n        <div className=\"flex items-center gap-1 lg:gap-2\">\n          {/* Desktop Export/Import */}\n          <div className=\"hidden sm:flex items-center gap-2\">\n            {(onExportJSON || onExportPNG) && (\n              <div className=\"relative group\">\n                <button className=\"flex items-center gap-2 px-3 py-1.5 text-slate-300 hover:text-white hover:bg-white/5 rounded-lg text-sm transition-colors\">\n                  <Download className=\"w-4 h-4\" />\n                  <span className=\"hidden xl:inline\">Export</span>\n                  <ChevronDown className=\"w-3 h-3\" />\n                </button>\n                \n                <div className=\"absolute right-0 top-full mt-1 w-40 bg-slate-800 rounded-xl border border-slate-700 shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50\">\n                  {onExportJSON && (\n                    <button\n                      onClick={onExportJSON}\n                      className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors first:rounded-t-xl\"\n                    >\n                      <Download className=\"w-4 h-4\" />\n                      Export JSON\n                    </button>\n                  )}\n                  {onExportSQL && (\n                    <button\n                      onClick={onExportSQL}\n                      className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors\"\n                    >\n                      <FileCode className=\"w-4 h-4\" />\n                      Export SQL\n                    </button>\n                  )}\n                  {onExportPNG && (\n                    <button\n                      onClick={onExportPNG}\n                      className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors last:rounded-b-xl\"\n                    >\n                      <Download className=\"w-4 h-4\" />\n                      Export PNG\n                    </button>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {onImport && (\n              <label className=\"flex items-center gap-2 px-3 py-1.5 text-slate-300 hover:text-white hover:bg-white/5 rounded-lg text-sm cursor-pointer transition-colors\">\n                <Upload className=\"w-4 h-4\" />\n                <span className=\"hidden xl:inline\">Import</span>\n                <input\n                  type=\"file\"\n                  accept=\".json\"\n                  onChange={onImport}\n                  className=\"hidden\"\n                />\n              </label>\n            )}\n\n            <div className=\"hidden md:block w-px h-6 bg-slate-700 mx-1\" />\n          </div>\n\n          {/* Right Panel Toggle */}\n          {showRightPanelToggle && onToggleRightPanel && (\n            <button\n              onClick={onToggleRightPanel}\n              className={cn(\n                \"p-2 rounded-lg transition-colors\",\n                rightPanelOpen \n                  ? \"text-blue-400 bg-blue-500/10\" \n                  : \"text-slate-400 hover:text-white hover:bg-white/5\"\n              )}\n              title=\"Toggle Properties Panel\"\n            >\n              <PanelRight className=\"w-5 h-5\" />\n            </button>\n          )}\n\n          {/* Help */}\n          <button\n            onClick={() => setShowHelp(!showHelp)}\n            className={cn(\n              \"p-2 rounded-lg transition-colors hidden sm:flex\",\n              showHelp ? \"text-blue-400 bg-blue-500/10\" : \"text-slate-400 hover:text-white hover:bg-white/5\"\n            )}\n          >\n            <HelpCircle className=\"w-4 h-4\" />\n          </button>\n\n          {/* GitHub */}\n          <a\n            href=\"https://github.com\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"hidden sm:flex p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\n          >\n            <Github className=\"w-4 h-4\" />\n          </a>\n\n          {/* Mobile Menu Button */}\n          <button\n            onClick={() => setShowMobileMenu(!showMobileMenu)}\n            className=\"md:hidden p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\n          >\n            {showMobileMenu ? <X className=\"w-5 h-5\" /> : <Menu className=\"w-5 h-5\" />}\n          </button>\n        </div>\n      </header>\n\n      {/* Mobile Menu */}\n      <AnimatePresence>\n        {showMobileMenu && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"md:hidden bg-slate-900 border-b border-slate-800 z-40\"\n          >\n            <nav className=\"p-4 space-y-2\">\n              <Link\n                href=\"/\"\n                onClick={() => setShowMobileMenu(false)}\n                className={cn(\n                  \"flex items-center gap-3 px-4 py-3 rounded-xl transition-all\",\n                  isERD\n                    ? \"bg-blue-500 text-white\"\n                    : \"text-slate-300 hover:bg-white/5\"\n                )}\n              >\n                <Database className=\"w-5 h-5\" />\n                <span className=\"font-medium\">ERD Designer</span>\n              </Link>\n              <Link\n                href=\"/flowchart\"\n                onClick={() => setShowMobileMenu(false)}\n                className={cn(\n                  \"flex items-center gap-3 px-4 py-3 rounded-xl transition-all\",\n                  isFlowchart\n                    ? \"bg-blue-500 text-white\"\n                    : \"text-slate-300 hover:bg-white/5\"\n                )}\n              >\n                <Workflow className=\"w-5 h-5\" />\n                <span className=\"font-medium\">Flowchart</span>\n              </Link>\n              <Link\n                href=\"/usecase\"\n                onClick={() => setShowMobileMenu(false)}\n                className={cn(\n                  \"flex items-center gap-3 px-4 py-3 rounded-xl transition-all\",\n                  isUseCase\n                    ? \"bg-blue-500 text-white\"\n                    : \"text-slate-300 hover:bg-white/5\"\n                )}\n              >\n                <Users className=\"w-5 h-5\" />\n                <span className=\"font-medium\">Use Case</span>\n              </Link>\n            </nav>\n\n            {/* Mobile Actions */}\n            <div className=\"px-4 pb-4 space-y-2\">\n              {stats.length > 0 && (\n                <div className=\"flex flex-wrap gap-2 pb-2\">\n                  {stats.map((stat, index) => (\n                    <div \n                      key={index}\n                      className=\"flex items-center gap-1.5 px-2.5 py-1 bg-slate-800 rounded-lg\"\n                    >\n                      <span className=\"text-[10px] text-slate-400\">{stat.label}:</span>\n                      <span className=\"text-xs font-medium text-slate-200\">{stat.value}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              <div className=\"flex gap-2\">\n                {onExportJSON && (\n                  <button\n                    onClick={() => {\n                      onExportJSON();\n                      setShowMobileMenu(false);\n                    }}\n                    className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-slate-800 text-slate-300 rounded-lg text-sm\"\n                  >\n                    <Download className=\"w-4 h-4\" />\n                    Export\n                  </button>\n                )}\n                {onImport && (\n                  <label className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-slate-800 text-slate-300 rounded-lg text-sm cursor-pointer\">\n                    <Upload className=\"w-4 h-4\" />\n                    Import\n                    <input\n                      type=\"file\"\n                      accept=\".json\"\n                      onChange={(e) => {\n                        onImport(e);\n                        setShowMobileMenu(false);\n                      }}\n                      className=\"hidden\"\n                    />\n                  </label>\n                )}\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Help Modal */}\n      <AnimatePresence>\n        {showHelp && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n            onClick={() => setShowHelp(false)}\n          >\n            <motion.div\n              initial={{ scale: 0.95, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.95, opacity: 0 }}\n              className=\"bg-slate-900 rounded-2xl border border-slate-700 shadow-2xl max-w-lg w-full max-h-[80vh] overflow-auto\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"p-6\">\n                <div className=\"flex items-center gap-3 mb-6\">\n                  <div className=\"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center\">\n                    <Sparkles className=\"w-5 h-5 text-blue-400\" />\n                  </div>\n                  <div>\n                    <h2 className=\"text-lg font-semibold text-white\">Quick Guide</h2>\n                    <p className=\"text-sm text-slate-400\">Learn how to use {title}</p>\n                  </div>\n                </div>\n\n                {helpContent || (\n                  <div className=\"space-y-4\">\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                        <Plus className=\"w-5 h-5 text-blue-400\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-medium text-slate-200\">Create Elements</h3>\n                        <p className=\"text-sm text-slate-400\">Add new elements to your diagram using the toolbar or sidebar.</p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                        <Settings className=\"w-5 h-5 text-green-400\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-medium text-slate-200\">Edit Properties</h3>\n                        <p className=\"text-sm text-slate-400\">Click on any element to edit its properties in the sidebar.</p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                        <Download className=\"w-5 h-5 text-amber-400\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-medium text-slate-200\">Export</h3>\n                        <p className=\"text-sm text-slate-400\">Save your work as JSON or export as an image.</p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"mt-6 pt-4 border-t border-slate-800\">\n                  <h4 className=\"text-xs font-medium text-slate-500 uppercase tracking-wider mb-3\">Keyboard Shortcuts</h4>\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm\">\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Delete</span>\n                      <span className=\"text-slate-200\">Remove selected</span>\n                    </div>\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Space + Drag</span>\n                      <span className=\"text-slate-200\">Pan canvas</span>\n                    </div>\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Scroll</span>\n                      <span className=\"text-slate-200\">Zoom in/out</span>\n                    </div>\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Click</span>\n                      <span className=\"text-slate-200\">Select element</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"px-6 py-4 bg-slate-800/50 border-t border-slate-800\">\n                <button\n                  onClick={() => setShowHelp(false)}\n                  className=\"w-full py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors\"\n                >\n                  Got it!\n                </button>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3794, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/hooks/usePanelState.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\n\ninterface PanelState {\n  leftPanel: boolean;\n  rightPanel: boolean;\n}\n\ninterface UsePanelStateOptions {\n  storageKey?: string;\n  defaultLeftPanel?: boolean;\n  defaultRightPanel?: boolean;\n  mobileBreakpoint?: number;\n}\n\nexport function usePanelState(options: UsePanelStateOptions = {}) {\n  const {\n    storageKey,\n    defaultLeftPanel = true,\n    defaultRightPanel = true,\n    mobileBreakpoint = 768,\n  } = options;\n\n  const [panels, setPanels] = useState<PanelState>({\n    leftPanel: defaultLeftPanel,\n    rightPanel: defaultRightPanel,\n  });\n\n  const [isMobile, setIsMobile] = useState(false);\n  const [isTablet, setIsTablet] = useState(false);\n\n  // Check screen size\n  useEffect(() => {\n    const checkScreenSize = () => {\n      const width = window.innerWidth;\n      const mobile = width < mobileBreakpoint;\n      const tablet = width >= mobileBreakpoint && width < 1024;\n      \n      setIsMobile(mobile);\n      setIsTablet(tablet);\n\n      // Auto-hide panels on mobile\n      if (mobile) {\n        setPanels({ leftPanel: false, rightPanel: false });\n      } else if (tablet) {\n        // On tablet, show only one panel by default\n        setPanels({ leftPanel: true, rightPanel: false });\n      }\n    };\n\n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    return () => window.removeEventListener('resize', checkScreenSize);\n  }, [mobileBreakpoint]);\n\n  // Load from storage\n  useEffect(() => {\n    if (storageKey && typeof window !== 'undefined') {\n      try {\n        const saved = localStorage.getItem(storageKey);\n        if (saved) {\n          const parsed = JSON.parse(saved);\n          setPanels(parsed);\n        }\n      } catch (e) {\n        console.warn('Failed to load panel state:', e);\n      }\n    }\n  }, [storageKey]);\n\n  // Save to storage\n  useEffect(() => {\n    if (storageKey && typeof window !== 'undefined') {\n      try {\n        localStorage.setItem(storageKey, JSON.stringify(panels));\n      } catch (e) {\n        console.warn('Failed to save panel state:', e);\n      }\n    }\n  }, [panels, storageKey]);\n\n  const toggleLeftPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, leftPanel: !prev.leftPanel }));\n  }, []);\n\n  const toggleRightPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, rightPanel: !prev.rightPanel }));\n  }, []);\n\n  const openLeftPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, leftPanel: true }));\n  }, []);\n\n  const openRightPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, rightPanel: true }));\n  }, []);\n\n  const closeLeftPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, leftPanel: false }));\n  }, []);\n\n  const closeRightPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, rightPanel: false }));\n  }, []);\n\n  const closeAllPanels = useCallback(() => {\n    setPanels({ leftPanel: false, rightPanel: false });\n  }, []);\n\n  const openAllPanels = useCallback(() => {\n    setPanels({ leftPanel: true, rightPanel: true });\n  }, []);\n\n  return {\n    // State\n    leftPanelOpen: panels.leftPanel,\n    rightPanelOpen: panels.rightPanel,\n    isMobile,\n    isTablet,\n    isDesktop: !isMobile && !isTablet,\n    \n    // Actions\n    toggleLeftPanel,\n    toggleRightPanel,\n    openLeftPanel,\n    openRightPanel,\n    closeLeftPanel,\n    closeRightPanel,\n    closeAllPanels,\n    openAllPanels,\n    \n    // Responsive helpers\n    anyPanelOpen: panels.leftPanel || panels.rightPanel,\n    bothPanelsOpen: panels.leftPanel && panels.rightPanel,\n  };\n}\n\nexport default usePanelState;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3986, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/app/usecase/page.tsx"],"sourcesContent":["'use client';\n\nimport { UseCaseCanvas, ShapeLibrary, PropertiesPanel } from '@/components/usecase';\nimport AppHeader from '@/components/layout/AppHeader';\nimport { useUseCaseStore } from '@/store/usecaseStore';\nimport { type UseCaseNodeType } from '@/types/usecase';\nimport { useCallback } from 'react';\nimport { usePanelState } from '@/hooks/usePanelState';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { cn } from '@/lib/utils';\nimport { X, PanelLeft, PanelRight, User, Plus, Settings, Download, Share2 } from 'lucide-react';\n\nexport default function UseCasePage() {\n  const { \n    nodes, \n    edges, \n    exportToJSON, \n    importFromJSON \n  } = useUseCaseStore();\n\n  const {\n    leftPanelOpen,\n    rightPanelOpen,\n    toggleLeftPanel,\n    toggleRightPanel,\n    closeLeftPanel,\n    closeRightPanel,\n    isMobile,\n  } = usePanelState({\n    storageKey: 'usecase-panels',\n    defaultLeftPanel: true,\n    defaultRightPanel: true,\n  });\n\n  const handleExportJSON = useCallback(() => {\n    const json = exportToJSON();\n    const blob = new Blob([json], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.download = 'usecase-diagram.json';\n    link.href = url;\n    link.click();\n    URL.revokeObjectURL(url);\n  }, [exportToJSON]);\n\n  const handleImport = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        try {\n          const json = event.target?.result as string;\n          importFromJSON(json);\n        } catch (error) {\n          alert('Invalid JSON file');\n        }\n      };\n      reader.readAsText(file);\n    }\n    e.target.value = '';\n  }, [importFromJSON]);\n\n  const handleDragStart = (type: UseCaseNodeType) => {\n    if (typeof window !== 'undefined') {\n      (window as any).draggedShapeType = type;\n    }\n  };\n\n  // Custom help content for Use Case Diagram\n  const helpContent = (\n    <div className=\"space-y-4\">\n      <div className=\"flex gap-4\">\n        <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n          <User className=\"w-5 h-5 text-blue-400\" />\n        </div>\n        <div>\n          <h3 className=\"font-medium text-slate-200\">Actors</h3>\n          <p className=\"text-sm text-slate-400\">Represent users or external systems that interact with your system.</p>\n        </div>\n      </div>\n\n      <div className=\"flex gap-4\">\n        <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n          <Plus className=\"w-5 h-5 text-emerald-400\" />\n        </div>\n        <div>\n          <h3 className=\"font-medium text-slate-200\">Use Cases</h3>\n          <p className=\"text-sm text-slate-400\">Ovals representing actions or functionality provided by the system.</p>\n        </div>\n      </div>\n\n      <div className=\"flex gap-4\">\n        <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n          <Settings className=\"w-5 h-5 text-amber-400\" />\n        </div>\n        <div>\n          <h3 className=\"font-medium text-slate-200\">System Boundary</h3>\n          <p className=\"text-sm text-slate-400\">Rectangle that defines the scope of your system.</p>\n        </div>\n      </div>\n\n      <div className=\"flex gap-4\">\n        <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n          <Share2 className=\"w-5 h-5 text-purple-400\" />\n        </div>\n        <div>\n          <h3 className=\"font-medium text-slate-200\">Relationships</h3>\n          <p className=\"text-sm text-slate-400\">Connect actors to use cases with associations, or use cases with «include» and «extend».</p>\n        </div>\n      </div>\n\n      <div className=\"flex gap-4\">\n        <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n          <Download className=\"w-5 h-5 text-cyan-400\" />\n        </div>\n        <div>\n          <h3 className=\"font-medium text-slate-200\">Export</h3>\n          <p className=\"text-sm text-slate-400\">Save your diagram as JSON to share or edit later.</p>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"flex flex-col h-screen bg-slate-950 overflow-hidden\">\n      <AppHeader\n        title=\"Use Case Designer\"\n        subtitle=\"UML Use Case Diagram Tool\"\n        onExportJSON={handleExportJSON}\n        onImport={handleImport}\n        stats={[\n          { label: 'Actors', value: nodes.filter(n => n.type === 'ACTOR').length },\n          { label: 'Use Cases', value: nodes.filter(n => n.type === 'USECASE').length },\n          { label: 'Relations', value: edges.length },\n        ]}\n        helpContent={helpContent}\n        leftPanelOpen={leftPanelOpen}\n        rightPanelOpen={rightPanelOpen}\n        onToggleLeftPanel={toggleLeftPanel}\n        onToggleRightPanel={toggleRightPanel}\n        showLeftPanelToggle={true}\n        showRightPanelToggle={true}\n      />\n      \n      <div className=\"flex flex-1 overflow-hidden relative\">\n        {/* Left Panel - Shape Library */}\n        <AnimatePresence>\n          {leftPanelOpen && (\n            <>\n              {/* Mobile Overlay */}\n              {isMobile && (\n                <motion.div\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  exit={{ opacity: 0 }}\n                  className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-30\"\n                  onClick={closeLeftPanel}\n                />\n              )}\n              \n              {/* Panel */}\n              <motion.div\n                initial={{ x: '-100%', opacity: 0.5 }}\n                animate={{ x: 0, opacity: 1 }}\n                exit={{ x: '-100%', opacity: 0.5 }}\n                transition={{ type: 'spring', damping: 30, stiffness: 300 }}\n                className={cn(\n                  \"fixed left-0 top-14 bottom-0 z-40\",\n                  \"w-[280px] sm:w-[320px]\",\n                  \"bg-slate-900/95 backdrop-blur-sm border-r border-slate-800\"\n                )}\n              >\n                {/* Mobile Close Button */}\n                <div className=\"lg:hidden flex items-center justify-between p-4 border-b border-slate-800\">\n                  <h2 className=\"font-semibold text-slate-200\">Elements</h2>\n                  <button\n                    onClick={closeLeftPanel}\n                    className=\"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-white/10 transition-colors\"\n                  >\n                    <X className=\"w-5 h-5\" />\n                  </button>\n                </div>\n                \n                <div className=\"h-full overflow-hidden\">\n                  <ShapeLibrary onDragStart={handleDragStart} />\n                </div>\n              </motion.div>\n            </>\n          )}\n        </AnimatePresence>\n\n        {/* Main Canvas Area */}\n        <div className={cn(\n          \"flex-1 relative transition-all duration-300\",\n          leftPanelOpen && !isMobile && \"ml-[280px] lg:ml-[320px]\",\n          rightPanelOpen && !isMobile && \"mr-[320px]\"\n        )}>\n          <UseCaseCanvas />\n        </div>\n\n        {/* Right Panel - Properties */}\n        <AnimatePresence>\n          {rightPanelOpen && (\n            <>\n              {/* Mobile Overlay */}\n              {isMobile && (\n                <motion.div\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  exit={{ opacity: 0 }}\n                  className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-30\"\n                  onClick={closeRightPanel}\n                />\n              )}\n              \n              {/* Panel */}\n              <motion.div\n                initial={{ x: '100%', opacity: 0.5 }}\n                animate={{ x: 0, opacity: 1 }}\n                exit={{ x: '100%', opacity: 0.5 }}\n                transition={{ type: 'spring', damping: 30, stiffness: 300 }}\n                className={cn(\n                  \"fixed right-0 top-14 bottom-0 z-40\",\n                  \"w-full sm:w-[400px] lg:w-[320px]\",\n                  \"bg-slate-900/95 backdrop-blur-sm border-l border-slate-800\"\n                )}\n              >\n                {/* Mobile Close Button */}\n                <div className=\"lg:hidden flex items-center justify-between p-4 border-b border-slate-800\">\n                  <h2 className=\"font-semibold text-slate-200\">Properties</h2>\n                  <button\n                    onClick={closeRightPanel}\n                    className=\"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-white/10 transition-colors\"\n                  >\n                    <X className=\"w-5 h-5\" />\n                  </button>\n                </div>\n                \n                <div className=\"h-full overflow-hidden\">\n                  <PropertiesPanel />\n                </div>\n              </motion.div>\n            </>\n          )}\n        </AnimatePresence>\n\n        {/* Floating Toggle Buttons (when panels are closed) */}\n        <AnimatePresence>\n          {!leftPanelOpen && !isMobile && (\n            <motion.button\n              initial={{ scale: 0, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0, opacity: 0 }}\n              onClick={toggleLeftPanel}\n              className=\"fixed left-4 top-[72px] z-30 p-2.5 rounded-xl bg-slate-800/90 border border-slate-700 shadow-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors\"\n              title=\"Open Elements Panel\"\n            >\n              <PanelLeft className=\"w-5 h-5\" />\n            </motion.button>\n          )}\n        </AnimatePresence>\n\n        <AnimatePresence>\n          {!rightPanelOpen && (\n            <motion.button\n              initial={{ scale: 0, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0, opacity: 0 }}\n              onClick={toggleRightPanel}\n              className=\"fixed right-4 top-[72px] z-30 p-2.5 rounded-xl bg-slate-800/90 border border-slate-700 shadow-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors\"\n              title=\"Open Properties Panel\"\n            >\n              <PanelRight className=\"w-5 h-5\" />\n            </motion.button>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}