{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/types/flowchart.ts"],"sourcesContent":["// Types for Flowchart Designer\n\nexport type FlowchartNodeType = \n  | 'process' \n  | 'decision' \n  | 'start' \n  | 'end' \n  | 'input'\n  | 'output'\n  | 'document'\n  | 'database'\n  | 'predefined'\n  | 'delay'\n  | 'stored-data'\n  | 'manual-input'\n  | 'display'\n  | 'preparation'\n  | 'connector'\n  | 'off-page';\n\nexport type FlowchartEdgeType = 'smooth' | 'straight' | 'step' | 'bezier';\n\nexport interface FlowchartNode {\n  id: string;\n  type: FlowchartNodeType;\n  position: {\n    x: number;\n    y: number;\n  };\n  size: {\n    width: number;\n    height: number;\n  };\n  data: {\n    label: string;\n    description?: string;\n    color?: string;\n    borderColor?: string;\n    textColor?: string;\n    fontSize?: number;\n    borderWidth?: number;\n    borderStyle?: 'solid' | 'dashed' | 'dotted';\n    opacity?: number;\n    icon?: string;\n  };\n  rotation?: number;\n  zIndex?: number;\n}\n\nexport interface FlowchartEdge {\n  id: string;\n  source: string;\n  target: string;\n  type: FlowchartEdgeType;\n  label?: string;\n  data?: {\n    color?: string;\n    strokeWidth?: number;\n    strokeStyle?: 'solid' | 'dashed' | 'dotted';\n    startArrow?: boolean;\n    endArrow?: boolean;\n    labelBgColor?: string;\n    labelTextColor?: string;\n  };\n  sourceHandle?: string;\n  targetHandle?: string;\n}\n\nexport interface FlowchartState {\n  nodes: FlowchartNode[];\n  edges: FlowchartEdge[];\n  selectedNodeId: string | null;\n  selectedEdgeId: string | null;\n  viewport: {\n    x: number;\n    y: number;\n    zoom: number;\n  };\n}\n\n// Shape definitions with icons and descriptions\nexport const FLOWCHART_SHAPES: {\n  type: FlowchartNodeType;\n  label: string;\n  icon: string;\n  description: string;\n  defaultSize: { width: number; height: number };\n  defaultColor: string;\n}[] = [\n  {\n    type: 'start',\n    label: 'Start/End',\n    icon: 'Circle',\n    description: 'Terminal point - Start or end of process',\n    defaultSize: { width: 120, height: 60 },\n    defaultColor: '#10B981',\n  },\n  {\n    type: 'process',\n    label: 'Process',\n    icon: 'Square',\n    description: 'Action or operation step',\n    defaultSize: { width: 140, height: 80 },\n    defaultColor: '#3B82F6',\n  },\n  {\n    type: 'decision',\n    label: 'Decision',\n    icon: 'Diamond',\n    description: 'Conditional branch (Yes/No)',\n    defaultSize: { width: 140, height: 100 },\n    defaultColor: '#F59E0B',\n  },\n  {\n    type: 'input',\n    label: 'Input',\n    icon: 'Parallelogram',\n    description: 'Data input operation',\n    defaultSize: { width: 140, height: 70 },\n    defaultColor: '#8B5CF6',\n  },\n  {\n    type: 'output',\n    label: 'Output',\n    icon: 'Parallelogram',\n    description: 'Data output operation',\n    defaultSize: { width: 140, height: 70 },\n    defaultColor: '#EC4899',\n  },\n  {\n    type: 'document',\n    label: 'Document',\n    icon: 'FileText',\n    description: 'Document or report',\n    defaultSize: { width: 140, height: 90 },\n    defaultColor: '#06B6D4',\n  },\n  {\n    type: 'database',\n    label: 'Database',\n    icon: 'Database',\n    description: 'Database storage',\n    defaultSize: { width: 140, height: 90 },\n    defaultColor: '#6366F1',\n  },\n  {\n    type: 'predefined',\n    label: 'Predefined',\n    icon: 'RectangleHorizontal',\n    description: 'Predefined process (subroutine)',\n    defaultSize: { width: 140, height: 80 },\n    defaultColor: '#84CC16',\n  },\n  {\n    type: 'delay',\n    label: 'Delay',\n    icon: 'Clock',\n    description: 'Wait or delay operation',\n    defaultSize: { width: 120, height: 70 },\n    defaultColor: '#F97316',\n  },\n  {\n    type: 'stored-data',\n    label: 'Stored Data',\n    icon: 'HardDrive',\n    description: 'Data storage',\n    defaultSize: { width: 140, height: 90 },\n    defaultColor: '#14B8A6',\n  },\n  {\n    type: 'manual-input',\n    label: 'Manual Input',\n    icon: 'Keyboard',\n    description: 'Manual data entry',\n    defaultSize: { width: 140, height: 80 },\n    defaultColor: '#A855F7',\n  },\n  {\n    type: 'display',\n    label: 'Display',\n    icon: 'Monitor',\n    description: 'Display output',\n    defaultSize: { width: 140, height: 80 },\n    defaultColor: '#E11D48',\n  },\n  {\n    type: 'preparation',\n    label: 'Preparation',\n    icon: 'Hexagon',\n    description: 'Initialization or preparation',\n    defaultSize: { width: 140, height: 90 },\n    defaultColor: '#0EA5E9',\n  },\n  {\n    type: 'connector',\n    label: 'Connector',\n    icon: 'CircleDot',\n    description: 'Connection point within page',\n    defaultSize: { width: 50, height: 50 },\n    defaultColor: '#64748B',\n  },\n  {\n    type: 'off-page',\n    label: 'Off-Page',\n    icon: 'ArrowRightToLine',\n    description: 'Connection to another page',\n    defaultSize: { width: 100, height: 60 },\n    defaultColor: '#94A3B8',\n  },\n];\n\nexport const FLOWCHART_COLORS = [\n  '#3B82F6', // Blue\n  '#10B981', // Emerald\n  '#F59E0B', // Amber\n  '#EF4444', // Red\n  '#8B5CF6', // Violet\n  '#EC4899', // Pink\n  '#06B6D4', // Cyan\n  '#84CC16', // Lime\n  '#F97316', // Orange\n  '#6366F1', // Indigo\n  '#14B8A6', // Teal\n  '#A855F7', // Purple\n  '#E11D48', // Rose\n  '#0EA5E9', // Sky\n  '#64748B', // Slate\n];\n\nexport const DEFAULT_FLOWCHART_NODE: Omit<FlowchartNode, 'id' | 'type' | 'position'> = {\n  size: { width: 140, height: 80 },\n  data: {\n    label: 'New Node',\n    color: '#3B82F6',\n    borderColor: '#1D4ED8',\n    textColor: '#FFFFFF',\n    fontSize: 14,\n    borderWidth: 2,\n    borderStyle: 'solid',\n    opacity: 1,\n  },\n  rotation: 0,\n  zIndex: 0,\n};\n\nexport const DEFAULT_FLOWCHART_EDGE: Omit<FlowchartEdge, 'id' | 'source' | 'target'> = {\n  type: 'smooth',\n  label: '',\n  data: {\n    color: '#64748B',\n    strokeWidth: 2,\n    strokeStyle: 'solid',\n    startArrow: false,\n    endArrow: true,\n    labelBgColor: '#1E293B',\n    labelTextColor: '#F1F5F9',\n  },\n};\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;;;;;;AAiFxB,MAAM,mBAOP;IACJ;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAI;QACvC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAI,QAAQ;QAAG;QACrC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;CACD;AAEM,MAAM,mBAAmB;IAC9B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,yBAA0E;IACrF,MAAM;QAAE,OAAO;QAAK,QAAQ;IAAG;IAC/B,MAAM;QACJ,OAAO;QACP,OAAO;QACP,aAAa;QACb,WAAW;QACX,UAAU;QACV,aAAa;QACb,aAAa;QACb,SAAS;IACX;IACA,UAAU;IACV,QAAQ;AACV;AAEO,MAAM,yBAA0E;IACrF,MAAM;IACN,OAAO;IACP,MAAM;QACJ,OAAO;QACP,aAAa;QACb,aAAa;QACb,YAAY;QACZ,UAAU;QACV,cAAc;QACd,gBAAgB;IAClB;AACF"}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/types/usecase.ts"],"sourcesContent":["// Types for Use Case Diagram\n\nexport type UseCaseNodeType = 'ACTOR' | 'USECASE' | 'SYSTEM' | 'NOTE';\n\nexport interface Position {\n  x: number;\n  y: number;\n}\n\nexport interface Size {\n  width: number;\n  height: number;\n}\n\nexport interface UseCaseNode {\n  id: string;\n  type: UseCaseNodeType;\n  position: Position;\n  size: Size;\n  data: {\n    name: string;\n    description?: string;\n    color?: string;\n    stereotype?: string;\n  };\n}\n\nexport type UseCaseEdgeType = 'ASSOCIATION' | 'INCLUDE' | 'EXTEND' | 'GENERALIZATION' | 'DEPENDENCY';\n\nexport interface UseCaseEdge {\n  id: string;\n  type: UseCaseEdgeType;\n  sourceId: string;\n  targetId: string;\n  label?: string;\n  style?: {\n    color?: string;\n    dashed?: boolean;\n  };\n}\n\nexport interface UseCaseState {\n  nodes: UseCaseNode[];\n  edges: UseCaseEdge[];\n  selectedNodeId: string | null;\n  selectedEdgeId: string | null;\n}\n\nexport const USECASE_COLORS = [\n  '#3B82F6', // Blue\n  '#10B981', // Emerald\n  '#F59E0B', // Amber\n  '#EF4444', // Red\n  '#8B5CF6', // Violet\n  '#EC4899', // Pink\n  '#06B6D4', // Cyan\n  '#84CC16', // Lime\n  '#F97316', // Orange\n  '#6366F1', // Indigo\n  '#14B8A6', // Teal\n  '#A855F7', // Purple\n];\n\nexport const DEFAULT_ACTOR_NAMES = [\n  'User',\n  'Admin',\n  'Customer',\n  'System',\n  'Manager',\n  'Guest',\n];\n\nexport const DEFAULT_USECASE_NAMES = [\n  'Login',\n  'Register',\n  'View Profile',\n  'Edit Profile',\n  'Delete Account',\n  'Search',\n  'Add Item',\n  'Update Item',\n  'Delete Item',\n  'View Reports',\n];\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;;;;AAgDtB,MAAM,iBAAiB;IAC5B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,sBAAsB;IACjC;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,wBAAwB;IACnC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD"}},
    {"offset": {"line": 287, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/types/index.ts"],"sourcesContent":["// Types for ERD Designer\nexport * from './flowchart';\nexport * from './usecase';\n\nexport type DataType = \n  | 'VARCHAR' \n  | 'INT' \n  | 'BIGINT' \n  | 'SMALLINT'\n  | 'DECIMAL' \n  | 'NUMERIC' \n  | 'FLOAT' \n  | 'DOUBLE'\n  | 'BOOLEAN' \n  | 'DATE' \n  | 'TIME' \n  | 'DATETIME' \n  | 'TIMESTAMP' \n  | 'TEXT' \n  | 'BLOB' \n  | 'JSON' \n  | 'UUID';\n\nexport interface Column {\n  id: string;\n  name: string;\n  dataType: DataType;\n  length?: number;\n  precision?: number;\n  scale?: number;\n  nullable: boolean;\n  defaultValue?: string;\n  isPrimaryKey: boolean;\n  isForeignKey: boolean;\n  isUnique: boolean;\n  isAutoIncrement: boolean;\n  comment?: string;\n}\n\nexport interface Table {\n  id: string;\n  name: string;\n  comment?: string;\n  columns: Column[];\n  color: string;\n  position: {\n    x: number;\n    y: number;\n  };\n}\n\nexport type RelationType = 'ONE_TO_ONE' | 'ONE_TO_MANY' | 'MANY_TO_MANY';\n\nexport interface Relation {\n  id: string;\n  name?: string;\n  type: RelationType;\n  sourceTableId: string;\n  sourceColumnId: string;\n  targetTableId: string;\n  targetColumnId: string;\n  onDelete?: 'CASCADE' | 'SET_NULL' | 'RESTRICT' | 'NO_ACTION';\n  onUpdate?: 'CASCADE' | 'SET_NULL' | 'RESTRICT' | 'NO_ACTION';\n}\n\nexport interface ERDState {\n  tables: Table[];\n  relations: Relation[];\n  selectedTableId: string | null;\n  selectedRelationId: string | null;\n  selectedColumnId: string | null;\n}\n\nexport const DATA_TYPES: { type: DataType; label: string; hasLength: boolean; hasPrecision: boolean }[] = [\n  { type: 'VARCHAR', label: 'VARCHAR', hasLength: true, hasPrecision: false },\n  { type: 'INT', label: 'INT', hasLength: false, hasPrecision: false },\n  { type: 'BIGINT', label: 'BIGINT', hasLength: false, hasPrecision: false },\n  { type: 'SMALLINT', label: 'SMALLINT', hasLength: false, hasPrecision: false },\n  { type: 'DECIMAL', label: 'DECIMAL', hasLength: false, hasPrecision: true },\n  { type: 'NUMERIC', label: 'NUMERIC', hasLength: false, hasPrecision: true },\n  { type: 'FLOAT', label: 'FLOAT', hasLength: false, hasPrecision: false },\n  { type: 'DOUBLE', label: 'DOUBLE', hasLength: false, hasPrecision: false },\n  { type: 'BOOLEAN', label: 'BOOLEAN', hasLength: false, hasPrecision: false },\n  { type: 'DATE', label: 'DATE', hasLength: false, hasPrecision: false },\n  { type: 'TIME', label: 'TIME', hasLength: false, hasPrecision: false },\n  { type: 'DATETIME', label: 'DATETIME', hasLength: false, hasPrecision: false },\n  { type: 'TIMESTAMP', label: 'TIMESTAMP', hasLength: false, hasPrecision: false },\n  { type: 'TEXT', label: 'TEXT', hasLength: false, hasPrecision: false },\n  { type: 'BLOB', label: 'BLOB', hasLength: false, hasPrecision: false },\n  { type: 'JSON', label: 'JSON', hasLength: false, hasPrecision: false },\n  { type: 'UUID', label: 'UUID', hasLength: false, hasPrecision: false },\n];\n\nexport const TABLE_COLORS = [\n  '#3B82F6', // Blue\n  '#10B981', // Emerald\n  '#F59E0B', // Amber\n  '#EF4444', // Red\n  '#8B5CF6', // Violet\n  '#EC4899', // Pink\n  '#06B6D4', // Cyan\n  '#84CC16', // Lime\n  '#F97316', // Orange\n  '#6366F1', // Indigo\n  '#14B8A6', // Teal\n  '#A855F7', // Purple\n];\n"],"names":[],"mappings":";;;;;;AAAA,yBAAyB;AACzB;AACA;;;AAuEO,MAAM,aAA6F;IACxG;QAAE,MAAM;QAAW,OAAO;QAAW,WAAW;QAAM,cAAc;IAAM;IAC1E;QAAE,MAAM;QAAO,OAAO;QAAO,WAAW;QAAO,cAAc;IAAM;IACnE;QAAE,MAAM;QAAU,OAAO;QAAU,WAAW;QAAO,cAAc;IAAM;IACzE;QAAE,MAAM;QAAY,OAAO;QAAY,WAAW;QAAO,cAAc;IAAM;IAC7E;QAAE,MAAM;QAAW,OAAO;QAAW,WAAW;QAAO,cAAc;IAAK;IAC1E;QAAE,MAAM;QAAW,OAAO;QAAW,WAAW;QAAO,cAAc;IAAK;IAC1E;QAAE,MAAM;QAAS,OAAO;QAAS,WAAW;QAAO,cAAc;IAAM;IACvE;QAAE,MAAM;QAAU,OAAO;QAAU,WAAW;QAAO,cAAc;IAAM;IACzE;QAAE,MAAM;QAAW,OAAO;QAAW,WAAW;QAAO,cAAc;IAAM;IAC3E;QAAE,MAAM;QAAQ,OAAO;QAAQ,WAAW;QAAO,cAAc;IAAM;IACrE;QAAE,MAAM;QAAQ,OAAO;QAAQ,WAAW;QAAO,cAAc;IAAM;IACrE;QAAE,MAAM;QAAY,OAAO;QAAY,WAAW;QAAO,cAAc;IAAM;IAC7E;QAAE,MAAM;QAAa,OAAO;QAAa,WAAW;QAAO,cAAc;IAAM;IAC/E;QAAE,MAAM;QAAQ,OAAO;QAAQ,WAAW;QAAO,cAAc;IAAM;IACrE;QAAE,MAAM;QAAQ,OAAO;QAAQ,WAAW;QAAO,cAAc;IAAM;IACrE;QAAE,MAAM;QAAQ,OAAO;QAAQ,WAAW;QAAO,cAAc;IAAM;IACrE;QAAE,MAAM;QAAQ,OAAO;QAAQ,WAAW;QAAO,cAAc;IAAM;CACtE;AAEM,MAAM,eAAe;IAC1B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD"}},
    {"offset": {"line": 423, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport function generateId(): string {\n  return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n}\n\nexport function generateTableName(existingTables: { name: string }[]): string {\n  let counter = 1;\n  let name = `Table_${counter}`;\n  \n  while (existingTables.some(t => t.name === name)) {\n    counter++;\n    name = `Table_${counter}`;\n  }\n  \n  return name;\n}\n\nexport function generateColumnName(existingColumns: { name: string }[]): string {\n  let counter = 1;\n  let name = `column_${counter}`;\n  \n  while (existingColumns.some(c => c.name === name)) {\n    counter++;\n    name = `column_${counter}`;\n  }\n  \n  return name;\n}\n\nexport function toSnakeCase(str: string): string {\n  return str\n    .replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`)\n    .replace(/^_/, '');\n}\n\nexport function toPascalCase(str: string): string {\n  return str\n    .replace(/[_\\s]+(.)?/g, (_, char) => (char ? char.toUpperCase() : ''))\n    .replace(/^./, char => char.toUpperCase());\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB;AAEO,SAAS;IACd,OAAO,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG,MAAM,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG;AAC/F;AAEO,SAAS,kBAAkB,cAAkC;IAClE,IAAI,UAAU;IACd,IAAI,OAAO,CAAC,MAAM,EAAE,SAAS;IAE7B,MAAO,eAAe,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,MAAO;QAChD;QACA,OAAO,CAAC,MAAM,EAAE,SAAS;IAC3B;IAEA,OAAO;AACT;AAEO,SAAS,mBAAmB,eAAmC;IACpE,IAAI,UAAU;IACd,IAAI,OAAO,CAAC,OAAO,EAAE,SAAS;IAE9B,MAAO,gBAAgB,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,MAAO;QACjD;QACA,OAAO,CAAC,OAAO,EAAE,SAAS;IAC5B;IAEA,OAAO;AACT;AAEO,SAAS,YAAY,GAAW;IACrC,OAAO,IACJ,OAAO,CAAC,UAAU,CAAA,SAAU,CAAC,CAAC,EAAE,OAAO,WAAW,IAAI,EACtD,OAAO,CAAC,MAAM;AACnB;AAEO,SAAS,aAAa,GAAW;IACtC,OAAO,IACJ,OAAO,CAAC,eAAe,CAAC,GAAG,OAAU,OAAO,KAAK,WAAW,KAAK,IACjE,OAAO,CAAC,MAAM,CAAA,OAAQ,KAAK,WAAW;AAC3C"}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/store/erdStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport { Table, Relation, Column, TABLE_COLORS } from '@/types';\nimport { generateId, generateTableName, generateColumnName } from '@/lib/utils';\n\ninterface ERDStoreState {\n  tables: Table[];\n  relations: Relation[];\n  selectedTableId: string | null;\n  selectedRelationId: string | null;\n  selectedColumnId: string | null;\n  \n  // Table actions\n  addTable: (position: { x: number; y: number }) => string;\n  updateTable: (tableId: string, updates: Partial<Table>) => void;\n  deleteTable: (tableId: string) => void;\n  duplicateTable: (tableId: string) => void;\n  moveTable: (tableId: string, position: { x: number; y: number }) => void;\n  \n  // Column actions\n  addColumn: (tableId: string) => string;\n  updateColumn: (tableId: string, columnId: string, updates: Partial<Column>) => void;\n  deleteColumn: (tableId: string, columnId: string) => void;\n  reorderColumns: (tableId: string, columnIds: string[]) => void;\n  \n  // Relation actions\n  addRelation: (relation: Omit<Relation, 'id'>) => string;\n  updateRelation: (relationId: string, updates: Partial<Relation>) => void;\n  deleteRelation: (relationId: string) => void;\n  \n  // Selection\n  selectTable: (tableId: string | null) => void;\n  selectRelation: (relationId: string | null) => void;\n  selectColumn: (tableId: string | null, columnId: string | null) => void;\n  clearSelection: () => void;\n  \n  // Import/Export\n  exportToJSON: () => string;\n  importFromJSON: (json: string) => void;\n  exportToSQL: () => string;\n  clearAll: () => void;\n}\n\nconst getRandomColor = () => TABLE_COLORS[Math.floor(Math.random() * TABLE_COLORS.length)];\n\nexport const useERDStore = create<ERDStoreState>()(\n  persist(\n    (set, get) => ({\n      tables: [],\n      relations: [],\n      selectedTableId: null,\n      selectedRelationId: null,\n      selectedColumnId: null,\n\n      addTable: (position) => {\n        const id = generateId();\n        const { tables } = get();\n        \n        const newTable: Table = {\n          id,\n          name: generateTableName(tables),\n          columns: [\n            {\n              id: generateId(),\n              name: 'id',\n              dataType: 'INT',\n              nullable: false,\n              isPrimaryKey: true,\n              isForeignKey: false,\n              isUnique: false,\n              isAutoIncrement: true,\n            },\n          ],\n          color: getRandomColor(),\n          position,\n        };\n\n        set({ tables: [...tables, newTable], selectedTableId: id });\n        return id;\n      },\n\n      updateTable: (tableId, updates) => {\n        set({\n          tables: get().tables.map((t) =>\n            t.id === tableId ? { ...t, ...updates } : t\n          ),\n        });\n      },\n\n      deleteTable: (tableId) => {\n        const { tables, relations, selectedTableId } = get();\n        \n        // Delete related relations\n        const remainingRelations = relations.filter(\n          (r) => r.sourceTableId !== tableId && r.targetTableId !== tableId\n        );\n        \n        set({\n          tables: tables.filter((t) => t.id !== tableId),\n          relations: remainingRelations,\n          selectedTableId: selectedTableId === tableId ? null : selectedTableId,\n        });\n      },\n\n      duplicateTable: (tableId) => {\n        const { tables } = get();\n        const table = tables.find((t) => t.id === tableId);\n        if (!table) return;\n\n        const newId = generateId();\n        const newTable: Table = {\n          ...table,\n          id: newId,\n          name: `${table.name}_copy`,\n          position: {\n            x: table.position.x + 50,\n            y: table.position.y + 50,\n          },\n          columns: table.columns.map((col) => ({\n            ...col,\n            id: generateId(),\n            isForeignKey: false,\n          })),\n        };\n\n        set({ tables: [...tables, newTable], selectedTableId: newId });\n      },\n\n      moveTable: (tableId, position) => {\n        set({\n          tables: get().tables.map((t) =>\n            t.id === tableId ? { ...t, position } : t\n          ),\n        });\n      },\n\n      addColumn: (tableId) => {\n        const { tables } = get();\n        const table = tables.find((t) => t.id === tableId);\n        if (!table) return '';\n\n        const newColumn: Column = {\n          id: generateId(),\n          name: generateColumnName(table.columns),\n          dataType: 'VARCHAR',\n          length: 255,\n          nullable: true,\n          isPrimaryKey: false,\n          isForeignKey: false,\n          isUnique: false,\n          isAutoIncrement: false,\n        };\n\n        set({\n          tables: tables.map((t) =>\n            t.id === tableId\n              ? { ...t, columns: [...t.columns, newColumn] }\n              : t\n          ),\n          selectedColumnId: newColumn.id,\n        });\n\n        return newColumn.id;\n      },\n\n      updateColumn: (tableId, columnId, updates) => {\n        set({\n          tables: get().tables.map((t) =>\n            t.id === tableId\n              ? {\n                  ...t,\n                  columns: t.columns.map((c) =>\n                    c.id === columnId ? { ...c, ...updates } : c\n                  ),\n                }\n              : t\n          ),\n        });\n      },\n\n      deleteColumn: (tableId, columnId) => {\n        const { tables, relations } = get();\n        const table = tables.find((t) => t.id === tableId);\n        if (!table || table.columns.length <= 1) return; // Keep at least one column\n\n        // Delete related relations\n        const remainingRelations = relations.filter(\n          (r) =>\n            !(\n              (r.sourceTableId === tableId && r.sourceColumnId === columnId) ||\n              (r.targetTableId === tableId && r.targetColumnId === columnId)\n            )\n        );\n\n        set({\n          tables: tables.map((t) =>\n            t.id === tableId\n              ? { ...t, columns: t.columns.filter((c) => c.id !== columnId) }\n              : t\n          ),\n          relations: remainingRelations,\n          selectedColumnId: null,\n        });\n      },\n\n      reorderColumns: (tableId, columnIds) => {\n        set({\n          tables: get().tables.map((t) => {\n            if (t.id !== tableId) return t;\n            \n            const columnMap = new Map(t.columns.map((c) => [c.id, c]));\n            return {\n              ...t,\n              columns: columnIds\n                .map((id) => columnMap.get(id))\n                .filter((c): c is Column => c !== undefined),\n            };\n          }),\n        });\n      },\n\n      addRelation: (relation) => {\n        const id = generateId();\n        set({ relations: [...get().relations, { ...relation, id }] });\n        return id;\n      },\n\n      updateRelation: (relationId, updates) => {\n        set({\n          relations: get().relations.map((r) =>\n            r.id === relationId ? { ...r, ...updates } : r\n          ),\n        });\n      },\n\n      deleteRelation: (relationId) => {\n        set({\n          relations: get().relations.filter((r) => r.id !== relationId),\n          selectedRelationId: null,\n        });\n      },\n\n      selectTable: (tableId) => {\n        set({\n          selectedTableId: tableId,\n          selectedRelationId: null,\n          selectedColumnId: null,\n        });\n      },\n\n      selectRelation: (relationId) => {\n        set({\n          selectedRelationId: relationId,\n          selectedTableId: null,\n          selectedColumnId: null,\n        });\n      },\n\n      selectColumn: (tableId, columnId) => {\n        set({\n          selectedTableId: tableId,\n          selectedColumnId: columnId,\n          selectedRelationId: null,\n        });\n      },\n\n      clearSelection: () => {\n        set({\n          selectedTableId: null,\n          selectedRelationId: null,\n          selectedColumnId: null,\n        });\n      },\n\n      exportToJSON: () => {\n        const { tables, relations } = get();\n        return JSON.stringify({ tables, relations }, null, 2);\n      },\n\n      importFromJSON: (json) => {\n        try {\n          const data = JSON.parse(json);\n          if (data.tables && Array.isArray(data.tables)) {\n            set({\n              tables: data.tables,\n              relations: data.relations || [],\n              selectedTableId: null,\n              selectedRelationId: null,\n              selectedColumnId: null,\n            });\n          }\n        } catch (error) {\n          console.error('Failed to import JSON:', error);\n          throw error;\n        }\n      },\n\n      exportToSQL: () => {\n        const { tables, relations } = get();\n        let sql = '-- Generated by ERD Designer\\n\\n';\n\n        // Generate CREATE TABLE statements\n        tables.forEach((table) => {\n          sql += `CREATE TABLE IF NOT EXISTS \\`${table.name}\\` (\\n`;\n          \n          const columnDefs = table.columns.map((col) => {\n            let def = `  \\`${col.name}\\` ${col.dataType}`;\n            \n            if (col.length) {\n              def += `(${col.length})`;\n            } else if (col.precision !== undefined && col.scale !== undefined) {\n              def += `(${col.precision},${col.scale})`;\n            }\n            \n            if (col.isPrimaryKey && col.isAutoIncrement) {\n              def += ' AUTO_INCREMENT';\n            }\n            \n            if (!col.nullable) {\n              def += ' NOT NULL';\n            }\n            \n            if (col.defaultValue !== undefined && col.defaultValue !== '') {\n              def += ` DEFAULT ${col.defaultValue}`;\n            }\n            \n            if (col.comment) {\n              def += ` COMMENT '${col.comment}'`;\n            }\n            \n            return def;\n          });\n\n          // Add primary key constraint\n          const pkColumns = table.columns\n            .filter((c) => c.isPrimaryKey)\n            .map((c) => `\\`${c.name}\\``);\n          \n          if (pkColumns.length > 0) {\n            columnDefs.push(`  PRIMARY KEY (${pkColumns.join(', ')})`);\n          }\n\n          // Add unique constraints\n          table.columns\n            .filter((c) => c.isUnique && !c.isPrimaryKey)\n            .forEach((col) => {\n              columnDefs.push(\n                `  UNIQUE KEY \\`uk_${table.name}_${col.name}\\` (\\`${col.name}\\`)`\n              );\n            });\n\n          sql += columnDefs.join(',\\n');\n          sql += '\\n';\n          \n          if (table.comment) {\n            sql += `) COMMENT='${table.comment}';\\n\\n`;\n          } else {\n            sql += ');\\n\\n';\n          }\n        });\n\n        // Generate foreign key constraints\n        relations.forEach((rel) => {\n          const sourceTable = tables.find((t) => t.id === rel.sourceTableId);\n          const targetTable = tables.find((t) => t.id === rel.targetTableId);\n          \n          if (sourceTable && targetTable) {\n            const sourceColumn = sourceTable.columns.find(\n              (c) => c.id === rel.sourceColumnId\n            );\n            const targetColumn = targetTable.columns.find(\n              (c) => c.id === rel.targetColumnId\n            );\n            \n            if (sourceColumn && targetColumn) {\n              sql += `ALTER TABLE \\`${sourceTable.name}\\` `;\n              sql += `ADD CONSTRAINT \\`fk_${sourceTable.name}_${sourceColumn.name}\\` `;\n              sql += `FOREIGN KEY (\\`${sourceColumn.name}\\`) `;\n              sql += `REFERENCES \\`${targetTable.name}\\`(\\`${targetColumn.name}\\`)`;\n              \n              if (rel.onDelete) {\n                sql += ` ON DELETE ${rel.onDelete.replace('_', ' ')}`;\n              }\n              if (rel.onUpdate) {\n                sql += ` ON UPDATE ${rel.onUpdate.replace('_', ' ')}`;\n              }\n              \n              sql += ';\\n';\n            }\n          }\n        });\n\n        return sql;\n      },\n\n      clearAll: () => {\n        set({\n          tables: [],\n          relations: [],\n          selectedTableId: null,\n          selectedRelationId: null,\n          selectedColumnId: null,\n        });\n      },\n    }),\n    {\n      name: 'erd-designer-storage',\n    }\n  )\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 814, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/erd/TableNode.tsx"],"sourcesContent":["'use client';\n\nimport { memo, useState, useCallback } from 'react';\nimport { Handle, Position, type NodeProps } from '@xyflow/react';\nimport { \n  Key, \n  Link2, \n  Hash, \n  MoreVertical,\n  Plus,\n  Trash2,\n  Copy,\n  Settings2\n} from 'lucide-react';\nimport { useERDStore } from '@/store/erdStore';\nimport { cn } from '@/lib/utils';\nimport { type Column, DATA_TYPES } from '@/types';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface TableNodeData extends Record<string, unknown> {\n  tableId: string;\n}\n\nconst getDataTypeColor = (dataType: string): string => {\n  const colors: Record<string, string> = {\n    VARCHAR: 'text-blue-400',\n    TEXT: 'text-blue-300',\n    INT: 'text-green-400',\n    BIGINT: 'text-green-300',\n    SMALLINT: 'text-green-300',\n    DECIMAL: 'text-yellow-400',\n    NUMERIC: 'text-yellow-400',\n    FLOAT: 'text-yellow-300',\n    DOUBLE: 'text-yellow-300',\n    BOOLEAN: 'text-purple-400',\n    DATE: 'text-pink-400',\n    TIME: 'text-pink-300',\n    DATETIME: 'text-pink-400',\n    TIMESTAMP: 'text-pink-500',\n    BLOB: 'text-gray-400',\n    JSON: 'text-orange-400',\n    UUID: 'text-cyan-400',\n  };\n  return colors[dataType] || 'text-gray-400';\n};\n\nconst ColumnRow = memo(function ColumnRow({\n  column,\n  tableId,\n  isSelected,\n  onSelect,\n  index,\n}: {\n  column: Column;\n  tableId: string;\n  isSelected: boolean;\n  onSelect: () => void;\n  index: number;\n}) {\n  const deleteColumn = useERDStore((state) => state.deleteColumn);\n  const selectedColumnId = useERDStore((state) => state.selectedColumnId);\n  \n  const isColumnSelected = selectedColumnId === column.id;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: -10 }}\n      animate={{ opacity: 1, x: 0 }}\n      transition={{ delay: index * 0.03 }}\n      className={cn(\n        'group flex items-center gap-2 px-3 py-1.5 text-xs cursor-pointer transition-all duration-150',\n        'hover:bg-white/5',\n        isColumnSelected && 'bg-white/10 ring-1 ring-white/20'\n      )}\n      onClick={(e) => {\n        e.stopPropagation();\n        onSelect();\n      }}\n    >\n      {/* Primary Key / Foreign Key / Index Icons */}\n      <div className=\"flex items-center gap-1 w-5 shrink-0\">\n        {column.isPrimaryKey && (\n          <Key className=\"w-3.5 h-3.5 text-amber-400\" />\n        )}\n        {column.isForeignKey && !column.isPrimaryKey && (\n          <Link2 className=\"w-3.5 h-3.5 text-blue-400\" />\n        )}\n        {column.isUnique && !column.isPrimaryKey && (\n          <Hash className=\"w-3.5 h-3.5 text-purple-400\" />\n        )}\n      </div>\n\n      {/* Column Name */}\n      <span className={cn(\n        'flex-1 font-medium truncate',\n        column.isPrimaryKey ? 'text-amber-100' : 'text-slate-200'\n      )}>\n        {column.name}\n      </span>\n\n      {/* Data Type */}\n      <span className={cn('text-[10px] font-mono shrink-0', getDataTypeColor(column.dataType))}>\n        {column.dataType}\n        {column.length && `(${column.length})`}\n        {column.precision !== undefined && \n          `(${column.precision}${column.scale !== undefined ? `,${column.scale}` : ''})`}\n      </span>\n\n      {/* Nullable indicator */}\n      {!column.nullable && (\n        <span className=\"text-[9px] text-red-400 font-bold shrink-0\">*</span>\n      )}\n\n      {/* Delete button on hover */}\n      <button\n        onClick={(e) => {\n          e.stopPropagation();\n          deleteColumn(tableId, column.id);\n        }}\n        className=\"opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-red-500/20 text-red-400 transition-all shrink-0\"\n      >\n        <Trash2 className=\"w-3 h-3\" />\n      </button>\n    </motion.div>\n  );\n});\n\nfunction TableNodeComponent({ data, selected }: NodeProps) {\n  const { tableId } = data as TableNodeData;\n  const [showMenu, setShowMenu] = useState(false);\n  \n  const table = useERDStore((state) => \n    state.tables.find((t) => t.id === tableId)\n  );\n  const selectedTableId = useERDStore((state) => state.selectedTableId);\n  const selectTable = useERDStore((state) => state.selectTable);\n  const selectColumn = useERDStore((state) => state.selectColumn);\n  const addColumn = useERDStore((state) => state.addColumn);\n  const duplicateTable = useERDStore((state) => state.duplicateTable);\n  const deleteTable = useERDStore((state) => state.deleteTable);\n  const updateTable = useERDStore((state) => state.updateTable);\n  \n  const isSelected = selectedTableId === tableId;\n\n  const handleAddColumn = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    addColumn(tableId);\n  }, [addColumn, tableId]);\n\n  const handleDuplicate = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    duplicateTable(tableId);\n    setShowMenu(false);\n  }, [duplicateTable, tableId]);\n\n  const handleDelete = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    deleteTable(tableId);\n    setShowMenu(false);\n  }, [deleteTable, tableId]);\n\n  const handleColorChange = useCallback((color: string) => {\n    updateTable(tableId, { color });\n    setShowMenu(false);\n  }, [updateTable, tableId]);\n\n  if (!table) return null;\n\n  return (\n    <div\n      className={cn(\n        'relative rounded-xl overflow-hidden transition-all duration-200',\n        'bg-slate-900/95 backdrop-blur-sm border shadow-2xl',\n        isSelected \n          ? 'border-white/30 shadow-white/10 ring-2 ring-white/20' \n          : 'border-white/10 shadow-black/20',\n        'min-w-[240px] max-w-[320px]'\n      )}\n      style={{\n        boxShadow: isSelected \n          ? `0 0 0 1px ${table.color}40, 0 20px 40px -10px rgba(0,0,0,0.5)` \n          : '0 20px 40px -10px rgba(0,0,0,0.3)'\n      }}\n      onClick={() => selectTable(tableId)}\n    >\n      {/* Header */}\n      <div \n        className=\"relative px-4 py-3 flex items-center justify-between\"\n        style={{ \n          background: `linear-gradient(135deg, ${table.color}20 0%, ${table.color}10 100%)`,\n          borderBottom: `1px solid ${table.color}30`\n        }}\n      >\n        {/* Color indicator line */}\n        <div \n          className=\"absolute left-0 top-0 bottom-0 w-1\"\n          style={{ backgroundColor: table.color }}\n        />\n        \n        <div className=\"flex-1 min-w-0 ml-2\">\n          <h3 className=\"font-semibold text-sm text-white truncate\">\n            {table.name}\n          </h3>\n          {table.comment && (\n            <p className=\"text-[10px] text-slate-400 truncate\">{table.comment}</p>\n          )}\n        </div>\n\n        {/* Menu Button */}\n        <div className=\"relative\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setShowMenu(!showMenu);\n            }}\n            className=\"p-1.5 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors\"\n          >\n            <MoreVertical className=\"w-4 h-4\" />\n          </button>\n\n          {/* Dropdown Menu */}\n          <AnimatePresence>\n            {showMenu && (\n              <motion.div\n                initial={{ opacity: 0, scale: 0.95, y: -5 }}\n                animate={{ opacity: 1, scale: 1, y: 0 }}\n                exit={{ opacity: 0, scale: 0.95, y: -5 }}\n                className=\"absolute right-0 top-full mt-1 w-48 bg-slate-800 rounded-xl border border-white/10 shadow-2xl z-50 overflow-hidden\"\n              >\n                <button\n                  onClick={handleDuplicate}\n                  className=\"w-full px-3 py-2 flex items-center gap-2 text-xs text-slate-300 hover:bg-white/5 transition-colors\"\n                >\n                  <Copy className=\"w-3.5 h-3.5\" />\n                  Duplicate Table\n                </button>\n                \n                <div className=\"px-3 py-2 border-t border-white/5\">\n                  <span className=\"text-[10px] text-slate-500 uppercase tracking-wider\">Color</span>\n                  <div className=\"flex flex-wrap gap-1 mt-1.5\">\n                    {['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899', '#06B6D4', '#84CC16'].map((color) => (\n                      <button\n                        key={color}\n                        onClick={() => handleColorChange(color)}\n                        className={cn(\n                          'w-5 h-5 rounded-full transition-transform hover:scale-110',\n                          table.color === color && 'ring-2 ring-white'\n                        )}\n                        style={{ backgroundColor: color }}\n                      />\n                    ))}\n                  </div>\n                </div>\n\n                <button\n                  onClick={handleDelete}\n                  className=\"w-full px-3 py-2 flex items-center gap-2 text-xs text-red-400 hover:bg-red-500/10 transition-colors border-t border-white/5\"\n                >\n                  <Trash2 className=\"w-3.5 h-3.5\" />\n                  Delete Table\n                </button>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n\n        {/* Click outside to close menu */}\n        {showMenu && (\n          <div \n            className=\"fixed inset-0 z-40\" \n            onClick={() => setShowMenu(false)}\n          />\n        )}\n      </div>\n\n      {/* Columns */}\n      <div className=\"py-1 max-h-[300px] overflow-y-auto scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent\">\n        {table.columns.map((column, index) => (\n          <ColumnRow\n            key={column.id}\n            column={column}\n            tableId={tableId}\n            isSelected={isSelected}\n            onSelect={() => selectColumn(tableId, column.id)}\n            index={index}\n          />\n        ))}\n      </div>\n\n      {/* Add Column Button */}\n      <button\n        onClick={handleAddColumn}\n        className=\"w-full px-4 py-2 flex items-center justify-center gap-2 text-xs text-slate-400 hover:text-white hover:bg-white/5 transition-all border-t border-white/5\"\n      >\n        <Plus className=\"w-3.5 h-3.5\" />\n        Add Column\n      </button>\n\n      {/* Handles for connections */}\n      <Handle\n        type=\"source\"\n        position={Position.Top}\n        className=\"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ top: -6 }}\n      />\n      <Handle\n        type=\"target\"\n        position={Position.Top}\n        className=\"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ top: -6 }}\n      />\n      <Handle\n        type=\"source\"\n        position={Position.Right}\n        className=\"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ right: -6 }}\n      />\n      <Handle\n        type=\"target\"\n        position={Position.Right}\n        className=\"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ right: -6 }}\n      />\n      <Handle\n        type=\"source\"\n        position={Position.Bottom}\n        className=\"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ bottom: -6 }}\n      />\n      <Handle\n        type=\"target\"\n        position={Position.Bottom}\n        className=\"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ bottom: -6 }}\n      />\n      <Handle\n        type=\"source\"\n        position={Position.Left}\n        className=\"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ left: -6 }}\n      />\n      <Handle\n        type=\"target\"\n        position={Position.Left}\n        className=\"!w-3 !h-3 !bg-white/20 !border-2 !border-white/40 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ left: -6 }}\n      />\n    </div>\n  );\n}\n\nexport default memo(TableNodeComponent);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1416, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/erd/RelationEdge.tsx"],"sourcesContent":["'use client';\n\nimport { memo, useState } from 'react';\nimport {\n  BaseEdge,\n  EdgeLabelRenderer,\n  EdgeProps,\n  getBezierPath,\n  useReactFlow,\n} from '@xyflow/react';\nimport { useERDStore } from '@/store/erdStore';\nimport { RelationType } from '@/types';\nimport { cn } from '@/lib/utils';\nimport { X, Settings2 } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface RelationEdgeData extends Record<string, unknown> {\n  relationId: string;\n  type: RelationType;\n  onDelete?: () => void;\n}\n\nconst getRelationSymbols = (type: RelationType) => {\n  switch (type) {\n    case 'ONE_TO_ONE':\n      return { source: '1', target: '1' };\n    case 'ONE_TO_MANY':\n      return { source: '1', target: '' };\n    case 'MANY_TO_MANY':\n      return { source: '', target: '' };\n    default:\n      return { source: '1', target: '*' };\n  }\n};\n\nconst getEdgeStyle = (type: RelationType, isSelected: boolean) => {\n  const baseStyle = {\n    strokeWidth: isSelected ? 3 : 2,\n    stroke: isSelected ? '#60A5FA' : '#94A3B8',\n  };\n\n  switch (type) {\n    case 'ONE_TO_ONE':\n      return { ...baseStyle, strokeDasharray: undefined };\n    case 'ONE_TO_MANY':\n      return { ...baseStyle, strokeDasharray: undefined };\n    case 'MANY_TO_MANY':\n      return { ...baseStyle, strokeDasharray: '8,4' };\n    default:\n      return baseStyle;\n  }\n};\n\nfunction RelationEdgeComponent({\n  id,\n  sourceX,\n  sourceY,\n  targetX,\n  targetY,\n  sourcePosition,\n  targetPosition,\n  data,\n  selected,\n}: EdgeProps) {\n  const { relationId, type = 'ONE_TO_MANY' } = (data || {}) as RelationEdgeData;\n  const [showControls, setShowControls] = useState(false);\n  \n  const selectedRelationId = useERDStore((state) => state.selectedRelationId);\n  const selectRelation = useERDStore((state) => state.selectRelation);\n  const deleteRelation = useERDStore((state) => state.deleteRelation);\n  const updateRelation = useERDStore((state) => state.updateRelation);\n  \n  const isSelected = selectedRelationId === relationId || selected;\n\n  const [edgePath, labelX, labelY] = getBezierPath({\n    sourceX,\n    sourceY,\n    sourcePosition,\n    targetX,\n    targetY,\n    targetPosition,\n    curvature: 0.3,\n  });\n\n  const symbols = getRelationSymbols(type);\n  const edgeStyle = getEdgeStyle(type, isSelected ?? false);\n\n  const handleDelete = () => {\n    if (relationId) {\n      deleteRelation(relationId);\n    }\n  };\n\n  const handleTypeChange = (newType: RelationType) => {\n    if (relationId) {\n      updateRelation(relationId, { type: newType });\n    }\n  };\n\n  return (\n    <>\n      <BaseEdge\n        path={edgePath}\n        style={edgeStyle}\n        className=\"transition-all duration-200\"\n      />\n      \n      {/* Relation symbols */}\n      <EdgeLabelRenderer>\n        {/* Source symbol */}\n        <div\n          style={{\n            position: 'absolute',\n            transform: `translate(-50%, -50%) translate(${sourceX}px, ${sourceY}px)`,\n            pointerEvents: 'none',\n          }}\n          className={cn(\n            'w-5 h-5 flex items-center justify-center rounded-full text-[10px] font-bold',\n            'bg-slate-800 border border-slate-600 text-slate-300'\n          )}\n        >\n          {symbols.source}\n        </div>\n\n        {/* Target symbol */}\n        <div\n          style={{\n            position: 'absolute',\n            transform: `translate(-50%, -50%) translate(${targetX}px, ${targetY}px)`,\n            pointerEvents: 'none',\n          }}\n          className={cn(\n            'w-5 h-5 flex items-center justify-center rounded-full text-[10px] font-bold',\n            'bg-slate-800 border border-slate-600 text-slate-300'\n          )}\n        >\n          {symbols.target}\n        </div>\n\n        {/* Label / Controls */}\n        <div\n          style={{\n            position: 'absolute',\n            transform: `translate(-50%, -50%) translate(${labelX}px, ${labelY}px)`,\n          }}\n          className=\"nodrag nopan\"\n          onMouseEnter={() => setShowControls(true)}\n          onMouseLeave={() => setShowControls(false)}\n        >\n          <AnimatePresence>\n            {showControls || isSelected ? (\n              <motion.div\n                initial={{ opacity: 0, scale: 0.9 }}\n                animate={{ opacity: 1, scale: 1 }}\n                exit={{ opacity: 0, scale: 0.9 }}\n                className={cn(\n                  'flex items-center gap-1 p-1 rounded-lg',\n                  'bg-slate-800 border border-slate-600 shadow-xl'\n                )}\n              >\n                {/* Type selector */}\n                <select\n                  value={type}\n                  onChange={(e) => handleTypeChange(e.target.value as RelationType)}\n                  onClick={(e) => e.stopPropagation()}\n                  className=\"text-[10px] bg-slate-700 text-slate-200 rounded px-1.5 py-0.5 border-none outline-none cursor-pointer\"\n                >\n                  <option value=\"ONE_TO_ONE\">1:1</option>\n                  <option value=\"ONE_TO_MANY\">1:N</option>\n                  <option value=\"MANY_TO_MANY\">N:N</option>\n                </select>\n\n                {/* Delete button */}\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDelete();\n                  }}\n                  className=\"p-1 rounded hover:bg-red-500/20 text-red-400 transition-colors\"\n                >\n                  <X className=\"w-3 h-3\" />\n                </button>\n              </motion.div>\n            ) : (\n              <motion.div\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n                className={cn(\n                  'px-2 py-0.5 rounded text-[10px] font-medium',\n                  'bg-slate-800/80 text-slate-400 border border-slate-700/50'\n                )}\n              >\n                {type === 'ONE_TO_ONE' && '1:1'}\n                {type === 'ONE_TO_MANY' && '1:N'}\n                {type === 'MANY_TO_MANY' && 'N:N'}\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      </EdgeLabelRenderer>\n\n      {/* Invisible wider edge for easier selection */}\n      <path\n        d={edgePath}\n        stroke=\"transparent\"\n        strokeWidth={20}\n        fill=\"none\"\n        className=\"cursor-pointer\"\n        onClick={() => relationId && selectRelation(relationId)}\n      />\n    </>\n  );\n}\n\nexport default memo(RelationEdgeComponent);\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAOA;AAEA;AACA;AACA;AAAA;;;AAdA;;;;;;;AAsBA,MAAM,qBAAqB,CAAC;IAC1B,OAAQ;QACN,KAAK;YACH,OAAO;gBAAE,QAAQ;gBAAK,QAAQ;YAAI;QACpC,KAAK;YACH,OAAO;gBAAE,QAAQ;gBAAK,QAAQ;YAAI;QACpC,KAAK;YACH,OAAO;gBAAE,QAAQ;gBAAK,QAAQ;YAAI;QACpC;YACE,OAAO;gBAAE,QAAQ;gBAAK,QAAQ;YAAI;IACtC;AACF;AAEA,MAAM,eAAe,CAAC,MAAoB;IACxC,MAAM,YAAY;QAChB,aAAa,aAAa,IAAI;QAC9B,QAAQ,aAAa,YAAY;IACnC;IAEA,OAAQ;QACN,KAAK;YACH,OAAO;gBAAE,GAAG,SAAS;gBAAE,iBAAiB;YAAU;QACpD,KAAK;YACH,OAAO;gBAAE,GAAG,SAAS;gBAAE,iBAAiB;YAAU;QACpD,KAAK;YACH,OAAO;gBAAE,GAAG,SAAS;gBAAE,iBAAiB;YAAM;QAChD;YACE,OAAO;IACX;AACF;AAEA,SAAS,sBAAsB,EAC7B,EAAE,EACF,OAAO,EACP,OAAO,EACP,OAAO,EACP,OAAO,EACP,cAAc,EACd,cAAc,EACd,IAAI,EACJ,QAAQ,EACE;;IACV,MAAM,EAAE,UAAU,EAAE,OAAO,aAAa,EAAE,GAAI,QAAQ,CAAC;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,MAAM,qBAAqB,IAAA,0IAAW;iEAAC,CAAC,QAAU,MAAM,kBAAkB;;IAC1E,MAAM,iBAAiB,IAAA,0IAAW;6DAAC,CAAC,QAAU,MAAM,cAAc;;IAClE,MAAM,iBAAiB,IAAA,0IAAW;6DAAC,CAAC,QAAU,MAAM,cAAc;;IAClE,MAAM,iBAAiB,IAAA,0IAAW;6DAAC,CAAC,QAAU,MAAM,cAAc;;IAElE,MAAM,aAAa,uBAAuB,cAAc;IAExD,MAAM,CAAC,UAAU,QAAQ,OAAO,GAAG,IAAA,8KAAa,EAAC;QAC/C;QACA;QACA;QACA;QACA;QACA;QACA,WAAW;IACb;IAEA,MAAM,UAAU,mBAAmB;IACnC,MAAM,YAAY,aAAa,MAAM,cAAc;IAEnD,MAAM,eAAe;QACnB,IAAI,YAAY;YACd,eAAe;QACjB;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,IAAI,YAAY;YACd,eAAe,YAAY;gBAAE,MAAM;YAAQ;QAC7C;IACF;IAEA,qBACE;;0BACE,6LAAC,wLAAQ;gBACP,MAAM;gBACN,OAAO;gBACP,WAAU;;;;;;0BAIZ,6LAAC,iMAAiB;;kCAEhB,6LAAC;wBACC,OAAO;4BACL,UAAU;4BACV,WAAW,CAAC,gCAAgC,EAAE,QAAQ,IAAI,EAAE,QAAQ,GAAG,CAAC;4BACxE,eAAe;wBACjB;wBACA,WAAW,IAAA,4HAAE,EACX,+EACA;kCAGD,QAAQ,MAAM;;;;;;kCAIjB,6LAAC;wBACC,OAAO;4BACL,UAAU;4BACV,WAAW,CAAC,gCAAgC,EAAE,QAAQ,IAAI,EAAE,QAAQ,GAAG,CAAC;4BACxE,eAAe;wBACjB;wBACA,WAAW,IAAA,4HAAE,EACX,+EACA;kCAGD,QAAQ,MAAM;;;;;;kCAIjB,6LAAC;wBACC,OAAO;4BACL,UAAU;4BACV,WAAW,CAAC,gCAAgC,EAAE,OAAO,IAAI,EAAE,OAAO,GAAG,CAAC;wBACxE;wBACA,WAAU;wBACV,cAAc,IAAM,gBAAgB;wBACpC,cAAc,IAAM,gBAAgB;kCAEpC,cAAA,6LAAC,+MAAe;sCACb,gBAAgB,2BACf,6LAAC,uMAAM,CAAC,GAAG;gCACT,SAAS;oCAAE,SAAS;oCAAG,OAAO;gCAAI;gCAClC,SAAS;oCAAE,SAAS;oCAAG,OAAO;gCAAE;gCAChC,MAAM;oCAAE,SAAS;oCAAG,OAAO;gCAAI;gCAC/B,WAAW,IAAA,4HAAE,EACX,0CACA;;kDAIF,6LAAC;wCACC,OAAO;wCACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;wCAChD,SAAS,CAAC,IAAM,EAAE,eAAe;wCACjC,WAAU;;0DAEV,6LAAC;gDAAO,OAAM;0DAAa;;;;;;0DAC3B,6LAAC;gDAAO,OAAM;0DAAc;;;;;;0DAC5B,6LAAC;gDAAO,OAAM;0DAAe;;;;;;;;;;;;kDAI/B,6LAAC;wCACC,SAAS,CAAC;4CACR,EAAE,eAAe;4CACjB;wCACF;wCACA,WAAU;kDAEV,cAAA,6LAAC,oMAAC;4CAAC,WAAU;;;;;;;;;;;;;;;;qDAIjB,6LAAC,uMAAM,CAAC,GAAG;gCACT,SAAS;oCAAE,SAAS;gCAAE;gCACtB,SAAS;oCAAE,SAAS;gCAAE;gCACtB,MAAM;oCAAE,SAAS;gCAAE;gCACnB,WAAW,IAAA,4HAAE,EACX,+CACA;;oCAGD,SAAS,gBAAgB;oCACzB,SAAS,iBAAiB;oCAC1B,SAAS,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;0BAQtC,6LAAC;gBACC,GAAG;gBACH,QAAO;gBACP,aAAa;gBACb,MAAK;gBACL,WAAU;gBACV,SAAS,IAAM,cAAc,eAAe;;;;;;;;AAIpD;GAhKS;;QAcoB,0IAAW;QACf,0IAAW;QACX,0IAAW;QACX,0IAAW;;;KAjB3B;2DAkKM,IAAA,qKAAI,EAAC"}},
    {"offset": {"line": 1721, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/erd/ERDCanvas.tsx"],"sourcesContent":["'use client';\n\nimport { useCallback, useRef, useEffect, useState } from 'react';\nimport {\n  ReactFlow,\n  Background,\n  BackgroundVariant,\n  Controls,\n  MiniMap,\n  useNodesState,\n  useEdgesState,\n  addEdge,\n  Connection,\n  ConnectionMode,\n  Panel,\n  useReactFlow,\n  ReactFlowProvider,\n  type Node,\n  type Edge,\n} from '@xyflow/react';\nimport '@xyflow/react/dist/style.css';\nimport { useERDStore } from '@/store/erdStore';\nimport { Table, Relation } from '@/types';\nimport TableNode from './TableNode';\nimport RelationEdge from './RelationEdge';\nimport { toPng } from 'html-to-image';\nimport { \n  Download, \n  FileJson, \n  FileCode, \n  Trash2, \n  Plus,\n  MousePointer2,\n  ZoomIn,\n  ZoomOut,\n  Maximize,\n  Grid3X3\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst nodeTypes: any = {\n  table: TableNode,\n};\n\nconst edgeTypes: any = {\n  relation: RelationEdge,\n};\n\ninterface TableNodeData extends Record<string, unknown> {\n  tableId: string;\n}\n\ninterface RelationEdgeData extends Record<string, unknown> {\n  relationId: string;\n  type: string;\n}\n\ntype TableNodeType = Node<TableNodeData, 'table'>;\ntype RelationEdgeType = Edge<RelationEdgeData, 'relation'>;\n\nfunction ERDCanvasContent() {\n  const reactFlowWrapper = useRef<HTMLDivElement>(null);\n  const {\n    tables,\n    relations,\n    selectedTableId,\n    selectedRelationId,\n    addTable,\n    addRelation,\n    selectTable,\n    selectRelation,\n    clearSelection,\n    updateTable,\n    exportToJSON,\n    exportToSQL,\n    importFromJSON,\n    clearAll,\n  } = useERDStore();\n\n  const [nodes, setNodes, onNodesChange] = useNodesState<TableNodeType>([]);\n  const [edges, setEdges, onEdgesChange] = useEdgesState<RelationEdgeType>([]);\n  const [showGrid, setShowGrid] = useState(true);\n  const [showMiniMap, setShowMiniMap] = useState(true);\n  const { fitView, zoomIn, zoomOut, screenToFlowPosition } = useReactFlow();\n\n  // Convert tables to React Flow nodes\n  useEffect(() => {\n    const flowNodes: TableNodeType[] = tables.map((table) => ({\n      id: table.id,\n      type: 'table',\n      position: table.position,\n      data: { tableId: table.id },\n      selected: table.id === selectedTableId,\n    }));\n    setNodes(flowNodes);\n  }, [tables, selectedTableId, setNodes]);\n\n  // Convert relations to React Flow edges\n  useEffect(() => {\n    const flowEdges: RelationEdgeType[] = relations.map((relation) => ({\n      id: relation.id,\n      source: relation.sourceTableId,\n      target: relation.targetTableId,\n      type: 'relation',\n      data: { \n        relationId: relation.id,\n        type: relation.type,\n      },\n      selected: relation.id === selectedRelationId,\n    }));\n    setEdges(flowEdges);\n  }, [relations, selectedRelationId, setEdges]);\n\n  // Handle connections (creating new relations)\n  const onConnect = useCallback(\n    (connection: Connection) => {\n      if (connection.source && connection.target) {\n        // Get source and target tables to find columns\n        const sourceTable = tables.find((t) => t.id === connection.source);\n        const targetTable = tables.find((t) => t.id === connection.target);\n        \n        if (sourceTable && targetTable) {\n          // Find primary key of target table\n          const targetPk = targetTable.columns.find((c) => c.isPrimaryKey);\n          \n          if (targetPk) {\n            // Find or create foreign key column in source table\n            let sourceFk = sourceTable.columns.find((c) => c.isForeignKey);\n            \n            if (!sourceFk) {\n              // Create a new foreign key column\n              const newColumnId = crypto.randomUUID();\n              const newColumn = {\n                id: newColumnId,\n                name: `${targetTable.name.toLowerCase()}_id`,\n                dataType: targetPk.dataType,\n                nullable: true,\n                isPrimaryKey: false,\n                isForeignKey: true,\n                isUnique: false,\n                isAutoIncrement: false,\n              };\n              \n              // Add column to source table\n              const updatedColumns = [...sourceTable.columns, newColumn];\n              updateTable(sourceTable.id, { columns: updatedColumns });\n              sourceFk = newColumn;\n            }\n\n            // Create the relation\n            addRelation({\n              type: 'ONE_TO_MANY',\n              sourceTableId: connection.source,\n              sourceColumnId: sourceFk.id,\n              targetTableId: connection.target,\n              targetColumnId: targetPk.id,\n              onDelete: 'CASCADE',\n              onUpdate: 'CASCADE',\n            });\n          }\n        }\n      }\n\n      setEdges((eds) => addEdge(connection, eds));\n    },\n    [addRelation, setEdges, tables, updateTable]\n  );\n\n  // Handle node drag stop (update position in store)\n  const onNodeDragStop = useCallback(\n    (_: React.MouseEvent, node: TableNodeType) => {\n      updateTable(node.id, { position: node.position });\n    },\n    [updateTable]\n  );\n\n  // Handle pane click (deselect)\n  const onPaneClick = useCallback(() => {\n    clearSelection();\n  }, [clearSelection]);\n\n  // Handle node click\n  const onNodeClick = useCallback(\n    (_: React.MouseEvent, node: TableNodeType) => {\n      selectTable(node.id);\n    },\n    [selectTable]\n  );\n\n  // Handle edge click\n  const onEdgeClick = useCallback(\n    (_: React.MouseEvent, edge: RelationEdgeType) => {\n      const relationId = edge.data?.relationId;\n      if (relationId) {\n        selectRelation(relationId);\n      }\n    },\n    [selectRelation]\n  );\n\n  // Add new table at center of viewport\n  const handleAddTable = useCallback(() => {\n    // Get the container dimensions\n    const wrapper = reactFlowWrapper.current;\n    if (wrapper) {\n      const { width, height } = wrapper.getBoundingClientRect();\n      const centerPosition = screenToFlowPosition({\n        x: width / 2,\n        y: height / 2,\n      });\n      addTable({ x: centerPosition.x - 120, y: centerPosition.y - 100 });\n    } else {\n      // Fallback to default position\n      addTable({ x: 100, y: 100 });\n    }\n  }, [addTable, screenToFlowPosition]);\n\n  // Export as PNG\n  const handleExportImage = useCallback(async () => {\n    if (reactFlowWrapper.current) {\n      const dataUrl = await toPng(reactFlowWrapper.current, {\n        backgroundColor: '#0f172a',\n      });\n      const link = document.createElement('a');\n      link.download = 'erd-diagram.png';\n      link.href = dataUrl;\n      link.click();\n    }\n  }, []);\n\n  // Export as JSON\n  const handleExportJSON = useCallback(() => {\n    const json = exportToJSON();\n    const blob = new Blob([json], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.download = 'erd-schema.json';\n    link.href = url;\n    link.click();\n    URL.revokeObjectURL(url);\n  }, [exportToJSON]);\n\n  // Export as SQL\n  const handleExportSQL = useCallback(() => {\n    const sql = exportToSQL();\n    const blob = new Blob([sql], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.download = 'schema.sql';\n    link.href = url;\n    link.click();\n    URL.revokeObjectURL(url);\n  }, [exportToSQL]);\n\n  // Import JSON\n  const handleImportJSON = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        try {\n          const json = event.target?.result as string;\n          importFromJSON(json);\n        } catch (error) {\n          alert('Invalid JSON file');\n        }\n      };\n      reader.readAsText(file);\n    }\n    e.target.value = '';\n  }, [importFromJSON]);\n\n  return (\n    <div className=\"relative w-full h-full\" ref={reactFlowWrapper}>\n      <ReactFlow\n        nodes={nodes}\n        edges={edges}\n        onNodesChange={onNodesChange}\n        onEdgesChange={onEdgesChange}\n        onConnect={onConnect}\n        onNodeDragStop={onNodeDragStop}\n        onPaneClick={onPaneClick}\n        onNodeClick={onNodeClick}\n        onEdgeClick={onEdgeClick}\n        nodeTypes={nodeTypes}\n        edgeTypes={edgeTypes}\n        connectionMode={ConnectionMode.Loose}\n        fitView\n        fitViewOptions={{ padding: 0.2 }}\n        defaultEdgeOptions={{\n          type: 'relation',\n        }}\n        snapToGrid\n        snapGrid={[15, 15]}\n        className=\"bg-slate-950\"\n      >\n        {showGrid && (\n          <Background\n            variant={BackgroundVariant.Dots}\n            gap={20}\n            size={1}\n            color=\"rgba(148, 163, 184, 0.15)\"\n            className=\"bg-slate-950\"\n          />\n        )}\n\n        <Controls \n          className=\"!bg-slate-800/80 !border-slate-700 !shadow-xl !rounded-xl overflow-hidden\"\n          showInteractive={false}\n        />\n\n        {showMiniMap && (\n          <MiniMap\n            className=\"!bg-slate-800/80 !border-slate-700 !rounded-xl !shadow-xl !overflow-hidden\"\n            nodeStrokeWidth={3}\n            zoomable\n            pannable\n            maskColor=\"rgba(15, 23, 42, 0.7)\"\n            nodeColor={(node) => {\n              const table = tables.find((t) => t.id === node.id);\n              return table?.color || '#64748B';\n            }}\n          />\n        )}\n\n        {/* Toolbar */}\n        <Panel position=\"top-left\" className=\"m-4\">\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"flex items-center gap-2 p-2 bg-slate-800/90 backdrop-blur-sm rounded-xl border border-slate-700 shadow-2xl\"\n          >\n            <button\n              onClick={handleAddTable}\n              className=\"flex items-center gap-2 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-all\"\n            >\n              <Plus className=\"w-4 h-4\" />\n              New Table\n            </button>\n\n            <div className=\"w-px h-6 bg-slate-600 mx-1\" />\n\n            <button\n              onClick={() => zoomOut()}\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\n              title=\"Zoom Out\"\n            >\n              <ZoomOut className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => fitView({ padding: 0.2 })}\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\n              title=\"Fit View\"\n            >\n              <Maximize className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => zoomIn()}\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\n              title=\"Zoom In\"\n            >\n              <ZoomIn className=\"w-4 h-4\" />\n            </button>\n\n            <div className=\"w-px h-6 bg-slate-600 mx-1\" />\n\n            <button\n              onClick={() => setShowGrid(!showGrid)}\n              className={cn(\n                \"p-2 rounded-lg transition-colors\",\n                showGrid \n                  ? \"text-blue-400 bg-blue-500/20\" \n                  : \"text-slate-400 hover:text-white hover:bg-white/10\"\n              )}\n              title=\"Toggle Grid\"\n            >\n              <Grid3X3 className=\"w-4 h-4\" />\n            </button>\n          </motion.div>\n        </Panel>\n\n        {/* Export/Import Panel */}\n        <Panel position=\"top-right\" className=\"m-4\">\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"flex flex-col gap-2\"\n          >\n            <div className=\"flex items-center gap-2 p-2 bg-slate-800/90 backdrop-blur-sm rounded-xl border border-slate-700 shadow-2xl\">\n              <label className=\"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm cursor-pointer transition-colors\">\n                <FileJson className=\"w-4 h-4\" />\n                Import\n                <input\n                  type=\"file\"\n                  accept=\".json\"\n                  onChange={handleImportJSON}\n                  className=\"hidden\"\n                />\n              </label>\n\n              <div className=\"w-px h-6 bg-slate-600\" />\n\n              <button\n                onClick={handleExportJSON}\n                className=\"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-colors\"\n                title=\"Export as JSON\"\n              >\n                <FileJson className=\"w-4 h-4\" />\n                JSON\n              </button>\n              <button\n                onClick={handleExportSQL}\n                className=\"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-colors\"\n                title=\"Export as SQL\"\n              >\n                <FileCode className=\"w-4 h-4\" />\n                SQL\n              </button>\n              <button\n                onClick={handleExportImage}\n                className=\"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-colors\"\n                title=\"Export as Image\"\n              >\n                <Download className=\"w-4 h-4\" />\n                PNG\n              </button>\n\n              <div className=\"w-px h-6 bg-slate-600\" />\n\n              <button\n                onClick={() => {\n                  if (confirm('Are you sure you want to clear all tables?')) {\n                    clearAll();\n                  }\n                }}\n                className=\"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors\"\n                title=\"Clear All\"\n              >\n                <Trash2 className=\"w-4 h-4\" />\n              </button>\n            </div>\n\n            {/* Stats */}\n            <div className=\"flex justify-end\">\n              <div className=\"px-3 py-1.5 bg-slate-800/60 backdrop-blur-sm rounded-lg border border-slate-700/50\">\n                <span className=\"text-xs text-slate-400\">\n                  {tables.length} table{tables.length !== 1 ? 's' : ''}  {relations.length} relation{relations.length !== 1 ? 's' : ''}\n                </span>\n              </div>\n            </div>\n          </motion.div>\n        </Panel>\n      </ReactFlow>\n    </div>\n  );\n}\n\nexport default function ERDCanvas() {\n  return (\n    <ReactFlowProvider>\n      <ERDCanvasContent />\n    </ReactFlowProvider>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2436, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/erd/PropertiesPanel.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useERDStore } from '@/store/erdStore';\nimport { cn } from '@/lib/utils';\nimport { \n  X, \n  Settings2, \n  Key, \n  Link2, \n  Hash,\n  Type,\n  AlignLeft,\n  ToggleLeft,\n  Trash2,\n  Plus,\n  ChevronDown,\n  ChevronUp,\n  AlertCircle\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { DATA_TYPES, type DataType, type RelationType } from '@/types';\n\nexport default function PropertiesPanel() {\n  const [activeTab, setActiveTab] = useState<'table' | 'column' | 'relation'>('table');\n  \n  const {\n    tables,\n    relations,\n    selectedTableId,\n    selectedRelationId,\n    selectedColumnId,\n    updateTable,\n    updateColumn,\n    deleteColumn,\n    updateRelation,\n    deleteRelation,\n    selectTable,\n    clearSelection,\n  } = useERDStore();\n\n  const selectedTable = tables.find((t) => t.id === selectedTableId);\n  const selectedColumn = selectedTable?.columns.find((c) => c.id === selectedColumnId);\n  const selectedRelation = relations.find((r) => r.id === selectedRelationId);\n\n  // Update active tab based on selection\n  if (selectedRelation && activeTab !== 'relation') {\n    setActiveTab('relation');\n  } else if (selectedColumn && activeTab !== 'column') {\n    setActiveTab('column');\n  } else if (selectedTable && activeTab !== 'table' && !selectedColumn && !selectedRelation) {\n    setActiveTab('table');\n  }\n\n  const hasSelection = selectedTable || selectedRelation;\n\n  if (!hasSelection) {\n    return (\n      <motion.div\n        initial={{ opacity: 0, x: 20 }}\n        animate={{ opacity: 1, x: 0 }}\n        className=\"w-full h-full bg-slate-900/95 backdrop-blur-sm flex flex-col\"\n      >\n        <div className=\"flex items-center justify-between px-4 py-3 border-b border-slate-800\">\n          <h2 className=\"font-semibold text-slate-200\">Properties</h2>\n        </div>\n        <div className=\"flex-1 flex flex-col items-center justify-center p-8 text-center\">\n          <div className=\"w-16 h-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4\">\n            <Settings2 className=\"w-8 h-8 text-slate-500\" />\n          </div>\n          <p className=\"text-slate-400 text-sm\">\n            Select a table, column, or relation to edit its properties\n          </p>\n          <div className=\"mt-6 space-y-2 text-xs text-slate-500\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded bg-blue-500/20 flex items-center justify-center\">\n                <Plus className=\"w-2.5 h-2.5 text-blue-400\" />\n              </div>\n              <span>Click &quot;New Table&quot; to add a table</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded bg-slate-700 flex items-center justify-center\">\n                <div className=\"w-2 h-2 rounded-full bg-slate-400\" />\n              </div>\n              <span>Drag handles to connect tables</span>\n            </div>\n          </div>\n        </div>\n      </motion.div>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: 20 }}\n      animate={{ opacity: 1, x: 0 }}\n      className=\"w-full h-full bg-slate-900/95 backdrop-blur-sm flex flex-col\"\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-slate-800\">\n        <div className=\"flex items-center gap-2\">\n          {selectedRelation ? (\n            <>\n              <Link2 className=\"w-4 h-4 text-blue-400\" />\n              <h2 className=\"font-semibold text-slate-200\">Relation</h2>\n            </>\n          ) : selectedColumn ? (\n            <>\n              <div className=\"w-4 h-4 rounded bg-slate-700 flex items-center justify-center\">\n                <div className=\"w-2 h-2 rounded-full bg-amber-400\" />\n              </div>\n              <h2 className=\"font-semibold text-slate-200\">Column</h2>\n            </>\n          ) : (\n            <>\n              <div \n                className=\"w-4 h-4 rounded\"\n                style={{ backgroundColor: selectedTable?.color || '#64748B' }}\n              />\n              <h2 className=\"font-semibold text-slate-200\">Table</h2>\n            </>\n          )}\n        </div>\n        <button\n          onClick={clearSelection}\n          className=\"p-1.5 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors\"\n        >\n          <X className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        <AnimatePresence mode=\"wait\">\n          {/* Relation Properties */}\n          {selectedRelation && (\n            <motion.div\n              key=\"relation\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-4\"\n            >\n              {/* Relation Type */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 uppercase tracking-wider mb-2 block\">\n                  Relation Type\n                </label>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {(['ONE_TO_ONE', 'ONE_TO_MANY', 'MANY_TO_MANY'] as RelationType[]).map((type) => (\n                    <button\n                      key={type}\n                      onClick={() => updateRelation(selectedRelation.id, { type })}\n                      className={cn(\n                        'px-2 py-2 rounded-lg text-xs font-medium transition-all',\n                        selectedRelation.type === type\n                          ? 'bg-blue-500 text-white'\n                          : 'bg-slate-800 text-slate-400 hover:bg-slate-700'\n                      )}\n                    >\n                      {type === 'ONE_TO_ONE' && '1:1'}\n                      {type === 'ONE_TO_MANY' && '1:N'}\n                      {type === 'MANY_TO_MANY' && 'N:N'}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Source & Target */}\n              <div className=\"space-y-3\">\n                <div className=\"p-3 bg-slate-800/50 rounded-lg border border-slate-700/50\">\n                  <span className=\"text-[10px] text-slate-500 uppercase tracking-wider\">From</span>\n                  <div className=\"mt-1\">\n                    {(() => {\n                      const table = tables.find(t => t.id === selectedRelation.sourceTableId);\n                      const column = table?.columns.find(c => c.id === selectedRelation.sourceColumnId);\n                      return (\n                        <div className=\"text-sm text-slate-200\">\n                          <span className=\"font-medium\">{table?.name}</span>\n                          <span className=\"text-slate-500 mx-1\">.</span>\n                          <span className=\"text-blue-400\">{column?.name}</span>\n                        </div>\n                      );\n                    })()}\n                  </div>\n                </div>\n\n                <div className=\"p-3 bg-slate-800/50 rounded-lg border border-slate-700/50\">\n                  <span className=\"text-[10px] text-slate-500 uppercase tracking-wider\">To</span>\n                  <div className=\"mt-1\">\n                    {(() => {\n                      const table = tables.find(t => t.id === selectedRelation.targetTableId);\n                      const column = table?.columns.find(c => c.id === selectedRelation.targetColumnId);\n                      return (\n                        <div className=\"text-sm text-slate-200\">\n                          <span className=\"font-medium\">{table?.name}</span>\n                          <span className=\"text-slate-500 mx-1\">.</span>\n                          <span className=\"text-amber-400\">{column?.name}</span>\n                        </div>\n                      );\n                    })()}\n                  </div>\n                </div>\n              </div>\n\n              {/* ON DELETE / ON UPDATE */}\n              <div className=\"space-y-3\">\n                <div>\n                  <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">On Delete</label>\n                  <select\n                    value={selectedRelation.onDelete || 'CASCADE'}\n                    onChange={(e) => updateRelation(selectedRelation.id, { onDelete: e.target.value as any })}\n                    className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n                  >\n                    <option value=\"CASCADE\">CASCADE</option>\n                    <option value=\"SET_NULL\">SET NULL</option>\n                    <option value=\"RESTRICT\">RESTRICT</option>\n                    <option value=\"NO_ACTION\">NO ACTION</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">On Update</label>\n                  <select\n                    value={selectedRelation.onUpdate || 'CASCADE'}\n                    onChange={(e) => updateRelation(selectedRelation.id, { onUpdate: e.target.value as any })}\n                    className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n                  >\n                    <option value=\"CASCADE\">CASCADE</option>\n                    <option value=\"SET_NULL\">SET NULL</option>\n                    <option value=\"RESTRICT\">RESTRICT</option>\n                    <option value=\"NO_ACTION\">NO ACTION</option>\n                  </select>\n                </div>\n              </div>\n\n              {/* Delete Button */}\n              <button\n                onClick={() => deleteRelation(selectedRelation.id)}\n                className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg text-sm font-medium transition-colors\"\n              >\n                <Trash2 className=\"w-4 h-4\" />\n                Delete Relation\n              </button>\n            </motion.div>\n          )}\n\n          {/* Column Properties */}\n          {selectedColumn && selectedTable && (\n            <motion.div\n              key=\"column\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-4\"\n            >\n              {/* Column Name */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">Column Name</label>\n                <input\n                  type=\"text\"\n                  value={selectedColumn.name}\n                  onChange={(e) => updateColumn(selectedTable.id, selectedColumn.id, { name: e.target.value })}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n                  placeholder=\"column_name\"\n                />\n              </div>\n\n              {/* Data Type */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">Data Type</label>\n                <select\n                  value={selectedColumn.dataType}\n                  onChange={(e) => updateColumn(selectedTable.id, selectedColumn.id, { \n                    dataType: e.target.value as DataType \n                  })}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n                >\n                  {DATA_TYPES.map((dt) => (\n                    <option key={dt.type} value={dt.type}>\n                      {dt.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              {/* Length / Precision */}\n              {DATA_TYPES.find(dt => dt.type === selectedColumn.dataType)?.hasLength && (\n                <div>\n                  <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">Length</label>\n                  <input\n                    type=\"number\"\n                    value={selectedColumn.length || ''}\n                    onChange={(e) => updateColumn(selectedTable.id, selectedColumn.id, { \n                      length: e.target.value ? parseInt(e.target.value) : undefined \n                    })}\n                    className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n                    placeholder=\"255\"\n                  />\n                </div>\n              )}\n\n              {DATA_TYPES.find(dt => dt.type === selectedColumn.dataType)?.hasPrecision && (\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <div>\n                    <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">Precision</label>\n                    <input\n                      type=\"number\"\n                      value={selectedColumn.precision || ''}\n                      onChange={(e) => updateColumn(selectedTable.id, selectedColumn.id, { \n                        precision: e.target.value ? parseInt(e.target.value) : undefined \n                      })}\n                      className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">Scale</label>\n                    <input\n                      type=\"number\"\n                      value={selectedColumn.scale || ''}\n                      onChange={(e) => updateColumn(selectedTable.id, selectedColumn.id, { \n                        scale: e.target.value ? parseInt(e.target.value) : undefined \n                      })}\n                      className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n                    />\n                  </div>\n                </div>\n              )}\n\n              {/* Constraints */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 uppercase tracking-wider mb-2 block\">\n                  Constraints\n                </label>\n                <div className=\"space-y-2\">\n                  <label className=\"flex items-center gap-3 p-2.5 bg-slate-800/50 rounded-lg cursor-pointer hover:bg-slate-800 transition-colors\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedColumn.isPrimaryKey}\n                      onChange={(e) => updateColumn(selectedTable.id, selectedColumn.id, { \n                        isPrimaryKey: e.target.checked \n                      })}\n                      className=\"w-4 h-4 rounded border-slate-600 bg-slate-700 text-amber-500 focus:ring-amber-500/50\"\n                    />\n                    <div className=\"flex items-center gap-2\">\n                      <Key className=\"w-4 h-4 text-amber-400\" />\n                      <span className=\"text-sm text-slate-300\">Primary Key</span>\n                    </div>\n                  </label>\n\n                  <label className=\"flex items-center gap-3 p-2.5 bg-slate-800/50 rounded-lg cursor-pointer hover:bg-slate-800 transition-colors\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedColumn.isUnique}\n                      onChange={(e) => updateColumn(selectedTable.id, selectedColumn.id, { \n                        isUnique: e.target.checked \n                      })}\n                      className=\"w-4 h-4 rounded border-slate-600 bg-slate-700 text-purple-500 focus:ring-purple-500/50\"\n                    />\n                    <div className=\"flex items-center gap-2\">\n                      <Hash className=\"w-4 h-4 text-purple-400\" />\n                      <span className=\"text-sm text-slate-300\">Unique</span>\n                    </div>\n                  </label>\n\n                  <label className=\"flex items-center gap-3 p-2.5 bg-slate-800/50 rounded-lg cursor-pointer hover:bg-slate-800 transition-colors\">\n                    <input\n                      type=\"checkbox\"\n                      checked={!selectedColumn.nullable}\n                      onChange={(e) => updateColumn(selectedTable.id, selectedColumn.id, { \n                        nullable: !e.target.checked \n                      })}\n                      className=\"w-4 h-4 rounded border-slate-600 bg-slate-700 text-red-500 focus:ring-red-500/50\"\n                    />\n                    <div className=\"flex items-center gap-2\">\n                      <AlertCircle className=\"w-4 h-4 text-red-400\" />\n                      <span className=\"text-sm text-slate-300\">Required (NOT NULL)</span>\n                    </div>\n                  </label>\n\n                  <label className=\"flex items-center gap-3 p-2.5 bg-slate-800/50 rounded-lg cursor-pointer hover:bg-slate-800 transition-colors\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedColumn.isAutoIncrement}\n                      onChange={(e) => updateColumn(selectedTable.id, selectedColumn.id, { \n                        isAutoIncrement: e.target.checked \n                      })}\n                      className=\"w-4 h-4 rounded border-slate-600 bg-slate-700 text-green-500 focus:ring-green-500/50\"\n                    />\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"w-4 h-4 rounded flex items-center justify-center bg-green-500/20 text-green-400 text-[10px] font-bold\">+</div>\n                      <span className=\"text-sm text-slate-300\">Auto Increment</span>\n                    </div>\n                  </label>\n                </div>\n              </div>\n\n              {/* Default Value */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">Default Value</label>\n                <input\n                  type=\"text\"\n                  value={selectedColumn.defaultValue || ''}\n                  onChange={(e) => updateColumn(selectedTable.id, selectedColumn.id, { \n                    defaultValue: e.target.value || undefined \n                  })}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n                  placeholder=\"NULL\"\n                />\n              </div>\n\n              {/* Comment */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">Comment</label>\n                <textarea\n                  value={selectedColumn.comment || ''}\n                  onChange={(e) => updateColumn(selectedTable.id, selectedColumn.id, { \n                    comment: e.target.value || undefined \n                  })}\n                  rows={2}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 resize-none\"\n                  placeholder=\"Column description...\"\n                />\n              </div>\n\n              {/* Delete Button */}\n              {!selectedColumn.isPrimaryKey && (\n                <button\n                  onClick={() => deleteColumn(selectedTable.id, selectedColumn.id)}\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg text-sm font-medium transition-colors\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  Delete Column\n                </button>\n              )}\n            </motion.div>\n          )}\n\n          {/* Table Properties */}\n          {selectedTable && !selectedColumn && (\n            <motion.div\n              key=\"table\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-4\"\n            >\n              {/* Table Name */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">Table Name</label>\n                <input\n                  type=\"text\"\n                  value={selectedTable.name}\n                  onChange={(e) => updateTable(selectedTable.id, { name: e.target.value })}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n                  placeholder=\"table_name\"\n                />\n              </div>\n\n              {/* Color */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">Color</label>\n                <div className=\"flex flex-wrap gap-2\">\n                  {['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899', '#06B6D4', '#84CC16', '#F97316', '#6366F1', '#14B8A6', '#A855F7'].map((color) => (\n                    <button\n                      key={color}\n                      onClick={() => updateTable(selectedTable.id, { color })}\n                      className={cn(\n                        'w-7 h-7 rounded-lg transition-all hover:scale-110',\n                        selectedTable.color === color \n                          ? 'ring-2 ring-white shadow-lg' \n                          : 'hover:ring-2 hover:ring-white/50'\n                      )}\n                      style={{ backgroundColor: color }}\n                    />\n                  ))}\n                </div>\n              </div>\n\n              {/* Comment */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">Comment</label>\n                <textarea\n                  value={selectedTable.comment || ''}\n                  onChange={(e) => updateTable(selectedTable.id, { comment: e.target.value || undefined })}\n                  rows={3}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 resize-none\"\n                  placeholder=\"Table description...\"\n                />\n              </div>\n\n              {/* Columns List */}\n              <div>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <label className=\"text-xs font-medium text-slate-400 uppercase tracking-wider\">\n                    Columns\n                  </label>\n                  <span className=\"text-xs text-slate-500\">{selectedTable.columns.length} total</span>\n                </div>\n                <div className=\"space-y-1\">\n                  {selectedTable.columns.map((column, index) => (\n                    <div\n                      key={column.id}\n                      onClick={() => selectTable(selectedTable.id)}\n                      className={cn(\n                        'flex items-center gap-2 px-3 py-2 rounded-lg text-sm cursor-pointer transition-colors',\n                        'hover:bg-slate-800/50',\n                        selectedColumnId === column.id && 'bg-slate-800 ring-1 ring-blue-500/50'\n                      )}\n                    >\n                      <span className=\"text-xs text-slate-500 w-5\">{index + 1}</span>\n                      {column.isPrimaryKey && <Key className=\"w-3.5 h-3.5 text-amber-400\" />}\n                      {column.isForeignKey && <Link2 className=\"w-3.5 h-3.5 text-blue-400\" />}\n                      {!column.isPrimaryKey && !column.isForeignKey && <div className=\"w-3.5\" />}\n                      <span className={cn(\n                        'flex-1',\n                        column.isPrimaryKey ? 'text-amber-100 font-medium' : 'text-slate-300'\n                      )}>\n                        {column.name}\n                      </span>\n                      <span className=\"text-xs text-slate-500\">{column.dataType}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAAA;AACA;;;AArBA;;;;;;;AAuBe,SAAS;;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAkC;IAE5E,MAAM,EACJ,MAAM,EACN,SAAS,EACT,eAAe,EACf,kBAAkB,EAClB,gBAAgB,EAChB,WAAW,EACX,YAAY,EACZ,YAAY,EACZ,cAAc,EACd,cAAc,EACd,WAAW,EACX,cAAc,EACf,GAAG,IAAA,0IAAW;IAEf,MAAM,gBAAgB,OAAO,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAClD,MAAM,iBAAiB,eAAe,QAAQ,KAAK,CAAC,IAAM,EAAE,EAAE,KAAK;IACnE,MAAM,mBAAmB,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAExD,uCAAuC;IACvC,IAAI,oBAAoB,cAAc,YAAY;QAChD,aAAa;IACf,OAAO,IAAI,kBAAkB,cAAc,UAAU;QACnD,aAAa;IACf,OAAO,IAAI,iBAAiB,cAAc,WAAW,CAAC,kBAAkB,CAAC,kBAAkB;QACzF,aAAa;IACf;IAEA,MAAM,eAAe,iBAAiB;IAEtC,IAAI,CAAC,cAAc;QACjB,qBACE,6LAAC,uMAAM,CAAC,GAAG;YACT,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAG;YAC7B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,WAAU;;8BAEV,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAG,WAAU;kCAA+B;;;;;;;;;;;8BAE/C,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,gOAAS;gCAAC,WAAU;;;;;;;;;;;sCAEvB,6LAAC;4BAAE,WAAU;sCAAyB;;;;;;sCAGtC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC,6MAAI;gDAAC,WAAU;;;;;;;;;;;sDAElB,6LAAC;sDAAK;;;;;;;;;;;;8CAER,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC;gDAAI,WAAU;;;;;;;;;;;sDAEjB,6LAAC;sDAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAMlB;IAEA,qBACE,6LAAC,uMAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,WAAU;;0BAGV,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACZ,iCACC;;8CACE,6LAAC,oNAAK;oCAAC,WAAU;;;;;;8CACjB,6LAAC;oCAAG,WAAU;8CAA+B;;;;;;;2CAE7C,+BACF;;8CACE,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAI,WAAU;;;;;;;;;;;8CAEjB,6LAAC;oCAAG,WAAU;8CAA+B;;;;;;;yDAG/C;;8CACE,6LAAC;oCACC,WAAU;oCACV,OAAO;wCAAE,iBAAiB,eAAe,SAAS;oCAAU;;;;;;8CAE9D,6LAAC;oCAAG,WAAU;8CAA+B;;;;;;;;;;;;;kCAInD,6LAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,6LAAC,oMAAC;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAKjB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,+MAAe;oBAAC,MAAK;;wBAEnB,kCACC,6LAAC,uMAAM,CAAC,GAAG;4BAET,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAG;4BAC7B,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAE;4BAC5B,MAAM;gCAAE,SAAS;gCAAG,GAAG,CAAC;4BAAG;4BAC3B,WAAU;;8CAGV,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAyE;;;;;;sDAG1F,6LAAC;4CAAI,WAAU;sDACZ,AAAC;gDAAC;gDAAc;gDAAe;6CAAe,CAAoB,GAAG,CAAC,CAAC,qBACtE,6LAAC;oDAEC,SAAS,IAAM,eAAe,iBAAiB,EAAE,EAAE;4DAAE;wDAAK;oDAC1D,WAAW,IAAA,4HAAE,EACX,2DACA,iBAAiB,IAAI,KAAK,OACtB,2BACA;;wDAGL,SAAS,gBAAgB;wDACzB,SAAS,iBAAiB;wDAC1B,SAAS,kBAAkB;;mDAXvB;;;;;;;;;;;;;;;;8CAkBb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAK,WAAU;8DAAsD;;;;;;8DACtE,6LAAC;oDAAI,WAAU;8DACZ,CAAC;wDACA,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,iBAAiB,aAAa;wDACtE,MAAM,SAAS,OAAO,QAAQ,KAAK,CAAA,IAAK,EAAE,EAAE,KAAK,iBAAiB,cAAc;wDAChF,qBACE,6LAAC;4DAAI,WAAU;;8EACb,6LAAC;oEAAK,WAAU;8EAAe,OAAO;;;;;;8EACtC,6LAAC;oEAAK,WAAU;8EAAsB;;;;;;8EACtC,6LAAC;oEAAK,WAAU;8EAAiB,QAAQ;;;;;;;;;;;;oDAG/C,CAAC;;;;;;;;;;;;sDAIL,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAK,WAAU;8DAAsD;;;;;;8DACtE,6LAAC;oDAAI,WAAU;8DACZ,CAAC;wDACA,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,iBAAiB,aAAa;wDACtE,MAAM,SAAS,OAAO,QAAQ,KAAK,CAAA,IAAK,EAAE,EAAE,KAAK,iBAAiB,cAAc;wDAChF,qBACE,6LAAC;4DAAI,WAAU;;8EACb,6LAAC;oEAAK,WAAU;8EAAe,OAAO;;;;;;8EACtC,6LAAC;oEAAK,WAAU;8EAAsB;;;;;;8EACtC,6LAAC;oEAAK,WAAU;8EAAkB,QAAQ;;;;;;;;;;;;oDAGhD,CAAC;;;;;;;;;;;;;;;;;;8CAMP,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;;8DACC,6LAAC;oDAAM,WAAU;8DAAkD;;;;;;8DACnE,6LAAC;oDACC,OAAO,iBAAiB,QAAQ,IAAI;oDACpC,UAAU,CAAC,IAAM,eAAe,iBAAiB,EAAE,EAAE;4DAAE,UAAU,EAAE,MAAM,CAAC,KAAK;wDAAQ;oDACvF,WAAU;;sEAEV,6LAAC;4DAAO,OAAM;sEAAU;;;;;;sEACxB,6LAAC;4DAAO,OAAM;sEAAW;;;;;;sEACzB,6LAAC;4DAAO,OAAM;sEAAW;;;;;;sEACzB,6LAAC;4DAAO,OAAM;sEAAY;;;;;;;;;;;;;;;;;;sDAI9B,6LAAC;;8DACC,6LAAC;oDAAM,WAAU;8DAAkD;;;;;;8DACnE,6LAAC;oDACC,OAAO,iBAAiB,QAAQ,IAAI;oDACpC,UAAU,CAAC,IAAM,eAAe,iBAAiB,EAAE,EAAE;4DAAE,UAAU,EAAE,MAAM,CAAC,KAAK;wDAAQ;oDACvF,WAAU;;sEAEV,6LAAC;4DAAO,OAAM;sEAAU;;;;;;sEACxB,6LAAC;4DAAO,OAAM;sEAAW;;;;;;sEACzB,6LAAC;4DAAO,OAAM;sEAAW;;;;;;sEACzB,6LAAC;4DAAO,OAAM;sEAAY;;;;;;;;;;;;;;;;;;;;;;;;8CAMhC,6LAAC;oCACC,SAAS,IAAM,eAAe,iBAAiB,EAAE;oCACjD,WAAU;;sDAEV,6LAAC,uNAAM;4CAAC,WAAU;;;;;;wCAAY;;;;;;;;2BAxG5B;;;;;wBA+GP,kBAAkB,+BACjB,6LAAC,uMAAM,CAAC,GAAG;4BAET,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAG;4BAC7B,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAE;4BAC5B,MAAM;gCAAE,SAAS;gCAAG,GAAG,CAAC;4BAAG;4BAC3B,WAAU;;8CAGV,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAkD;;;;;;sDACnE,6LAAC;4CACC,MAAK;4CACL,OAAO,eAAe,IAAI;4CAC1B,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,EAAE,eAAe,EAAE,EAAE;oDAAE,MAAM,EAAE,MAAM,CAAC,KAAK;gDAAC;4CAC1F,WAAU;4CACV,aAAY;;;;;;;;;;;;8CAKhB,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAkD;;;;;;sDACnE,6LAAC;4CACC,OAAO,eAAe,QAAQ;4CAC9B,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,EAAE,eAAe,EAAE,EAAE;oDACjE,UAAU,EAAE,MAAM,CAAC,KAAK;gDAC1B;4CACA,WAAU;sDAET,sJAAU,CAAC,GAAG,CAAC,CAAC,mBACf,6LAAC;oDAAqB,OAAO,GAAG,IAAI;8DACjC,GAAG,KAAK;mDADE,GAAG,IAAI;;;;;;;;;;;;;;;;gCAQzB,sJAAU,CAAC,IAAI,CAAC,CAAA,KAAM,GAAG,IAAI,KAAK,eAAe,QAAQ,GAAG,2BAC3D,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAkD;;;;;;sDACnE,6LAAC;4CACC,MAAK;4CACL,OAAO,eAAe,MAAM,IAAI;4CAChC,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,EAAE,eAAe,EAAE,EAAE;oDACjE,QAAQ,EAAE,MAAM,CAAC,KAAK,GAAG,SAAS,EAAE,MAAM,CAAC,KAAK,IAAI;gDACtD;4CACA,WAAU;4CACV,aAAY;;;;;;;;;;;;gCAKjB,sJAAU,CAAC,IAAI,CAAC,CAAA,KAAM,GAAG,IAAI,KAAK,eAAe,QAAQ,GAAG,8BAC3D,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;;8DACC,6LAAC;oDAAM,WAAU;8DAAkD;;;;;;8DACnE,6LAAC;oDACC,MAAK;oDACL,OAAO,eAAe,SAAS,IAAI;oDACnC,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,EAAE,eAAe,EAAE,EAAE;4DACjE,WAAW,EAAE,MAAM,CAAC,KAAK,GAAG,SAAS,EAAE,MAAM,CAAC,KAAK,IAAI;wDACzD;oDACA,WAAU;;;;;;;;;;;;sDAGd,6LAAC;;8DACC,6LAAC;oDAAM,WAAU;8DAAkD;;;;;;8DACnE,6LAAC;oDACC,MAAK;oDACL,OAAO,eAAe,KAAK,IAAI;oDAC/B,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,EAAE,eAAe,EAAE,EAAE;4DACjE,OAAO,EAAE,MAAM,CAAC,KAAK,GAAG,SAAS,EAAE,MAAM,CAAC,KAAK,IAAI;wDACrD;oDACA,WAAU;;;;;;;;;;;;;;;;;;8CAOlB,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAyE;;;;;;sDAG1F,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAM,WAAU;;sEACf,6LAAC;4DACC,MAAK;4DACL,SAAS,eAAe,YAAY;4DACpC,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,EAAE,eAAe,EAAE,EAAE;oEACjE,cAAc,EAAE,MAAM,CAAC,OAAO;gEAChC;4DACA,WAAU;;;;;;sEAEZ,6LAAC;4DAAI,WAAU;;8EACb,6LAAC,0MAAG;oEAAC,WAAU;;;;;;8EACf,6LAAC;oEAAK,WAAU;8EAAyB;;;;;;;;;;;;;;;;;;8DAI7C,6LAAC;oDAAM,WAAU;;sEACf,6LAAC;4DACC,MAAK;4DACL,SAAS,eAAe,QAAQ;4DAChC,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,EAAE,eAAe,EAAE,EAAE;oEACjE,UAAU,EAAE,MAAM,CAAC,OAAO;gEAC5B;4DACA,WAAU;;;;;;sEAEZ,6LAAC;4DAAI,WAAU;;8EACb,6LAAC,6MAAI;oEAAC,WAAU;;;;;;8EAChB,6LAAC;oEAAK,WAAU;8EAAyB;;;;;;;;;;;;;;;;;;8DAI7C,6LAAC;oDAAM,WAAU;;sEACf,6LAAC;4DACC,MAAK;4DACL,SAAS,CAAC,eAAe,QAAQ;4DACjC,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,EAAE,eAAe,EAAE,EAAE;oEACjE,UAAU,CAAC,EAAE,MAAM,CAAC,OAAO;gEAC7B;4DACA,WAAU;;;;;;sEAEZ,6LAAC;4DAAI,WAAU;;8EACb,6LAAC,sOAAW;oEAAC,WAAU;;;;;;8EACvB,6LAAC;oEAAK,WAAU;8EAAyB;;;;;;;;;;;;;;;;;;8DAI7C,6LAAC;oDAAM,WAAU;;sEACf,6LAAC;4DACC,MAAK;4DACL,SAAS,eAAe,eAAe;4DACvC,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,EAAE,eAAe,EAAE,EAAE;oEACjE,iBAAiB,EAAE,MAAM,CAAC,OAAO;gEACnC;4DACA,WAAU;;;;;;sEAEZ,6LAAC;4DAAI,WAAU;;8EACb,6LAAC;oEAAI,WAAU;8EAAwG;;;;;;8EACvH,6LAAC;oEAAK,WAAU;8EAAyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8CAOjD,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAkD;;;;;;sDACnE,6LAAC;4CACC,MAAK;4CACL,OAAO,eAAe,YAAY,IAAI;4CACtC,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,EAAE,eAAe,EAAE,EAAE;oDACjE,cAAc,EAAE,MAAM,CAAC,KAAK,IAAI;gDAClC;4CACA,WAAU;4CACV,aAAY;;;;;;;;;;;;8CAKhB,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAkD;;;;;;sDACnE,6LAAC;4CACC,OAAO,eAAe,OAAO,IAAI;4CACjC,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,EAAE,eAAe,EAAE,EAAE;oDACjE,SAAS,EAAE,MAAM,CAAC,KAAK,IAAI;gDAC7B;4CACA,MAAM;4CACN,WAAU;4CACV,aAAY;;;;;;;;;;;;gCAKf,CAAC,eAAe,YAAY,kBAC3B,6LAAC;oCACC,SAAS,IAAM,aAAa,cAAc,EAAE,EAAE,eAAe,EAAE;oCAC/D,WAAU;;sDAEV,6LAAC,uNAAM;4CAAC,WAAU;;;;;;wCAAY;;;;;;;;2BArL9B;;;;;wBA6LP,iBAAiB,CAAC,gCACjB,6LAAC,uMAAM,CAAC,GAAG;4BAET,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAG;4BAC7B,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAE;4BAC5B,MAAM;gCAAE,SAAS;gCAAG,GAAG,CAAC;4BAAG;4BAC3B,WAAU;;8CAGV,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAkD;;;;;;sDACnE,6LAAC;4CACC,MAAK;4CACL,OAAO,cAAc,IAAI;4CACzB,UAAU,CAAC,IAAM,YAAY,cAAc,EAAE,EAAE;oDAAE,MAAM,EAAE,MAAM,CAAC,KAAK;gDAAC;4CACtE,WAAU;4CACV,aAAY;;;;;;;;;;;;8CAKhB,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAgD;;;;;;sDACjE,6LAAC;4CAAI,WAAU;sDACZ;gDAAC;gDAAW;gDAAW;gDAAW;gDAAW;gDAAW;gDAAW;gDAAW;gDAAW;gDAAW;gDAAW;gDAAW;6CAAU,CAAC,GAAG,CAAC,CAAC,sBACzI,6LAAC;oDAEC,SAAS,IAAM,YAAY,cAAc,EAAE,EAAE;4DAAE;wDAAM;oDACrD,WAAW,IAAA,4HAAE,EACX,qDACA,cAAc,KAAK,KAAK,QACpB,gCACA;oDAEN,OAAO;wDAAE,iBAAiB;oDAAM;mDAR3B;;;;;;;;;;;;;;;;8CAeb,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAkD;;;;;;sDACnE,6LAAC;4CACC,OAAO,cAAc,OAAO,IAAI;4CAChC,UAAU,CAAC,IAAM,YAAY,cAAc,EAAE,EAAE;oDAAE,SAAS,EAAE,MAAM,CAAC,KAAK,IAAI;gDAAU;4CACtF,MAAM;4CACN,WAAU;4CACV,aAAY;;;;;;;;;;;;8CAKhB,6LAAC;;sDACC,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAM,WAAU;8DAA8D;;;;;;8DAG/E,6LAAC;oDAAK,WAAU;;wDAA0B,cAAc,OAAO,CAAC,MAAM;wDAAC;;;;;;;;;;;;;sDAEzE,6LAAC;4CAAI,WAAU;sDACZ,cAAc,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,sBAClC,6LAAC;oDAEC,SAAS,IAAM,YAAY,cAAc,EAAE;oDAC3C,WAAW,IAAA,4HAAE,EACX,yFACA,yBACA,qBAAqB,OAAO,EAAE,IAAI;;sEAGpC,6LAAC;4DAAK,WAAU;sEAA8B,QAAQ;;;;;;wDACrD,OAAO,YAAY,kBAAI,6LAAC,0MAAG;4DAAC,WAAU;;;;;;wDACtC,OAAO,YAAY,kBAAI,6LAAC,oNAAK;4DAAC,WAAU;;;;;;wDACxC,CAAC,OAAO,YAAY,IAAI,CAAC,OAAO,YAAY,kBAAI,6LAAC;4DAAI,WAAU;;;;;;sEAChE,6LAAC;4DAAK,WAAW,IAAA,4HAAE,EACjB,UACA,OAAO,YAAY,GAAG,+BAA+B;sEAEpD,OAAO,IAAI;;;;;;sEAEd,6LAAC;4DAAK,WAAU;sEAA0B,OAAO,QAAQ;;;;;;;mDAlBpD,OAAO,EAAE;;;;;;;;;;;;;;;;;2BA7DlB;;;;;;;;;;;;;;;;;;;;;;AA0FlB;GA5fwB;;QAgBlB,0IAAW;;;KAhBO"}},
    {"offset": {"line": 3789, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/erd/Header.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useERDStore } from '@/store/erdStore';\nimport { cn } from '@/lib/utils';\nimport { \n  Database, \n  Github, \n  HelpCircle, \n  Sparkles,\n  ChevronDown,\n  Download,\n  Upload,\n  FileCode,\n  Trash2,\n  Plus,\n  Undo2,\n  Redo2,\n  Settings,\n  Keyboard\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nexport default function Header() {\n  const [showHelp, setShowHelp] = useState(false);\n  const { tables, relations, clearAll, exportToJSON, exportToSQL, importFromJSON } = useERDStore();\n\n  const handleExportJSON = () => {\n    const json = exportToJSON();\n    const blob = new Blob([json], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.download = 'erd-schema.json';\n    link.href = url;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const handleExportSQL = () => {\n    const sql = exportToSQL();\n    const blob = new Blob([sql], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.download = 'schema.sql';\n    link.href = url;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const handleImport = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        try {\n          const json = event.target?.result as string;\n          importFromJSON(json);\n        } catch (error) {\n          alert('Invalid JSON file');\n        }\n      };\n      reader.readAsText(file);\n    }\n    e.target.value = '';\n  };\n\n  return (\n    <header className=\"h-14 bg-slate-900/95 backdrop-blur-sm border-b border-slate-800 flex items-center justify-between px-4 shrink-0\">\n      {/* Logo */}\n      <div className=\"flex items-center gap-3\">\n        <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg shadow-blue-500/20\">\n          <Database className=\"w-4 h-4 text-white\" />\n        </div>\n        <div>\n          <h1 className=\"font-bold text-slate-100 text-sm\">ERD Designer</h1>\n          <p className=\"text-[10px] text-slate-500\">Visual Database Design</p>\n        </div>\n      </div>\n\n      {/* Center - Stats */}\n      <div className=\"hidden md:flex items-center gap-4\">\n        <div className=\"flex items-center gap-2 px-3 py-1.5 bg-slate-800/50 rounded-lg border border-slate-700/50\">\n          <span className=\"text-xs text-slate-400\">Tables:</span>\n          <span className=\"text-xs font-semibold text-slate-200\">{tables.length}</span>\n        </div>\n        <div className=\"flex items-center gap-2 px-3 py-1.5 bg-slate-800/50 rounded-lg border border-slate-700/50\">\n          <span className=\"text-xs text-slate-400\">Relations:</span>\n          <span className=\"text-xs font-semibold text-slate-200\">{relations.length}</span>\n        </div>\n      </div>\n\n      {/* Right - Actions */}\n      <div className=\"flex items-center gap-2\">\n        {/* Import/Export Dropdown */}\n        <div className=\"relative group\">\n          <button className=\"flex items-center gap-2 px-3 py-1.5 text-slate-300 hover:text-white hover:bg-white/5 rounded-lg text-sm transition-colors\">\n            <Download className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline\">Export</span>\n            <ChevronDown className=\"w-3 h-3\" />\n          </button>\n          \n          <div className=\"absolute right-0 top-full mt-1 w-40 bg-slate-800 rounded-xl border border-slate-700 shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50\">\n            <button\n              onClick={handleExportJSON}\n              className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors first:rounded-t-xl\"\n            >\n              <Download className=\"w-4 h-4\" />\n              Export JSON\n            </button>\n            <button\n              onClick={handleExportSQL}\n              className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors last:rounded-b-xl\"\n            >\n              <FileCode className=\"w-4 h-4\" />\n              Export SQL\n            </button>\n          </div>\n        </div>\n\n        <label className=\"flex items-center gap-2 px-3 py-1.5 text-slate-300 hover:text-white hover:bg-white/5 rounded-lg text-sm cursor-pointer transition-colors\">\n          <Upload className=\"w-4 h-4\" />\n          <span className=\"hidden sm:inline\">Import</span>\n          <input\n            type=\"file\"\n            accept=\".json\"\n            onChange={handleImport}\n            className=\"hidden\"\n          />\n        </label>\n\n        <div className=\"w-px h-6 bg-slate-700 mx-1\" />\n\n        {/* Help */}\n        <button\n          onClick={() => setShowHelp(!showHelp)}\n          className={cn(\n            \"p-2 rounded-lg transition-colors\",\n            showHelp ? \"text-blue-400 bg-blue-500/10\" : \"text-slate-400 hover:text-white hover:bg-white/5\"\n          )}\n        >\n          <HelpCircle className=\"w-4 h-4\" />\n        </button>\n\n        {/* GitHub */}\n        <a\n          href=\"https://github.com\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\n        >\n          <Github className=\"w-4 h-4\" />\n        </a>\n      </div>\n\n      {/* Help Modal */}\n      <AnimatePresence>\n        {showHelp && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n            onClick={() => setShowHelp(false)}\n          >\n            <motion.div\n              initial={{ scale: 0.95, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.95, opacity: 0 }}\n              className=\"bg-slate-900 rounded-2xl border border-slate-700 shadow-2xl max-w-lg w-full overflow-hidden\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"p-6\">\n                <div className=\"flex items-center gap-3 mb-6\">\n                  <div className=\"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center\">\n                    <Sparkles className=\"w-5 h-5 text-blue-400\" />\n                  </div>\n                  <div>\n                    <h2 className=\"text-lg font-semibold text-white\">Quick Guide</h2>\n                    <p className=\"text-sm text-slate-400\">Learn how to use ERD Designer</p>\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <div className=\"flex gap-4\">\n                    <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                      <Plus className=\"w-5 h-5 text-blue-400\" />\n                    </div>\n                    <div>\n                      <h3 className=\"font-medium text-slate-200\">Create Tables</h3>\n                      <p className=\"text-sm text-slate-400\">Click &quot;New Table&quot; button or double-click on canvas to create a new table.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-4\">\n                    <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                      <div className=\"w-5 h-5 rounded-full border-2 border-purple-400 flex items-center justify-center\">\n                        <div className=\"w-2 h-2 rounded-full bg-purple-400\" />\n                      </div>\n                    </div>\n                    <div>\n                      <h3 className=\"font-medium text-slate-200\">Connect Tables</h3>\n                      <p className=\"text-sm text-slate-400\">Drag from one table&apos;s handle to another to create relationships.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-4\">\n                    <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                      <Settings className=\"w-5 h-5 text-green-400\" />\n                    </div>\n                    <div>\n                      <h3 className=\"font-medium text-slate-200\">Edit Properties</h3>\n                      <p className=\"text-sm text-slate-400\">Click on any table or column to edit its properties in the sidebar.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-4\">\n                    <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                      <FileCode className=\"w-5 h-5 text-amber-400\" />\n                    </div>\n                    <div>\n                      <h3 className=\"font-medium text-slate-200\">Export SQL</h3>\n                      <p className=\"text-sm text-slate-400\">Export your diagram as SQL DDL statements ready to run on your database.</p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"mt-6 pt-4 border-t border-slate-800\">\n                  <h4 className=\"text-xs font-medium text-slate-500 uppercase tracking-wider mb-3\">Keyboard Shortcuts</h4>\n                  <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Delete</span>\n                      <span className=\"text-slate-200\">Delete selected</span>\n                    </div>\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Space + Drag</span>\n                      <span className=\"text-slate-200\">Pan canvas</span>\n                    </div>\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Scroll</span>\n                      <span className=\"text-slate-200\">Zoom in/out</span>\n                    </div>\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Click</span>\n                      <span className=\"text-slate-200\">Select</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"px-6 py-4 bg-slate-800/50 border-t border-slate-800\">\n                <button\n                  onClick={() => setShowHelp(false)}\n                  className=\"w-full py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors\"\n                >\n                  Got it!\n                </button>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </header>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4610, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/erd/index.ts"],"sourcesContent":["export { default as ERDCanvas } from './ERDCanvas';\nexport { default as PropertiesPanel } from './PropertiesPanel';\nexport { default as Header } from './Header';\nexport { default as TableNode } from './TableNode';\nexport { default as RelationEdge } from './RelationEdge';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 4646, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/layout/AppHeader.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { cn } from '@/lib/utils';\nimport { \n  Database, \n  Workflow,\n  Users,\n  Github, \n  HelpCircle, \n  Sparkles,\n  ChevronDown,\n  Download,\n  Upload,\n  FileCode,\n  Keyboard,\n  Settings,\n  Plus,\n  Menu,\n  X,\n  PanelLeft,\n  PanelRight,\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface AppHeaderProps {\n  onExportJSON?: () => void;\n  onExportSQL?: () => void;\n  onExportPNG?: () => void;\n  onImport?: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  stats?: { label: string; value: number }[];\n  title?: string;\n  subtitle?: string;\n  helpContent?: React.ReactNode;\n  // Panel toggle props\n  leftPanelOpen?: boolean;\n  rightPanelOpen?: boolean;\n  onToggleLeftPanel?: () => void;\n  onToggleRightPanel?: () => void;\n  showLeftPanelToggle?: boolean;\n  showRightPanelToggle?: boolean;\n}\n\nexport default function AppHeader({\n  onExportJSON,\n  onExportSQL,\n  onExportPNG,\n  onImport,\n  stats = [],\n  title = 'Designer',\n  subtitle = 'Visual Design Tool',\n  helpContent,\n  // Panel toggles\n  leftPanelOpen,\n  rightPanelOpen,\n  onToggleLeftPanel,\n  onToggleRightPanel,\n  showLeftPanelToggle,\n  showRightPanelToggle,\n}: AppHeaderProps) {\n  const [showHelp, setShowHelp] = useState(false);\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\n  const pathname = usePathname();\n\n  const isERD = pathname === '/';\n  const isFlowchart = pathname === '/flowchart';\n  const isUseCase = pathname === '/usecase';\n\n  return (\n    <>\n      <header className=\"h-14 bg-slate-900/95 backdrop-blur-sm border-b border-slate-800 flex items-center justify-between px-3 lg:px-4 shrink-0 z-50\">\n        {/* Left Section: Logo & Panel Toggles */}\n        <div className=\"flex items-center gap-2 lg:gap-4\">\n          {/* Panel Toggles (Mobile/Tablet) */}\n          {showLeftPanelToggle && onToggleLeftPanel && (\n            <button\n              onClick={onToggleLeftPanel}\n              className={cn(\n                \"lg:hidden p-2 rounded-lg transition-colors\",\n                leftPanelOpen \n                  ? \"text-blue-400 bg-blue-500/10\" \n                  : \"text-slate-400 hover:text-white hover:bg-white/5\"\n              )}\n              title=\"Toggle Sidebar\"\n            >\n              <PanelLeft className=\"w-5 h-5\" />\n            </button>\n          )}\n\n          {/* Logo */}\n          <Link href=\"/\" className=\"flex items-center gap-2 lg:gap-3\">\n            <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg shadow-blue-500/20\">\n              {isERD ? (\n                <Database className=\"w-4 h-4 text-white\" />\n              ) : isUseCase ? (\n                <Users className=\"w-4 h-4 text-white\" />\n              ) : (\n                <Workflow className=\"w-4 h-4 text-white\" />\n              )}\n            </div>\n            <div className=\"hidden sm:block\">\n              <h1 className=\"font-bold text-slate-100 text-sm\">{title}</h1>\n              <p className=\"text-[10px] text-slate-500 hidden lg:block\">{subtitle}</p>\n            </div>\n          </Link>\n\n          {/* Desktop Navigation Tabs */}\n          <div className=\"hidden md:flex items-center gap-1 p-1 bg-slate-800/50 rounded-lg border border-slate-700/50 ml-2 lg:ml-4\">\n            <Link\n              href=\"/\"\n              className={cn(\n                \"flex items-center gap-2 px-2 lg:px-3 py-1.5 rounded-md text-xs font-medium transition-all\",\n                isERD\n                  ? \"bg-blue-500 text-white\"\n                  : \"text-slate-400 hover:text-slate-200 hover:bg-white/5\"\n              )}\n            >\n              <Database className=\"w-3.5 h-3.5\" />\n              <span className=\"hidden lg:inline\">ERD</span>\n            </Link>\n            <Link\n              href=\"/flowchart\"\n              className={cn(\n                \"flex items-center gap-2 px-2 lg:px-3 py-1.5 rounded-md text-xs font-medium transition-all\",\n                isFlowchart\n                  ? \"bg-blue-500 text-white\"\n                  : \"text-slate-400 hover:text-slate-200 hover:bg-white/5\"\n              )}\n            >\n              <Workflow className=\"w-3.5 h-3.5\" />\n              <span className=\"hidden lg:inline\">Flowchart</span>\n            </Link>\n            <Link\n              href=\"/usecase\"\n              className={cn(\n                \"flex items-center gap-2 px-2 lg:px-3 py-1.5 rounded-md text-xs font-medium transition-all\",\n                isUseCase\n                  ? \"bg-blue-500 text-white\"\n                  : \"text-slate-400 hover:text-slate-200 hover:bg-white/5\"\n              )}\n            >\n              <Users className=\"w-3.5 h-3.5\" />\n              <span className=\"hidden lg:inline\">Use Case</span>\n            </Link>\n          </div>\n        </div>\n\n        {/* Center: Stats */}\n        {stats.length > 0 && (\n          <div className=\"hidden lg:flex items-center gap-3\">\n            {stats.map((stat, index) => (\n              <div \n                key={index}\n                className=\"flex items-center gap-2 px-3 py-1.5 bg-slate-800/50 rounded-lg border border-slate-700/50\"\n              >\n                <span className=\"text-xs text-slate-400\">{stat.label}:</span>\n                <span className=\"text-xs font-semibold text-slate-200\">{stat.value}</span>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Right: Actions */}\n        <div className=\"flex items-center gap-1 lg:gap-2\">\n          {/* Desktop Export/Import */}\n          <div className=\"hidden sm:flex items-center gap-2\">\n            {(onExportJSON || onExportPNG) && (\n              <div className=\"relative group\">\n                <button className=\"flex items-center gap-2 px-3 py-1.5 text-slate-300 hover:text-white hover:bg-white/5 rounded-lg text-sm transition-colors\">\n                  <Download className=\"w-4 h-4\" />\n                  <span className=\"hidden xl:inline\">Export</span>\n                  <ChevronDown className=\"w-3 h-3\" />\n                </button>\n                \n                <div className=\"absolute right-0 top-full mt-1 w-40 bg-slate-800 rounded-xl border border-slate-700 shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50\">\n                  {onExportJSON && (\n                    <button\n                      onClick={onExportJSON}\n                      className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors first:rounded-t-xl\"\n                    >\n                      <Download className=\"w-4 h-4\" />\n                      Export JSON\n                    </button>\n                  )}\n                  {onExportSQL && (\n                    <button\n                      onClick={onExportSQL}\n                      className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors\"\n                    >\n                      <FileCode className=\"w-4 h-4\" />\n                      Export SQL\n                    </button>\n                  )}\n                  {onExportPNG && (\n                    <button\n                      onClick={onExportPNG}\n                      className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors last:rounded-b-xl\"\n                    >\n                      <Download className=\"w-4 h-4\" />\n                      Export PNG\n                    </button>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {onImport && (\n              <label className=\"flex items-center gap-2 px-3 py-1.5 text-slate-300 hover:text-white hover:bg-white/5 rounded-lg text-sm cursor-pointer transition-colors\">\n                <Upload className=\"w-4 h-4\" />\n                <span className=\"hidden xl:inline\">Import</span>\n                <input\n                  type=\"file\"\n                  accept=\".json\"\n                  onChange={onImport}\n                  className=\"hidden\"\n                />\n              </label>\n            )}\n\n            <div className=\"hidden md:block w-px h-6 bg-slate-700 mx-1\" />\n          </div>\n\n          {/* Right Panel Toggle */}\n          {showRightPanelToggle && onToggleRightPanel && (\n            <button\n              onClick={onToggleRightPanel}\n              className={cn(\n                \"p-2 rounded-lg transition-colors\",\n                rightPanelOpen \n                  ? \"text-blue-400 bg-blue-500/10\" \n                  : \"text-slate-400 hover:text-white hover:bg-white/5\"\n              )}\n              title=\"Toggle Properties Panel\"\n            >\n              <PanelRight className=\"w-5 h-5\" />\n            </button>\n          )}\n\n          {/* Help */}\n          <button\n            onClick={() => setShowHelp(!showHelp)}\n            className={cn(\n              \"p-2 rounded-lg transition-colors hidden sm:flex\",\n              showHelp ? \"text-blue-400 bg-blue-500/10\" : \"text-slate-400 hover:text-white hover:bg-white/5\"\n            )}\n          >\n            <HelpCircle className=\"w-4 h-4\" />\n          </button>\n\n          {/* GitHub */}\n          <a\n            href=\"https://github.com\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"hidden sm:flex p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\n          >\n            <Github className=\"w-4 h-4\" />\n          </a>\n\n          {/* Mobile Menu Button */}\n          <button\n            onClick={() => setShowMobileMenu(!showMobileMenu)}\n            className=\"md:hidden p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\n          >\n            {showMobileMenu ? <X className=\"w-5 h-5\" /> : <Menu className=\"w-5 h-5\" />}\n          </button>\n        </div>\n      </header>\n\n      {/* Mobile Menu */}\n      <AnimatePresence>\n        {showMobileMenu && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"md:hidden bg-slate-900 border-b border-slate-800 z-40\"\n          >\n            <nav className=\"p-4 space-y-2\">\n              <Link\n                href=\"/\"\n                onClick={() => setShowMobileMenu(false)}\n                className={cn(\n                  \"flex items-center gap-3 px-4 py-3 rounded-xl transition-all\",\n                  isERD\n                    ? \"bg-blue-500 text-white\"\n                    : \"text-slate-300 hover:bg-white/5\"\n                )}\n              >\n                <Database className=\"w-5 h-5\" />\n                <span className=\"font-medium\">ERD Designer</span>\n              </Link>\n              <Link\n                href=\"/flowchart\"\n                onClick={() => setShowMobileMenu(false)}\n                className={cn(\n                  \"flex items-center gap-3 px-4 py-3 rounded-xl transition-all\",\n                  isFlowchart\n                    ? \"bg-blue-500 text-white\"\n                    : \"text-slate-300 hover:bg-white/5\"\n                )}\n              >\n                <Workflow className=\"w-5 h-5\" />\n                <span className=\"font-medium\">Flowchart</span>\n              </Link>\n              <Link\n                href=\"/usecase\"\n                onClick={() => setShowMobileMenu(false)}\n                className={cn(\n                  \"flex items-center gap-3 px-4 py-3 rounded-xl transition-all\",\n                  isUseCase\n                    ? \"bg-blue-500 text-white\"\n                    : \"text-slate-300 hover:bg-white/5\"\n                )}\n              >\n                <Users className=\"w-5 h-5\" />\n                <span className=\"font-medium\">Use Case</span>\n              </Link>\n            </nav>\n\n            {/* Mobile Actions */}\n            <div className=\"px-4 pb-4 space-y-2\">\n              {stats.length > 0 && (\n                <div className=\"flex flex-wrap gap-2 pb-2\">\n                  {stats.map((stat, index) => (\n                    <div \n                      key={index}\n                      className=\"flex items-center gap-1.5 px-2.5 py-1 bg-slate-800 rounded-lg\"\n                    >\n                      <span className=\"text-[10px] text-slate-400\">{stat.label}:</span>\n                      <span className=\"text-xs font-medium text-slate-200\">{stat.value}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              <div className=\"flex gap-2\">\n                {onExportJSON && (\n                  <button\n                    onClick={() => {\n                      onExportJSON();\n                      setShowMobileMenu(false);\n                    }}\n                    className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-slate-800 text-slate-300 rounded-lg text-sm\"\n                  >\n                    <Download className=\"w-4 h-4\" />\n                    Export\n                  </button>\n                )}\n                {onImport && (\n                  <label className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-slate-800 text-slate-300 rounded-lg text-sm cursor-pointer\">\n                    <Upload className=\"w-4 h-4\" />\n                    Import\n                    <input\n                      type=\"file\"\n                      accept=\".json\"\n                      onChange={(e) => {\n                        onImport(e);\n                        setShowMobileMenu(false);\n                      }}\n                      className=\"hidden\"\n                    />\n                  </label>\n                )}\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Help Modal */}\n      <AnimatePresence>\n        {showHelp && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n            onClick={() => setShowHelp(false)}\n          >\n            <motion.div\n              initial={{ scale: 0.95, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.95, opacity: 0 }}\n              className=\"bg-slate-900 rounded-2xl border border-slate-700 shadow-2xl max-w-lg w-full max-h-[80vh] overflow-auto\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"p-6\">\n                <div className=\"flex items-center gap-3 mb-6\">\n                  <div className=\"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center\">\n                    <Sparkles className=\"w-5 h-5 text-blue-400\" />\n                  </div>\n                  <div>\n                    <h2 className=\"text-lg font-semibold text-white\">Quick Guide</h2>\n                    <p className=\"text-sm text-slate-400\">Learn how to use {title}</p>\n                  </div>\n                </div>\n\n                {helpContent || (\n                  <div className=\"space-y-4\">\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                        <Plus className=\"w-5 h-5 text-blue-400\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-medium text-slate-200\">Create Elements</h3>\n                        <p className=\"text-sm text-slate-400\">Add new elements to your diagram using the toolbar or sidebar.</p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                        <Settings className=\"w-5 h-5 text-green-400\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-medium text-slate-200\">Edit Properties</h3>\n                        <p className=\"text-sm text-slate-400\">Click on any element to edit its properties in the sidebar.</p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                        <Download className=\"w-5 h-5 text-amber-400\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-medium text-slate-200\">Export</h3>\n                        <p className=\"text-sm text-slate-400\">Save your work as JSON or export as an image.</p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"mt-6 pt-4 border-t border-slate-800\">\n                  <h4 className=\"text-xs font-medium text-slate-500 uppercase tracking-wider mb-3\">Keyboard Shortcuts</h4>\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm\">\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Delete</span>\n                      <span className=\"text-slate-200\">Remove selected</span>\n                    </div>\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Space + Drag</span>\n                      <span className=\"text-slate-200\">Pan canvas</span>\n                    </div>\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Scroll</span>\n                      <span className=\"text-slate-200\">Zoom in/out</span>\n                    </div>\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Click</span>\n                      <span className=\"text-slate-200\">Select element</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"px-6 py-4 bg-slate-800/50 border-t border-slate-800\">\n                <button\n                  onClick={() => setShowHelp(false)}\n                  className=\"w-full py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors\"\n                >\n                  Got it!\n                </button>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5770, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/hooks/usePanelState.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\n\ninterface PanelState {\n  leftPanel: boolean;\n  rightPanel: boolean;\n}\n\ninterface UsePanelStateOptions {\n  storageKey?: string;\n  defaultLeftPanel?: boolean;\n  defaultRightPanel?: boolean;\n  mobileBreakpoint?: number;\n}\n\nexport function usePanelState(options: UsePanelStateOptions = {}) {\n  const {\n    storageKey,\n    defaultLeftPanel = true,\n    defaultRightPanel = true,\n    mobileBreakpoint = 768,\n  } = options;\n\n  const [panels, setPanels] = useState<PanelState>({\n    leftPanel: defaultLeftPanel,\n    rightPanel: defaultRightPanel,\n  });\n\n  const [isMobile, setIsMobile] = useState(false);\n  const [isTablet, setIsTablet] = useState(false);\n\n  // Check screen size\n  useEffect(() => {\n    const checkScreenSize = () => {\n      const width = window.innerWidth;\n      const mobile = width < mobileBreakpoint;\n      const tablet = width >= mobileBreakpoint && width < 1024;\n      \n      setIsMobile(mobile);\n      setIsTablet(tablet);\n\n      // Auto-hide panels on mobile\n      if (mobile) {\n        setPanels({ leftPanel: false, rightPanel: false });\n      } else if (tablet) {\n        // On tablet, show only one panel by default\n        setPanels({ leftPanel: true, rightPanel: false });\n      }\n    };\n\n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    return () => window.removeEventListener('resize', checkScreenSize);\n  }, [mobileBreakpoint]);\n\n  // Load from storage\n  useEffect(() => {\n    if (storageKey && typeof window !== 'undefined') {\n      try {\n        const saved = localStorage.getItem(storageKey);\n        if (saved) {\n          const parsed = JSON.parse(saved);\n          setPanels(parsed);\n        }\n      } catch (e) {\n        console.warn('Failed to load panel state:', e);\n      }\n    }\n  }, [storageKey]);\n\n  // Save to storage\n  useEffect(() => {\n    if (storageKey && typeof window !== 'undefined') {\n      try {\n        localStorage.setItem(storageKey, JSON.stringify(panels));\n      } catch (e) {\n        console.warn('Failed to save panel state:', e);\n      }\n    }\n  }, [panels, storageKey]);\n\n  const toggleLeftPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, leftPanel: !prev.leftPanel }));\n  }, []);\n\n  const toggleRightPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, rightPanel: !prev.rightPanel }));\n  }, []);\n\n  const openLeftPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, leftPanel: true }));\n  }, []);\n\n  const openRightPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, rightPanel: true }));\n  }, []);\n\n  const closeLeftPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, leftPanel: false }));\n  }, []);\n\n  const closeRightPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, rightPanel: false }));\n  }, []);\n\n  const closeAllPanels = useCallback(() => {\n    setPanels({ leftPanel: false, rightPanel: false });\n  }, []);\n\n  const openAllPanels = useCallback(() => {\n    setPanels({ leftPanel: true, rightPanel: true });\n  }, []);\n\n  return {\n    // State\n    leftPanelOpen: panels.leftPanel,\n    rightPanelOpen: panels.rightPanel,\n    isMobile,\n    isTablet,\n    isDesktop: !isMobile && !isTablet,\n    \n    // Actions\n    toggleLeftPanel,\n    toggleRightPanel,\n    openLeftPanel,\n    openRightPanel,\n    closeLeftPanel,\n    closeRightPanel,\n    closeAllPanels,\n    openAllPanels,\n    \n    // Responsive helpers\n    anyPanelOpen: panels.leftPanel || panels.rightPanel,\n    bothPanelsOpen: panels.leftPanel && panels.rightPanel,\n  };\n}\n\nexport default usePanelState;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5962, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { ERDCanvas, PropertiesPanel } from '@/components/erd';\nimport AppHeader from '@/components/layout/AppHeader';\nimport { useERDStore } from '@/store/erdStore';\nimport { useCallback } from 'react';\nimport { usePanelState } from '@/hooks/usePanelState';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { cn } from '@/lib/utils';\nimport { X, PanelRight } from 'lucide-react';\n\nexport default function ERDPage() {\n  const { \n    tables, \n    relations, \n    exportToJSON, \n    exportToSQL, \n    importFromJSON \n  } = useERDStore();\n\n  const {\n    rightPanelOpen,\n    toggleRightPanel,\n    closeRightPanel,\n    isMobile,\n  } = usePanelState({\n    storageKey: 'erd-panels',\n    defaultRightPanel: true,\n  });\n\n  const handleExportJSON = useCallback(() => {\n    const json = exportToJSON();\n    const blob = new Blob([json], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.download = 'erd-schema.json';\n    link.href = url;\n    link.click();\n    URL.revokeObjectURL(url);\n  }, [exportToJSON]);\n\n  const handleExportSQL = useCallback(() => {\n    const sql = exportToSQL();\n    const blob = new Blob([sql], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.download = 'schema.sql';\n    link.href = url;\n    link.click();\n    URL.revokeObjectURL(url);\n  }, [exportToSQL]);\n\n  const handleImport = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        try {\n          const json = event.target?.result as string;\n          importFromJSON(json);\n        } catch (error) {\n          alert('Invalid JSON file');\n        }\n      };\n      reader.readAsText(file);\n    }\n    e.target.value = '';\n  }, [importFromJSON]);\n\n  return (\n    <div className=\"flex flex-col h-screen bg-slate-950 overflow-hidden\">\n      <AppHeader\n        title=\"ERD Designer\"\n        subtitle=\"Visual Database Design\"\n        onExportJSON={handleExportJSON}\n        onExportSQL={handleExportSQL}\n        onImport={handleImport}\n        stats={[\n          { label: 'Tables', value: tables.length },\n          { label: 'Relations', value: relations.length },\n        ]}\n        rightPanelOpen={rightPanelOpen}\n        onToggleRightPanel={toggleRightPanel}\n        showRightPanelToggle={true}\n      />\n      \n      <div className=\"flex flex-1 overflow-hidden relative\">\n        {/* Main Canvas Area */}\n        <div className={cn(\n          \"flex-1 relative transition-all duration-300\",\n          rightPanelOpen && !isMobile && \"mr-[320px]\"\n        )}>\n          <ERDCanvas />\n        </div>\n\n        {/* Properties Panel */}\n        <AnimatePresence>\n          {rightPanelOpen && (\n            <>\n              {/* Mobile Overlay */}\n              {isMobile && (\n                <motion.div\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  exit={{ opacity: 0 }}\n                  className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-30\"\n                  onClick={closeRightPanel}\n                />\n              )}\n              \n              {/* Panel */}\n              <motion.div\n                initial={{ x: '100%', opacity: 0.5 }}\n                animate={{ x: 0, opacity: 1 }}\n                exit={{ x: '100%', opacity: 0.5 }}\n                transition={{ type: 'spring', damping: 30, stiffness: 300 }}\n                className={cn(\n                  \"fixed right-0 top-14 bottom-0 z-40\",\n                  \"w-full sm:w-[400px] lg:w-[320px]\",\n                  \"bg-slate-900/95 backdrop-blur-sm border-l border-slate-800\"\n                )}\n              >\n                {/* Mobile Close Button */}\n                <div className=\"lg:hidden flex items-center justify-between p-4 border-b border-slate-800\">\n                  <h2 className=\"font-semibold text-slate-200\">Properties</h2>\n                  <button\n                    onClick={closeRightPanel}\n                    className=\"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-white/10 transition-colors\"\n                  >\n                    <X className=\"w-5 h-5\" />\n                  </button>\n                </div>\n                \n                <div className=\"h-full overflow-hidden\">\n                  <PropertiesPanel />\n                </div>\n              </motion.div>\n            </>\n          )}\n        </AnimatePresence>\n\n        {/* Floating Toggle Button (when panel is closed) */}\n        {!rightPanelOpen && (\n          <motion.button\n            initial={{ scale: 0, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0, opacity: 0 }}\n            onClick={toggleRightPanel}\n            className=\"fixed right-4 top-[72px] z-30 p-2.5 rounded-xl bg-slate-800/90 border border-slate-700 shadow-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors\"\n            title=\"Open Properties Panel\"\n          >\n            <PanelRight className=\"w-5 h-5\" />\n          </motion.button>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}