{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/types/flowchart.ts"],"sourcesContent":["// Types for Flowchart Designer\n\nexport type FlowchartNodeType = \n  | 'process' \n  | 'decision' \n  | 'start' \n  | 'end' \n  | 'input'\n  | 'output'\n  | 'document'\n  | 'database'\n  | 'predefined'\n  | 'delay'\n  | 'stored-data'\n  | 'manual-input'\n  | 'display'\n  | 'preparation'\n  | 'connector'\n  | 'off-page';\n\nexport type FlowchartEdgeType = 'smooth' | 'straight' | 'step' | 'bezier';\n\nexport interface FlowchartNode {\n  id: string;\n  type: FlowchartNodeType;\n  position: {\n    x: number;\n    y: number;\n  };\n  size: {\n    width: number;\n    height: number;\n  };\n  data: {\n    label: string;\n    description?: string;\n    color?: string;\n    borderColor?: string;\n    textColor?: string;\n    fontSize?: number;\n    borderWidth?: number;\n    borderStyle?: 'solid' | 'dashed' | 'dotted';\n    opacity?: number;\n    icon?: string;\n  };\n  rotation?: number;\n  zIndex?: number;\n}\n\nexport interface FlowchartEdge {\n  id: string;\n  source: string;\n  target: string;\n  type: FlowchartEdgeType;\n  label?: string;\n  data?: {\n    color?: string;\n    strokeWidth?: number;\n    strokeStyle?: 'solid' | 'dashed' | 'dotted';\n    startArrow?: boolean;\n    endArrow?: boolean;\n    labelBgColor?: string;\n    labelTextColor?: string;\n  };\n  sourceHandle?: string;\n  targetHandle?: string;\n}\n\nexport interface FlowchartState {\n  nodes: FlowchartNode[];\n  edges: FlowchartEdge[];\n  selectedNodeId: string | null;\n  selectedEdgeId: string | null;\n  viewport: {\n    x: number;\n    y: number;\n    zoom: number;\n  };\n}\n\n// Shape definitions with icons and descriptions\nexport const FLOWCHART_SHAPES: {\n  type: FlowchartNodeType;\n  label: string;\n  icon: string;\n  description: string;\n  defaultSize: { width: number; height: number };\n  defaultColor: string;\n}[] = [\n  {\n    type: 'start',\n    label: 'Start/End',\n    icon: 'Circle',\n    description: 'Terminal point - Start or end of process',\n    defaultSize: { width: 120, height: 60 },\n    defaultColor: '#10B981',\n  },\n  {\n    type: 'process',\n    label: 'Process',\n    icon: 'Square',\n    description: 'Action or operation step',\n    defaultSize: { width: 140, height: 80 },\n    defaultColor: '#3B82F6',\n  },\n  {\n    type: 'decision',\n    label: 'Decision',\n    icon: 'Diamond',\n    description: 'Conditional branch (Yes/No)',\n    defaultSize: { width: 140, height: 100 },\n    defaultColor: '#F59E0B',\n  },\n  {\n    type: 'input',\n    label: 'Input',\n    icon: 'Parallelogram',\n    description: 'Data input operation',\n    defaultSize: { width: 140, height: 70 },\n    defaultColor: '#8B5CF6',\n  },\n  {\n    type: 'output',\n    label: 'Output',\n    icon: 'Parallelogram',\n    description: 'Data output operation',\n    defaultSize: { width: 140, height: 70 },\n    defaultColor: '#EC4899',\n  },\n  {\n    type: 'document',\n    label: 'Document',\n    icon: 'FileText',\n    description: 'Document or report',\n    defaultSize: { width: 140, height: 90 },\n    defaultColor: '#06B6D4',\n  },\n  {\n    type: 'database',\n    label: 'Database',\n    icon: 'Database',\n    description: 'Database storage',\n    defaultSize: { width: 140, height: 90 },\n    defaultColor: '#6366F1',\n  },\n  {\n    type: 'predefined',\n    label: 'Predefined',\n    icon: 'RectangleHorizontal',\n    description: 'Predefined process (subroutine)',\n    defaultSize: { width: 140, height: 80 },\n    defaultColor: '#84CC16',\n  },\n  {\n    type: 'delay',\n    label: 'Delay',\n    icon: 'Clock',\n    description: 'Wait or delay operation',\n    defaultSize: { width: 120, height: 70 },\n    defaultColor: '#F97316',\n  },\n  {\n    type: 'stored-data',\n    label: 'Stored Data',\n    icon: 'HardDrive',\n    description: 'Data storage',\n    defaultSize: { width: 140, height: 90 },\n    defaultColor: '#14B8A6',\n  },\n  {\n    type: 'manual-input',\n    label: 'Manual Input',\n    icon: 'Keyboard',\n    description: 'Manual data entry',\n    defaultSize: { width: 140, height: 80 },\n    defaultColor: '#A855F7',\n  },\n  {\n    type: 'display',\n    label: 'Display',\n    icon: 'Monitor',\n    description: 'Display output',\n    defaultSize: { width: 140, height: 80 },\n    defaultColor: '#E11D48',\n  },\n  {\n    type: 'preparation',\n    label: 'Preparation',\n    icon: 'Hexagon',\n    description: 'Initialization or preparation',\n    defaultSize: { width: 140, height: 90 },\n    defaultColor: '#0EA5E9',\n  },\n  {\n    type: 'connector',\n    label: 'Connector',\n    icon: 'CircleDot',\n    description: 'Connection point within page',\n    defaultSize: { width: 50, height: 50 },\n    defaultColor: '#64748B',\n  },\n  {\n    type: 'off-page',\n    label: 'Off-Page',\n    icon: 'ArrowRightToLine',\n    description: 'Connection to another page',\n    defaultSize: { width: 100, height: 60 },\n    defaultColor: '#94A3B8',\n  },\n];\n\nexport const FLOWCHART_COLORS = [\n  '#3B82F6', // Blue\n  '#10B981', // Emerald\n  '#F59E0B', // Amber\n  '#EF4444', // Red\n  '#8B5CF6', // Violet\n  '#EC4899', // Pink\n  '#06B6D4', // Cyan\n  '#84CC16', // Lime\n  '#F97316', // Orange\n  '#6366F1', // Indigo\n  '#14B8A6', // Teal\n  '#A855F7', // Purple\n  '#E11D48', // Rose\n  '#0EA5E9', // Sky\n  '#64748B', // Slate\n];\n\nexport const DEFAULT_FLOWCHART_NODE: Omit<FlowchartNode, 'id' | 'type' | 'position'> = {\n  size: { width: 140, height: 80 },\n  data: {\n    label: 'New Node',\n    color: '#3B82F6',\n    borderColor: '#1D4ED8',\n    textColor: '#FFFFFF',\n    fontSize: 14,\n    borderWidth: 2,\n    borderStyle: 'solid',\n    opacity: 1,\n  },\n  rotation: 0,\n  zIndex: 0,\n};\n\nexport const DEFAULT_FLOWCHART_EDGE: Omit<FlowchartEdge, 'id' | 'source' | 'target'> = {\n  type: 'smooth',\n  label: '',\n  data: {\n    color: '#64748B',\n    strokeWidth: 2,\n    strokeStyle: 'solid',\n    startArrow: false,\n    endArrow: true,\n    labelBgColor: '#1E293B',\n    labelTextColor: '#F1F5F9',\n  },\n};\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;;;;;;AAiFxB,MAAM,mBAOP;IACJ;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAI;QACvC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAI,QAAQ;QAAG;QACrC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;CACD;AAEM,MAAM,mBAAmB;IAC9B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,yBAA0E;IACrF,MAAM;QAAE,OAAO;QAAK,QAAQ;IAAG;IAC/B,MAAM;QACJ,OAAO;QACP,OAAO;QACP,aAAa;QACb,WAAW;QACX,UAAU;QACV,aAAa;QACb,aAAa;QACb,SAAS;IACX;IACA,UAAU;IACV,QAAQ;AACV;AAEO,MAAM,yBAA0E;IACrF,MAAM;IACN,OAAO;IACP,MAAM;QACJ,OAAO;QACP,aAAa;QACb,aAAa;QACb,YAAY;QACZ,UAAU;QACV,cAAc;QACd,gBAAgB;IAClB;AACF"}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport function generateId(): string {\n  return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n}\n\nexport function generateTableName(existingTables: { name: string }[]): string {\n  let counter = 1;\n  let name = `Table_${counter}`;\n  \n  while (existingTables.some(t => t.name === name)) {\n    counter++;\n    name = `Table_${counter}`;\n  }\n  \n  return name;\n}\n\nexport function generateColumnName(existingColumns: { name: string }[]): string {\n  let counter = 1;\n  let name = `column_${counter}`;\n  \n  while (existingColumns.some(c => c.name === name)) {\n    counter++;\n    name = `column_${counter}`;\n  }\n  \n  return name;\n}\n\nexport function toSnakeCase(str: string): string {\n  return str\n    .replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`)\n    .replace(/^_/, '');\n}\n\nexport function toPascalCase(str: string): string {\n  return str\n    .replace(/[_\\s]+(.)?/g, (_, char) => (char ? char.toUpperCase() : ''))\n    .replace(/^./, char => char.toUpperCase());\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB;AAEO,SAAS;IACd,OAAO,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG,MAAM,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG;AAC/F;AAEO,SAAS,kBAAkB,cAAkC;IAClE,IAAI,UAAU;IACd,IAAI,OAAO,CAAC,MAAM,EAAE,SAAS;IAE7B,MAAO,eAAe,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,MAAO;QAChD;QACA,OAAO,CAAC,MAAM,EAAE,SAAS;IAC3B;IAEA,OAAO;AACT;AAEO,SAAS,mBAAmB,eAAmC;IACpE,IAAI,UAAU;IACd,IAAI,OAAO,CAAC,OAAO,EAAE,SAAS;IAE9B,MAAO,gBAAgB,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,MAAO;QACjD;QACA,OAAO,CAAC,OAAO,EAAE,SAAS;IAC5B;IAEA,OAAO;AACT;AAEO,SAAS,YAAY,GAAW;IACrC,OAAO,IACJ,OAAO,CAAC,UAAU,CAAA,SAAU,CAAC,CAAC,EAAE,OAAO,WAAW,IAAI,EACtD,OAAO,CAAC,MAAM;AACnB;AAEO,SAAS,aAAa,GAAW;IACtC,OAAO,IACJ,OAAO,CAAC,eAAe,CAAC,GAAG,OAAU,OAAO,KAAK,WAAW,KAAK,IACjE,OAAO,CAAC,MAAM,CAAA,OAAQ,KAAK,WAAW;AAC3C"}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/store/flowchartStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport { \n  FlowchartNode, \n  FlowchartEdge, \n  FlowchartNodeType, \n  FlowchartEdgeType,\n  FLOWCHART_SHAPES \n} from '@/types/flowchart';\nimport { generateId } from '@/lib/utils';\n\ninterface FlowchartStoreState {\n  nodes: FlowchartNode[];\n  edges: FlowchartEdge[];\n  selectedNodeId: string | null;\n  selectedEdgeId: string | null;\n  \n  // Node actions\n  addNode: (type: FlowchartNodeType, position: { x: number; y: number }) => string;\n  updateNode: (nodeId: string, updates: Partial<FlowchartNode>) => void;\n  updateNodeData: (nodeId: string, data: Partial<FlowchartNode['data']>) => void;\n  deleteNode: (nodeId: string) => void;\n  duplicateNode: (nodeId: string) => void;\n  moveNode: (nodeId: string, position: { x: number; y: number }) => void;\n  resizeNode: (nodeId: string, size: { width: number; height: number }) => void;\n  rotateNode: (nodeId: string, rotation: number) => void;\n  bringToFront: (nodeId: string) => void;\n  sendToBack: (nodeId: string) => void;\n  \n  // Edge actions\n  addEdge: (edge: Omit<FlowchartEdge, 'id'>) => string;\n  updateEdge: (edgeId: string, updates: Partial<FlowchartEdge>) => void;\n  updateEdgeData: (edgeId: string, data: Partial<FlowchartEdge['data']>) => void;\n  deleteEdge: (edgeId: string) => void;\n  \n  // Selection\n  selectNode: (nodeId: string | null) => void;\n  selectEdge: (edgeId: string | null) => void;\n  clearSelection: () => void;\n  \n  // Bulk actions\n  deleteSelected: () => void;\n  duplicateSelected: () => void;\n  \n  // Import/Export\n  exportToJSON: () => string;\n  importFromJSON: (json: string) => void;\n  exportToPNG: (element: HTMLElement) => Promise<string>;\n  clearAll: () => void;\n  \n  // History (undo/redo placeholder)\n  canUndo: boolean;\n  canRedo: boolean;\n  undo: () => void;\n  redo: () => void;\n}\n\nconst getShapeDefaults = (type: FlowchartNodeType) => {\n  const shape = FLOWCHART_SHAPES.find(s => s.type === type);\n  return shape || FLOWCHART_SHAPES[1]; // Default to process\n};\n\nexport const useFlowchartStore = create<FlowchartStoreState>()(\n  persist(\n    (set, get) => ({\n      nodes: [],\n      edges: [],\n      selectedNodeId: null,\n      selectedEdgeId: null,\n      canUndo: false,\n      canRedo: false,\n\n      addNode: (type, position) => {\n        const id = generateId();\n        const shapeDefaults = getShapeDefaults(type);\n        \n        const newNode: FlowchartNode = {\n          id,\n          type,\n          position,\n          size: { ...shapeDefaults.defaultSize },\n          data: {\n            label: shapeDefaults.label,\n            description: '',\n            color: shapeDefaults.defaultColor,\n            borderColor: shapeDefaults.defaultColor,\n            textColor: '#FFFFFF',\n            fontSize: 14,\n            borderWidth: 2,\n            borderStyle: 'solid',\n            opacity: 1,\n          },\n          rotation: 0,\n          zIndex: get().nodes.length,\n        };\n\n        set({ \n          nodes: [...get().nodes, newNode],\n          selectedNodeId: id,\n          selectedEdgeId: null,\n        });\n        return id;\n      },\n\n      updateNode: (nodeId, updates) => {\n        set({\n          nodes: get().nodes.map((n) =>\n            n.id === nodeId ? { ...n, ...updates } : n\n          ),\n        });\n      },\n\n      updateNodeData: (nodeId, data) => {\n        set({\n          nodes: get().nodes.map((n) =>\n            n.id === nodeId ? { ...n, data: { ...n.data, ...data } } : n\n          ),\n        });\n      },\n\n      deleteNode: (nodeId) => {\n        const { nodes, edges, selectedNodeId } = get();\n        \n        // Delete connected edges\n        const remainingEdges = edges.filter(\n          (e) => e.source !== nodeId && e.target !== nodeId\n        );\n        \n        set({\n          nodes: nodes.filter((n) => n.id !== nodeId),\n          edges: remainingEdges,\n          selectedNodeId: selectedNodeId === nodeId ? null : selectedNodeId,\n        });\n      },\n\n      duplicateNode: (nodeId) => {\n        const { nodes } = get();\n        const node = nodes.find((n) => n.id === nodeId);\n        if (!node) return;\n\n        const newId = generateId();\n        const newNode: FlowchartNode = {\n          ...node,\n          id: newId,\n          position: {\n            x: node.position.x + 50,\n            y: node.position.y + 50,\n          },\n          zIndex: nodes.length,\n        };\n\n        set({ \n          nodes: [...nodes, newNode],\n          selectedNodeId: newId,\n        });\n      },\n\n      moveNode: (nodeId, position) => {\n        set({\n          nodes: get().nodes.map((n) =>\n            n.id === nodeId ? { ...n, position } : n\n          ),\n        });\n      },\n\n      resizeNode: (nodeId, size) => {\n        set({\n          nodes: get().nodes.map((n) =>\n            n.id === nodeId ? { ...n, size } : n\n          ),\n        });\n      },\n\n      rotateNode: (nodeId, rotation) => {\n        set({\n          nodes: get().nodes.map((n) =>\n            n.id === nodeId ? { ...n, rotation } : n\n          ),\n        });\n      },\n\n      bringToFront: (nodeId) => {\n        const { nodes } = get();\n        const maxZ = Math.max(...nodes.map(n => n.zIndex || 0));\n        set({\n          nodes: nodes.map((n) =>\n            n.id === nodeId ? { ...n, zIndex: maxZ + 1 } : n\n          ),\n        });\n      },\n\n      sendToBack: (nodeId) => {\n        const { nodes } = get();\n        const minZ = Math.min(...nodes.map(n => n.zIndex || 0));\n        set({\n          nodes: nodes.map((n) =>\n            n.id === nodeId ? { ...n, zIndex: minZ - 1 } : n\n          ),\n        });\n      },\n\n      addEdge: (edge) => {\n        const id = generateId();\n        const newEdge: FlowchartEdge = {\n          ...edge,\n          id,\n          type: edge.type || 'smooth',\n          data: {\n            color: '#64748B',\n            strokeWidth: 2,\n            strokeStyle: 'solid',\n            startArrow: false,\n            endArrow: true,\n            labelBgColor: '#1E293B',\n            labelTextColor: '#F1F5F9',\n            ...edge.data,\n          },\n        };\n\n        set({ \n          edges: [...get().edges, newEdge],\n          selectedEdgeId: id,\n          selectedNodeId: null,\n        });\n        return id;\n      },\n\n      updateEdge: (edgeId, updates) => {\n        set({\n          edges: get().edges.map((e) =>\n            e.id === edgeId ? { ...e, ...updates } : e\n          ),\n        });\n      },\n\n      updateEdgeData: (edgeId, data) => {\n        set({\n          edges: get().edges.map((e) =>\n            e.id === edgeId ? { ...e, data: { ...e.data, ...data } } : e\n          ),\n        });\n      },\n\n      deleteEdge: (edgeId) => {\n        const { edges, selectedEdgeId } = get();\n        set({\n          edges: edges.filter((e) => e.id !== edgeId),\n          selectedEdgeId: selectedEdgeId === edgeId ? null : selectedEdgeId,\n        });\n      },\n\n      selectNode: (nodeId) => {\n        set({\n          selectedNodeId: nodeId,\n          selectedEdgeId: null,\n        });\n      },\n\n      selectEdge: (edgeId) => {\n        set({\n          selectedEdgeId: edgeId,\n          selectedNodeId: null,\n        });\n      },\n\n      clearSelection: () => {\n        set({\n          selectedNodeId: null,\n          selectedEdgeId: null,\n        });\n      },\n\n      deleteSelected: () => {\n        const { selectedNodeId, selectedEdgeId } = get();\n        if (selectedNodeId) {\n          get().deleteNode(selectedNodeId);\n        } else if (selectedEdgeId) {\n          get().deleteEdge(selectedEdgeId);\n        }\n      },\n\n      duplicateSelected: () => {\n        const { selectedNodeId } = get();\n        if (selectedNodeId) {\n          get().duplicateNode(selectedNodeId);\n        }\n      },\n\n      exportToJSON: () => {\n        const { nodes, edges } = get();\n        return JSON.stringify({ nodes, edges }, null, 2);\n      },\n\n      importFromJSON: (json) => {\n        try {\n          const data = JSON.parse(json);\n          if (data.nodes && Array.isArray(data.nodes)) {\n            set({\n              nodes: data.nodes,\n              edges: data.edges || [],\n              selectedNodeId: null,\n              selectedEdgeId: null,\n            });\n          }\n        } catch (error) {\n          console.error('Failed to import JSON:', error);\n          throw error;\n        }\n      },\n\n      exportToPNG: async (element) => {\n        // This will be implemented with html-to-image in the component\n        return '';\n      },\n\n      clearAll: () => {\n        set({\n          nodes: [],\n          edges: [],\n          selectedNodeId: null,\n          selectedEdgeId: null,\n        });\n      },\n\n      undo: () => {\n        // Placeholder for undo functionality\n      },\n\n      redo: () => {\n        // Placeholder for redo functionality\n      },\n    }),\n    {\n      name: 'flowchart-designer-storage',\n    }\n  )\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 580, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/flowchart/FlowchartNode.tsx"],"sourcesContent":["'use client';\n\nimport { memo, useState } from 'react';\nimport { Handle, Position, type NodeProps } from '@xyflow/react';\nimport { useFlowchartStore } from '@/store/flowchartStore';\nimport { cn } from '@/lib/utils';\nimport { FlowchartNode as FlowchartNodeType } from '@/types/flowchart';\nimport { \n  MoreVertical,\n  Trash2,\n  Copy,\n  ArrowUp,\n  ArrowDown,\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface FlowchartNodeData extends Record<string, unknown> {\n  nodeId: string;\n}\n\n// Shape rendering components\nconst StartEndShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full rounded-full flex items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50'\n    )}\n    style={{\n      backgroundColor: color,\n      border: `${borderWidth}px solid ${borderColor}`,\n    }}\n  >\n    {children}\n  </div>\n);\n\nconst ProcessShape = ({ color, borderColor, borderWidth, borderStyle, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full rounded-xl flex items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50'\n    )}\n    style={{\n      backgroundColor: color,\n      border: `${borderWidth}px ${borderStyle} ${borderColor}`,\n    }}\n  >\n    {children}\n  </div>\n);\n\nconst DecisionShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full flex items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50'\n    )}\n    style={{\n      backgroundColor: color,\n      clipPath: 'polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)',\n    }}\n  >\n    <div className=\"w-[70%] h-[70%] flex items-center justify-center\">\n      {children}\n    </div>\n  </div>\n);\n\nconst InputOutputShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full flex items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50'\n    )}\n    style={{\n      backgroundColor: color,\n      clipPath: 'polygon(15% 0%, 100% 0%, 85% 100%, 0% 100%)',\n    }}\n  >\n    <div className=\"w-[80%] h-[70%] flex items-center justify-center\">\n      {children}\n    </div>\n  </div>\n);\n\nconst DocumentShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full rounded-t-xl flex items-center justify-center relative transition-all duration-200',\n      selected && 'ring-2 ring-white/50 rounded-b-xl'\n    )}\n    style={{\n      backgroundColor: color,\n      border: `${borderWidth}px solid ${borderColor}`,\n      borderBottom: 'none',\n      borderRadius: '12px 12px 0 12px',\n    }}\n  >\n    <div\n      className=\"absolute bottom-0 right-0 w-[30%] h-[30%]\"\n      style={{\n        backgroundColor: borderColor,\n        clipPath: 'polygon(100% 0, 0 100%, 100% 100%)',\n      }}\n    />\n    <div className=\"w-[80%] h-[70%] flex items-center justify-center z-10\">\n      {children}\n    </div>\n  </div>\n);\n\nconst DatabaseShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full flex flex-col items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50 rounded-xl'\n    )}\n  >\n    <div\n      className=\"w-full h-[20%] rounded-[50%]\"\n      style={{\n        backgroundColor: borderColor,\n        border: `${borderWidth}px solid ${borderColor}`,\n      }}\n    />\n    <div\n      className=\"w-full flex-1\"\n      style={{\n        backgroundColor: color,\n        borderLeft: `${borderWidth}px solid ${borderColor}`,\n        borderRight: `${borderWidth}px solid ${borderColor}`,\n      }}\n    />\n    <div\n      className=\"w-full h-[20%] rounded-[50%] border-t-0\"\n      style={{\n        backgroundColor: color,\n        border: `${borderWidth}px solid ${borderColor}`,\n      }}\n    />\n    <div className=\"absolute inset-0 flex items-center justify-center\">\n      {children}\n    </div>\n  </div>\n);\n\nconst PredefinedShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full flex items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50 rounded-xl'\n    )}\n    style={{\n      backgroundColor: color,\n      border: `${borderWidth}px double ${borderColor}`,\n      borderRadius: '12px',\n    }}\n  >\n    {children}\n  </div>\n);\n\nconst DelayShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full flex items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50'\n    )}\n    style={{\n      backgroundColor: color,\n      border: `${borderWidth}px solid ${borderColor}`,\n      borderRadius: '12px 12px 40px 12px',\n    }}\n  >\n    {children}\n  </div>\n);\n\nconst StoredDataShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full flex items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50 rounded-xl'\n    )}\n    style={{\n      backgroundColor: color,\n      border: `${borderWidth}px solid ${borderColor}`,\n      borderRadius: '0 50% 50% 0',\n    }}\n  >\n    {children}\n  </div>\n);\n\nconst PreparationShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full flex items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50'\n    )}\n    style={{\n      backgroundColor: color,\n      clipPath: 'polygon(20% 0%, 80% 0%, 100% 50%, 80% 100%, 20% 100%, 0% 50%)',\n    }}\n  >\n    <div className=\"w-[70%] h-[70%] flex items-center justify-center\">\n      {children}\n    </div>\n  </div>\n);\n\nconst ConnectorShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full rounded-full flex items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50'\n    )}\n    style={{\n      backgroundColor: color,\n      border: `${borderWidth}px solid ${borderColor}`,\n    }}\n  >\n    {children}\n  </div>\n);\n\nconst OffPageShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full flex items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50'\n    )}\n    style={{\n      backgroundColor: color,\n      clipPath: 'polygon(0% 0%, 75% 0%, 100% 50%, 75% 100%, 0% 100%)',\n    }}\n  >\n    <div className=\"w-[70%] h-[70%] flex items-center justify-center\">\n      {children}\n    </div>\n  </div>\n);\n\nconst ManualInputShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full flex items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50'\n    )}\n    style={{\n      backgroundColor: color,\n      clipPath: 'polygon(0% 25%, 100% 0%, 100% 100%, 0% 100%)',\n    }}\n  >\n    <div className=\"w-[80%] h-[70%] flex items-center justify-center mt-2\">\n      {children}\n    </div>\n  </div>\n);\n\nconst DisplayShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\n  <div\n    className={cn(\n      'w-full h-full flex items-center justify-center transition-all duration-200',\n      selected && 'ring-2 ring-white/50'\n    )}\n    style={{\n      backgroundColor: color,\n      clipPath: 'polygon(15% 0%, 85% 0%, 100% 50%, 85% 100%, 15% 100%, 0% 50%)',\n    }}\n  >\n    <div className=\"w-[70%] h-[70%] flex items-center justify-center\">\n      {children}\n    </div>\n  </div>\n);\n\nconst ShapeContent = ({ node, isSelected }: { node: FlowchartNodeType; isSelected: boolean }) => {\n  const { data, type } = node;\n  const textStyle: React.CSSProperties = {\n    color: data.textColor || '#FFFFFF',\n    fontSize: `${data.fontSize || 14}px`,\n    fontWeight: 500,\n    textAlign: 'center',\n    wordWrap: 'break-word',\n    maxWidth: '90%',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    display: '-webkit-box',\n    WebkitLineClamp: 3,\n    WebkitBoxOrient: 'vertical',\n    lineHeight: 1.3,\n    opacity: data.opacity || 1,\n  };\n\n  const shapeProps = {\n    color: data.color || '#3B82F6',\n    borderColor: data.borderColor || '#1D4ED8',\n    borderWidth: data.borderWidth || 2,\n    borderStyle: data.borderStyle || 'solid',\n    selected: isSelected,\n  };\n\n  const content = (\n    <span style={textStyle} className=\"px-2 select-none pointer-events-none\">\n      {data.label}\n    </span>\n  );\n\n  switch (type) {\n    case 'start':\n    case 'end':\n      return <StartEndShape {...shapeProps}>{content}</StartEndShape>;\n    case 'process':\n      return <ProcessShape {...shapeProps}>{content}</ProcessShape>;\n    case 'decision':\n      return <DecisionShape {...shapeProps}>{content}</DecisionShape>;\n    case 'input':\n    case 'output':\n      return <InputOutputShape {...shapeProps}>{content}</InputOutputShape>;\n    case 'document':\n      return <DocumentShape {...shapeProps}>{content}</DocumentShape>;\n    case 'database':\n      return <DatabaseShape {...shapeProps}>{content}</DatabaseShape>;\n    case 'predefined':\n      return <PredefinedShape {...shapeProps}>{content}</PredefinedShape>;\n    case 'delay':\n      return <DelayShape {...shapeProps}>{content}</DelayShape>;\n    case 'stored-data':\n      return <StoredDataShape {...shapeProps}>{content}</StoredDataShape>;\n    case 'preparation':\n      return <PreparationShape {...shapeProps}>{content}</PreparationShape>;\n    case 'connector':\n      return <ConnectorShape {...shapeProps}>{content}</ConnectorShape>;\n    case 'off-page':\n      return <OffPageShape {...shapeProps}>{content}</OffPageShape>;\n    case 'manual-input':\n      return <ManualInputShape {...shapeProps}>{content}</ManualInputShape>;\n    case 'display':\n      return <DisplayShape {...shapeProps}>{content}</DisplayShape>;\n    default:\n      return <ProcessShape {...shapeProps}>{content}</ProcessShape>;\n  }\n};\n\nfunction FlowchartNodeComponent({ data, selected }: NodeProps) {\n  const { nodeId } = data as FlowchartNodeData;\n  const [showMenu, setShowMenu] = useState(false);\n  const [isHovered, setIsHovered] = useState(false);\n  \n  const node = useFlowchartStore((state) => \n    state.nodes.find((n) => n.id === nodeId)\n  );\n  const selectedNodeId = useFlowchartStore((state) => state.selectedNodeId);\n  const selectNode = useFlowchartStore((state) => state.selectNode);\n  const duplicateNode = useFlowchartStore((state) => state.duplicateNode);\n  const deleteNode = useFlowchartStore((state) => state.deleteNode);\n  const bringToFront = useFlowchartStore((state) => state.bringToFront);\n  const sendToBack = useFlowchartStore((state) => state.sendToBack);\n  const updateNodeData = useFlowchartStore((state) => state.updateNodeData);\n  \n  const isSelected = selectedNodeId === nodeId || selected;\n\n  if (!node) return null;\n\n  const handleDuplicate = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    duplicateNode(nodeId);\n    setShowMenu(false);\n  };\n\n  const handleDelete = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    deleteNode(nodeId);\n    setShowMenu(false);\n  };\n\n  const handleColorChange = (color: string) => {\n    updateNodeData(nodeId, { color, borderColor: color });\n    setShowMenu(false);\n  };\n\n  const rotation = node.rotation || 0;\n\n  return (\n    <div\n      className={cn(\n        'relative transition-all duration-200',\n        isSelected && 'z-50'\n      )}\n      style={{\n        width: node.size.width,\n        height: node.size.height,\n        transform: `rotate(${rotation}deg)`,\n        opacity: node.data.opacity || 1,\n      }}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      onClick={() => selectNode(nodeId)}\n    >\n      {/* Shape */}\n      <ShapeContent node={node} isSelected={isSelected} />\n\n      {/* Selection indicator */}\n      {isSelected && (\n        <div className=\"absolute -inset-1 border-2 border-dashed border-blue-400 rounded-lg pointer-events-none\" />\n      )}\n\n      {/* Resize handles (visible when selected) */}\n      {isSelected && (\n        <>\n          <div className=\"absolute -top-1 -left-1 w-3 h-3 bg-blue-500 rounded-full cursor-nw-resize\" />\n          <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full cursor-ne-resize\" />\n          <div className=\"absolute -bottom-1 -left-1 w-3 h-3 bg-blue-500 rounded-full cursor-sw-resize\" />\n          <div className=\"absolute -bottom-1 -right-1 w-3 h-3 bg-blue-500 rounded-full cursor-se-resize\" />\n        </>\n      )}\n\n      {/* Context Menu Button */}\n      {(isHovered || isSelected) && (\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            setShowMenu(!showMenu);\n          }}\n          className=\"absolute -top-3 -right-3 p-1.5 rounded-full bg-slate-700 hover:bg-slate-600 text-slate-300 shadow-lg transition-all z-50\"\n        >\n          <MoreVertical className=\"w-3 h-3\" />\n        </button>\n      )}\n\n      {/* Dropdown Menu */}\n      <AnimatePresence>\n        {showMenu && (\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95, y: -5 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: -5 }}\n            className=\"absolute -top-2 left-full ml-2 w-48 bg-slate-800 rounded-xl border border-slate-700 shadow-2xl z-50 overflow-hidden\"\n          >\n            <button\n              onClick={handleDuplicate}\n              className=\"w-full px-3 py-2 flex items-center gap-2 text-xs text-slate-300 hover:bg-white/5 transition-colors\"\n            >\n              <Copy className=\"w-3.5 h-3.5\" />\n              Duplicate\n            </button>\n            \n            <button\n              onClick={(e) => { e.stopPropagation(); bringToFront(nodeId); setShowMenu(false); }}\n              className=\"w-full px-3 py-2 flex items-center gap-2 text-xs text-slate-300 hover:bg-white/5 transition-colors\"\n            >\n              <ArrowUp className=\"w-3.5 h-3.5\" />\n              Bring to Front\n            </button>\n            \n            <button\n              onClick={(e) => { e.stopPropagation(); sendToBack(nodeId); setShowMenu(false); }}\n              className=\"w-full px-3 py-2 flex items-center gap-2 text-xs text-slate-300 hover:bg-white/5 transition-colors\"\n            >\n              <ArrowDown className=\"w-3.5 h-3.5\" />\n              Send to Back\n            </button>\n\n            <div className=\"px-3 py-2 border-t border-white/5\">\n              <span className=\"text-[10px] text-slate-500 uppercase tracking-wider\">Color</span>\n              <div className=\"flex flex-wrap gap-1 mt-1.5\">\n                {['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899', '#06B6D4', '#84CC16'].map((color) => (\n                  <button\n                    key={color}\n                    onClick={() => handleColorChange(color)}\n                    className={cn(\n                      'w-5 h-5 rounded-full transition-transform hover:scale-110',\n                      node.data.color === color && 'ring-2 ring-white'\n                    )}\n                    style={{ backgroundColor: color }}\n                  />\n                ))}\n              </div>\n            </div>\n\n            <button\n              onClick={handleDelete}\n              className=\"w-full px-3 py-2 flex items-center gap-2 text-xs text-red-400 hover:bg-red-500/10 transition-colors border-t border-white/5\"\n            >\n              <Trash2 className=\"w-3.5 h-3.5\" />\n              Delete\n            </button>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Click outside to close menu */}\n      {showMenu && (\n        <div \n          className=\"fixed inset-0 z-40\" \n          onClick={() => setShowMenu(false)}\n        />\n      )}\n\n      {/* React Flow Handles */}\n      <Handle\n        type=\"source\"\n        position={Position.Top}\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ top: -6 }}\n      />\n      <Handle\n        type=\"target\"\n        position={Position.Top}\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ top: -6 }}\n      />\n      <Handle\n        type=\"source\"\n        position={Position.Right}\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ right: -6 }}\n      />\n      <Handle\n        type=\"target\"\n        position={Position.Right}\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ right: -6 }}\n      />\n      <Handle\n        type=\"source\"\n        position={Position.Bottom}\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ bottom: -6 }}\n      />\n      <Handle\n        type=\"target\"\n        position={Position.Bottom}\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ bottom: -6 }}\n      />\n      <Handle\n        type=\"source\"\n        position={Position.Left}\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ left: -6 }}\n      />\n      <Handle\n        type=\"target\"\n        position={Position.Left}\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\n        style={{ left: -6 }}\n      />\n    </div>\n  );\n}\n\nexport default memo(FlowchartNodeComponent);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1501, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/flowchart/FlowchartEdge.tsx"],"sourcesContent":["'use client';\n\nimport { memo, useState } from 'react';\nimport {\n  BaseEdge,\n  EdgeLabelRenderer,\n  EdgeProps,\n  getBezierPath,\n  getSmoothStepPath,\n  getStraightPath,\n} from '@xyflow/react';\nimport { useFlowchartStore } from '@/store/flowchartStore';\nimport { cn } from '@/lib/utils';\nimport { X, Settings2 } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nexport default memo(function FlowchartEdgeComponent({\n  id,\n  sourceX,\n  sourceY,\n  targetX,\n  targetY,\n  sourcePosition,\n  targetPosition,\n  data,\n  label,\n  selected,\n}: EdgeProps) {\n  const [showControls, setShowControls] = useState(false);\n  \n  const selectedEdgeId = useFlowchartStore((state) => state.selectedEdgeId);\n  const selectEdge = useFlowchartStore((state) => state.selectEdge);\n  const deleteEdge = useFlowchartStore((state) => state.deleteEdge);\n  const updateEdge = useFlowchartStore((state) => state.updateEdge);\n  const updateEdgeData = useFlowchartStore((state) => state.updateEdgeData);\n  \n  const isSelected = selectedEdgeId === id || selected;\n\n  // Get edge type from data\n  const edgeType = (data?.type as string) || 'smooth';\n  const color = (data?.color as string) || '#64748B';\n  const strokeWidth = (data?.strokeWidth as number) || 2;\n  const strokeStyle = (data?.strokeStyle as string) || 'solid';\n  const startArrow = (data?.startArrow as boolean) || false;\n  const endArrow = (data?.endArrow as boolean) !== false; // default true\n\n  // Calculate path based on edge type\n  let edgePath = '';\n  let labelX = 0;\n  let labelY = 0;\n\n  switch (edgeType) {\n    case 'straight':\n      [edgePath, labelX, labelY] = getStraightPath({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n      });\n      break;\n    case 'step':\n      [edgePath, labelX, labelY] = getSmoothStepPath({\n        sourceX,\n        sourceY,\n        sourcePosition,\n        targetX,\n        targetY,\n        targetPosition,\n        borderRadius: 0,\n      });\n      break;\n    case 'smooth':\n    default:\n      [edgePath, labelX, labelY] = getBezierPath({\n        sourceX,\n        sourceY,\n        sourcePosition,\n        targetX,\n        targetY,\n        targetPosition,\n        curvature: 0.3,\n      });\n      break;\n  }\n\n  const handleDelete = () => {\n    if (id) {\n      deleteEdge(id);\n    }\n  };\n\n  const handleTypeChange = (newType: string) => {\n    if (id) {\n      updateEdge(id, { type: newType as any });\n    }\n  };\n\n  const markerStart = startArrow ? `url(#arrow-start-${id})` : undefined;\n  const markerEnd = endArrow ? `url(#arrow-end-${id})` : undefined;\n\n  const dashArray = strokeStyle === 'dashed' ? '8,4' : strokeStyle === 'dotted' ? '2,4' : undefined;\n\n  return (\n    <>\n      {/* Marker definitions */}\n      <defs>\n        <marker\n          id={`arrow-start-${id}`}\n          markerWidth=\"10\"\n          markerHeight=\"10\"\n          refX=\"0\"\n          refY=\"3\"\n          orient=\"auto\"\n          markerUnits=\"strokeWidth\"\n        >\n          <path d=\"M10,0 L0,3 L10,6\" fill=\"none\" stroke={color} strokeWidth=\"1.5\" />\n        </marker>\n        <marker\n          id={`arrow-end-${id}`}\n          markerWidth=\"10\"\n          markerHeight=\"10\"\n          refX=\"9\"\n          refY=\"3\"\n          orient=\"auto\"\n          markerUnits=\"strokeWidth\"\n        >\n          <path d=\"M0,0 L10,3 L0,6\" fill=\"none\" stroke={color} strokeWidth=\"1.5\" />\n        </marker>\n      </defs>\n\n      <BaseEdge\n        path={edgePath}\n        style={{\n          stroke: color,\n          strokeWidth: isSelected ? strokeWidth + 1 : strokeWidth,\n          strokeDasharray: dashArray,\n        }}\n        markerStart={markerStart}\n        markerEnd={markerEnd}\n        className=\"transition-all duration-200\"\n      />\n\n      {/* Label */}\n      <EdgeLabelRenderer>\n        <div\n          style={{\n            position: 'absolute',\n            transform: `translate(-50%, -50%) translate(${labelX}px, ${labelY}px)`,\n          }}\n          className=\"nodrag nopan\"\n          onMouseEnter={() => setShowControls(true)}\n          onMouseLeave={() => setShowControls(false)}\n        >\n          <AnimatePresence>\n            {(showControls || isSelected) && (\n              <motion.div\n                initial={{ opacity: 0, scale: 0.9 }}\n                animate={{ opacity: 1, scale: 1 }}\n                exit={{ opacity: 0, scale: 0.9 }}\n                className={cn(\n                  'flex items-center gap-1 p-1 rounded-lg',\n                  'bg-slate-800 border border-slate-600 shadow-xl'\n                )}\n              >\n                {/* Type selector */}\n                <select\n                  value={edgeType}\n                  onChange={(e) => handleTypeChange(e.target.value)}\n                  onClick={(e) => e.stopPropagation()}\n                  className=\"text-[10px] bg-slate-700 text-slate-200 rounded px-1.5 py-0.5 border-none outline-none cursor-pointer\"\n                >\n                  <option value=\"smooth\">Smooth</option>\n                  <option value=\"straight\">Straight</option>\n                  <option value=\"step\">Step</option>\n                </select>\n\n                {/* Arrow toggle */}\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    updateEdgeData(id, { endArrow: !endArrow });\n                  }}\n                  className={cn(\n                    \"px-1.5 py-0.5 rounded text-[10px] font-medium transition-colors\",\n                    endArrow ? \"bg-blue-500 text-white\" : \"bg-slate-600 text-slate-300\"\n                  )}\n                >\n                  \n                </button>\n\n                {/* Delete button */}\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDelete();\n                  }}\n                  className=\"p-1 rounded hover:bg-red-500/20 text-red-400 transition-colors\"\n                >\n                  <X className=\"w-3 h-3\" />\n                </button>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      </EdgeLabelRenderer>\n\n      {/* Invisible wider edge for easier selection */}\n      <path\n        d={edgePath}\n        stroke=\"transparent\"\n        strokeWidth={15}\n        fill=\"none\"\n        className=\"cursor-pointer\"\n        onClick={() => id && selectEdge(id)}\n      />\n    </>\n  );\n});\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1827, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/flowchart/FlowchartCanvas.tsx"],"sourcesContent":["'use client';\n\nimport { useCallback, useRef, useEffect, useState } from 'react';\nimport {\n  ReactFlow,\n  Background,\n  BackgroundVariant,\n  Controls,\n  MiniMap,\n  useNodesState,\n  useEdgesState,\n  Connection,\n  ConnectionMode,\n  Panel,\n  useReactFlow,\n  ReactFlowProvider,\n  type Node,\n  type Edge,\n} from '@xyflow/react';\nimport { addEdge as addEdgeHelper } from '@xyflow/react';\nimport '@xyflow/react/dist/style.css';\nimport { useFlowchartStore } from '@/store/flowchartStore';\nimport { FlowchartNode as FlowchartNodeType, type FlowchartNodeType as FlowchartNodeTypeEnum } from '@/types/flowchart';\nimport FlowchartNode from './FlowchartNode';\nimport FlowchartEdge from './FlowchartEdge';\nimport { toPng } from 'html-to-image';\nimport { \n  Download, \n  FileJson, \n  Trash2, \n  Plus,\n  ZoomIn,\n  ZoomOut,\n  Maximize,\n  Grid3X3,\n  MousePointer2,\n  Undo2,\n  Redo2,\n  Keyboard,\n  Copy\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface NodeData extends Record<string, unknown> {\n  nodeId: string;\n}\n\ninterface EdgeData extends Record<string, unknown> {\n  edgeId: string;\n}\n\ntype FlowchartNodeComponentType = Node<NodeData, 'flowchartNode'>;\ntype FlowchartEdgeComponentType = Edge<EdgeData, 'flowchartEdge'>;\n\nconst nodeTypes: any = {\n  flowchartNode: FlowchartNode,\n};\n\nconst edgeTypes: any = {\n  flowchartEdge: FlowchartEdge,\n};\n\nfunction FlowchartCanvasContent() {\n  const reactFlowWrapper = useRef<HTMLDivElement>(null);\n  const {\n    nodes,\n    edges,\n    selectedNodeId,\n    selectedEdgeId,\n    addNode,\n    addEdge,\n    selectNode,\n    selectEdge,\n    clearSelection,\n    moveNode,\n    deleteSelected,\n    duplicateSelected,\n    exportToJSON,\n    importFromJSON,\n    clearAll,\n  } = useFlowchartStore();\n\n  const [flowNodes, setFlowNodes, onNodesChange] = useNodesState<FlowchartNodeComponentType>([]);\n  const [flowEdges, setFlowEdges, onEdgesChange] = useEdgesState<FlowchartEdgeComponentType>([]);\n  const [showGrid, setShowGrid] = useState(true);\n  const [showMiniMap, setShowMiniMap] = useState(true);\n  const { fitView, zoomIn, zoomOut, screenToFlowPosition } = useReactFlow();\n\n  // Convert store nodes to React Flow nodes\n  useEffect(() => {\n    const convertedNodes: FlowchartNodeComponentType[] = nodes.map((node) => ({\n      id: node.id,\n      type: 'flowchartNode',\n      position: node.position,\n      data: { nodeId: node.id },\n      selected: node.id === selectedNodeId,\n      zIndex: node.zIndex || 0,\n    }));\n    setFlowNodes(convertedNodes);\n  }, [nodes, selectedNodeId, setFlowNodes]);\n\n  // Convert store edges to React Flow edges\n  useEffect(() => {\n    const convertedEdges: FlowchartEdgeComponentType[] = edges.map((edge) => ({\n      id: edge.id,\n      source: edge.source,\n      target: edge.target,\n      type: 'flowchartEdge',\n      data: { \n        edgeId: edge.id,\n        ...edge.data,\n        type: edge.type,\n      },\n      selected: edge.id === selectedEdgeId,\n      label: edge.label,\n    }));\n    setFlowEdges(convertedEdges);\n  }, [edges, selectedEdgeId, setFlowEdges]);\n\n  // Handle connections (creating new edges)\n  const onConnect = useCallback(\n    (connection: Connection) => {\n      if (connection.source && connection.target) {\n        addEdge({\n          source: connection.source,\n          target: connection.target,\n          type: 'smooth',\n          sourceHandle: connection.sourceHandle || undefined,\n          targetHandle: connection.targetHandle || undefined,\n        });\n      }\n      setFlowEdges((eds) => {\n        const newEdges = addEdgeHelper(connection, eds);\n        return newEdges as FlowchartEdgeComponentType[];\n      });\n    },\n    [addEdge, setFlowEdges]\n  );\n\n  // Handle node drag stop (update position in store)\n  const onNodeDragStop = useCallback(\n    (_: React.MouseEvent, node: FlowchartNodeComponentType) => {\n      moveNode(node.id, node.position);\n    },\n    [moveNode]\n  );\n\n  // Handle pane click (deselect)\n  const onPaneClick = useCallback(() => {\n    clearSelection();\n  }, [clearSelection]);\n\n  // Handle node click\n  const onNodeClick = useCallback(\n    (_: React.MouseEvent, node: FlowchartNodeComponentType) => {\n      selectNode(node.id);\n    },\n    [selectNode]\n  );\n\n  // Handle edge click\n  const onEdgeClick = useCallback(\n    (_: React.MouseEvent, edge: FlowchartEdgeComponentType) => {\n      selectEdge(edge.id);\n    },\n    [selectEdge]\n  );\n\n  // Handle drop from shape library\n  const onDragOver = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'copy';\n  }, []);\n\n  const onDrop = useCallback(\n    (event: React.DragEvent) => {\n      event.preventDefault();\n\n      const type = event.dataTransfer.getData('application/flowchart-shape') as FlowchartNodeTypeEnum;\n      \n      if (type && reactFlowWrapper.current) {\n        const position = screenToFlowPosition({\n          x: event.clientX,\n          y: event.clientY,\n        });\n        \n        // Center the node on the drop position\n        addNode(type, { \n          x: position.x - 70, \n          y: position.y - 40 \n        });\n      }\n    },\n    [addNode, screenToFlowPosition]\n  );\n\n  // Add node at center\n  const handleAddNode = useCallback((type: FlowchartNodeTypeEnum = 'process') => {\n    const wrapper = reactFlowWrapper.current;\n    if (wrapper) {\n      const { width, height } = wrapper.getBoundingClientRect();\n      const centerPosition = screenToFlowPosition({\n        x: width / 2,\n        y: height / 2,\n      });\n      addNode(type, { \n        x: centerPosition.x - 70, \n        y: centerPosition.y - 40 \n      });\n    }\n  }, [addNode, screenToFlowPosition]);\n\n  // Export as PNG\n  const handleExportImage = useCallback(async () => {\n    if (reactFlowWrapper.current) {\n      const dataUrl = await toPng(reactFlowWrapper.current, {\n        backgroundColor: '#0f172a',\n      });\n      const link = document.createElement('a');\n      link.download = 'flowchart.png';\n      link.href = dataUrl;\n      link.click();\n    }\n  }, []);\n\n  // Export as JSON\n  const handleExportJSON = useCallback(() => {\n    const json = exportToJSON();\n    const blob = new Blob([json], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.download = 'flowchart.json';\n    link.href = url;\n    link.click();\n    URL.revokeObjectURL(url);\n  }, [exportToJSON]);\n\n  // Import JSON\n  const handleImportJSON = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        try {\n          const json = event.target?.result as string;\n          importFromJSON(json);\n        } catch (error) {\n          alert('Invalid JSON file');\n        }\n      };\n      reader.readAsText(file);\n    }\n    e.target.value = '';\n  }, [importFromJSON]);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const target = e.target as HTMLElement;\n      const isInput = target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.isContentEditable;\n      \n      // Delete\n      if ((e.key === 'Delete' || e.key === 'Backspace') && !isInput) {\n        deleteSelected();\n      }\n      // Duplicate\n      if ((e.ctrlKey || e.metaKey) && e.key === 'd') {\n        e.preventDefault();\n        duplicateSelected();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [deleteSelected, duplicateSelected]);\n\n  return (\n    <div className=\"relative w-full h-full\" ref={reactFlowWrapper}>\n      <ReactFlow\n        nodes={flowNodes}\n        edges={flowEdges}\n        onNodesChange={onNodesChange}\n        onEdgesChange={onEdgesChange}\n        onConnect={onConnect}\n        onNodeDragStop={onNodeDragStop}\n        onPaneClick={onPaneClick}\n        onNodeClick={onNodeClick}\n        onEdgeClick={onEdgeClick}\n        onDragOver={onDragOver}\n        onDrop={onDrop}\n        nodeTypes={nodeTypes}\n        edgeTypes={edgeTypes}\n        connectionMode={ConnectionMode.Loose}\n        fitView\n        fitViewOptions={{ padding: 0.2 }}\n        defaultEdgeOptions={{\n          type: 'flowchartEdge',\n        }}\n        snapToGrid\n        snapGrid={[15, 15]}\n        className=\"bg-slate-950\"\n        deleteKeyCode={['Backspace', 'Delete']}\n      >\n        {showGrid && (\n          <Background\n            variant={BackgroundVariant.Dots}\n            gap={20}\n            size={1}\n            color=\"rgba(148, 163, 184, 0.15)\"\n            className=\"bg-slate-950\"\n          />\n        )}\n\n        <Controls \n          className=\"!bg-slate-800/80 !border-slate-700 !shadow-xl !rounded-xl overflow-hidden\"\n          showInteractive={false}\n        />\n\n        {showMiniMap && (\n          <MiniMap\n            className=\"!bg-slate-800/80 !border-slate-700 !rounded-xl !shadow-xl !overflow-hidden\"\n            nodeStrokeWidth={3}\n            zoomable\n            pannable\n            maskColor=\"rgba(15, 23, 42, 0.7)\"\n            nodeColor={(node) => {\n              const flowNode = nodes.find((n) => n.id === node.id);\n              return flowNode?.data.color || '#64748B';\n            }}\n          />\n        )}\n\n        {/* Toolbar */}\n        <Panel position=\"top-left\" className=\"m-4\">\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"flex items-center gap-2 p-2 bg-slate-800/90 backdrop-blur-sm rounded-xl border border-slate-700 shadow-2xl\"\n          >\n            <button\n              onClick={() => handleAddNode('process')}\n              className=\"flex items-center gap-2 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-all\"\n            >\n              <Plus className=\"w-4 h-4\" />\n              Add Node\n            </button>\n\n            <div className=\"w-px h-6 bg-slate-600 mx-1\" />\n\n            <button\n              onClick={() => zoomOut()}\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\n              title=\"Zoom Out\"\n            >\n              <ZoomOut className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => fitView({ padding: 0.2 })}\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\n              title=\"Fit View\"\n            >\n              <Maximize className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => zoomIn()}\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\n              title=\"Zoom In\"\n            >\n              <ZoomIn className=\"w-4 h-4\" />\n            </button>\n\n            <div className=\"w-px h-6 bg-slate-600 mx-1\" />\n\n            <button\n              onClick={() => setShowGrid(!showGrid)}\n              className={cn(\n                \"p-2 rounded-lg transition-colors\",\n                showGrid \n                  ? \"text-blue-400 bg-blue-500/20\" \n                  : \"text-slate-400 hover:text-white hover:bg-white/10\"\n              )}\n              title=\"Toggle Grid\"\n            >\n              <Grid3X3 className=\"w-4 h-4\" />\n            </button>\n          </motion.div>\n        </Panel>\n\n        {/* Export/Import Panel */}\n        <Panel position=\"top-right\" className=\"m-4\">\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"flex flex-col gap-2\"\n          >\n            <div className=\"flex items-center gap-2 p-2 bg-slate-800/90 backdrop-blur-sm rounded-xl border border-slate-700 shadow-2xl\">\n              <label className=\"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm cursor-pointer transition-colors\">\n                <FileJson className=\"w-4 h-4\" />\n                Import\n                <input\n                  type=\"file\"\n                  accept=\".json\"\n                  onChange={handleImportJSON}\n                  className=\"hidden\"\n                />\n              </label>\n\n              <div className=\"w-px h-6 bg-slate-600\" />\n\n              <button\n                onClick={handleExportJSON}\n                className=\"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-colors\"\n                title=\"Export as JSON\"\n              >\n                <FileJson className=\"w-4 h-4\" />\n                JSON\n              </button>\n              <button\n                onClick={handleExportImage}\n                className=\"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-colors\"\n                title=\"Export as Image\"\n              >\n                <Download className=\"w-4 h-4\" />\n                PNG\n              </button>\n\n              <div className=\"w-px h-6 bg-slate-600\" />\n\n              <button\n                onClick={() => {\n                  if (confirm('Are you sure you want to clear all?')) {\n                    clearAll();\n                  }\n                }}\n                className=\"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors\"\n                title=\"Clear All\"\n              >\n                <Trash2 className=\"w-4 h-4\" />\n              </button>\n            </div>\n\n            {/* Stats */}\n            <div className=\"flex justify-end\">\n              <div className=\"px-3 py-1.5 bg-slate-800/60 backdrop-blur-sm rounded-lg border border-slate-700/50\">\n                <span className=\"text-xs text-slate-400\">\n                  {nodes.length} node{nodes.length !== 1 ? 's' : ''}  {edges.length} connection{edges.length !== 1 ? 's' : ''}\n                </span>\n              </div>\n            </div>\n          </motion.div>\n        </Panel>\n\n        {/* Keyboard Shortcuts Hint */}\n        <Panel position=\"bottom-center\" className=\"mb-4\">\n          <div className=\"px-4 py-2 bg-slate-800/80 backdrop-blur-sm rounded-full border border-slate-700/50 text-xs text-slate-400 flex items-center gap-4\">\n            <span className=\"flex items-center gap-1.5\">\n              <Keyboard className=\"w-3.5 h-3.5\" />\n              Shortcuts:\n            </span>\n            <span><kbd className=\"px-1.5 py-0.5 bg-slate-700 rounded text-slate-300\">Delete</kbd> Remove</span>\n            <span><kbd className=\"px-1.5 py-0.5 bg-slate-700 rounded text-slate-300\">Ctrl+D</kbd> Duplicate</span>\n            <span><kbd className=\"px-1.5 py-0.5 bg-slate-700 rounded text-slate-300\">Drag</kbd> Connect</span>\n          </div>\n        </Panel>\n      </ReactFlow>\n    </div>\n  );\n}\n\nexport default function FlowchartCanvas() {\n  return (\n    <ReactFlowProvider>\n      <FlowchartCanvasContent />\n    </ReactFlowProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAkBA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;;;AA1CA;;;;;;;;;;;;AAuDA,MAAM,YAAiB;IACrB,eAAe,8JAAa;AAC9B;AAEA,MAAM,YAAiB;IACrB,eAAe,8JAAa;AAC9B;AAEA,SAAS;;IACP,MAAM,mBAAmB,IAAA,uKAAM,EAAiB;IAChD,MAAM,EACJ,KAAK,EACL,KAAK,EACL,cAAc,EACd,cAAc,EACd,OAAO,EACP,OAAO,EACP,UAAU,EACV,UAAU,EACV,cAAc,EACd,QAAQ,EACR,cAAc,EACd,iBAAiB,EACjB,YAAY,EACZ,cAAc,EACd,QAAQ,EACT,GAAG,IAAA,sJAAiB;IAErB,MAAM,CAAC,WAAW,cAAc,cAAc,GAAG,IAAA,6LAAa,EAA6B,EAAE;IAC7F,MAAM,CAAC,WAAW,cAAc,cAAc,GAAG,IAAA,6LAAa,EAA6B,EAAE;IAC7F,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,oBAAoB,EAAE,GAAG,IAAA,4LAAY;IAEvE,0CAA0C;IAC1C,IAAA,0KAAS;4CAAC;YACR,MAAM,iBAA+C,MAAM,GAAG;mEAAC,CAAC,OAAS,CAAC;wBACxE,IAAI,KAAK,EAAE;wBACX,MAAM;wBACN,UAAU,KAAK,QAAQ;wBACvB,MAAM;4BAAE,QAAQ,KAAK,EAAE;wBAAC;wBACxB,UAAU,KAAK,EAAE,KAAK;wBACtB,QAAQ,KAAK,MAAM,IAAI;oBACzB,CAAC;;YACD,aAAa;QACf;2CAAG;QAAC;QAAO;QAAgB;KAAa;IAExC,0CAA0C;IAC1C,IAAA,0KAAS;4CAAC;YACR,MAAM,iBAA+C,MAAM,GAAG;mEAAC,CAAC,OAAS,CAAC;wBACxE,IAAI,KAAK,EAAE;wBACX,QAAQ,KAAK,MAAM;wBACnB,QAAQ,KAAK,MAAM;wBACnB,MAAM;wBACN,MAAM;4BACJ,QAAQ,KAAK,EAAE;4BACf,GAAG,KAAK,IAAI;4BACZ,MAAM,KAAK,IAAI;wBACjB;wBACA,UAAU,KAAK,EAAE,KAAK;wBACtB,OAAO,KAAK,KAAK;oBACnB,CAAC;;YACD,aAAa;QACf;2CAAG;QAAC;QAAO;QAAgB;KAAa;IAExC,0CAA0C;IAC1C,MAAM,YAAY,IAAA,4KAAW;yDAC3B,CAAC;YACC,IAAI,WAAW,MAAM,IAAI,WAAW,MAAM,EAAE;gBAC1C,QAAQ;oBACN,QAAQ,WAAW,MAAM;oBACzB,QAAQ,WAAW,MAAM;oBACzB,MAAM;oBACN,cAAc,WAAW,YAAY,IAAI;oBACzC,cAAc,WAAW,YAAY,IAAI;gBAC3C;YACF;YACA;iEAAa,CAAC;oBACZ,MAAM,WAAW,IAAA,wKAAa,EAAC,YAAY;oBAC3C,OAAO;gBACT;;QACF;wDACA;QAAC;QAAS;KAAa;IAGzB,mDAAmD;IACnD,MAAM,iBAAiB,IAAA,4KAAW;8DAChC,CAAC,GAAqB;YACpB,SAAS,KAAK,EAAE,EAAE,KAAK,QAAQ;QACjC;6DACA;QAAC;KAAS;IAGZ,+BAA+B;IAC/B,MAAM,cAAc,IAAA,4KAAW;2DAAC;YAC9B;QACF;0DAAG;QAAC;KAAe;IAEnB,oBAAoB;IACpB,MAAM,cAAc,IAAA,4KAAW;2DAC7B,CAAC,GAAqB;YACpB,WAAW,KAAK,EAAE;QACpB;0DACA;QAAC;KAAW;IAGd,oBAAoB;IACpB,MAAM,cAAc,IAAA,4KAAW;2DAC7B,CAAC,GAAqB;YACpB,WAAW,KAAK,EAAE;QACpB;0DACA;QAAC;KAAW;IAGd,iCAAiC;IACjC,MAAM,aAAa,IAAA,4KAAW;0DAAC,CAAC;YAC9B,MAAM,cAAc;YACpB,MAAM,YAAY,CAAC,UAAU,GAAG;QAClC;yDAAG,EAAE;IAEL,MAAM,SAAS,IAAA,4KAAW;sDACxB,CAAC;YACC,MAAM,cAAc;YAEpB,MAAM,OAAO,MAAM,YAAY,CAAC,OAAO,CAAC;YAExC,IAAI,QAAQ,iBAAiB,OAAO,EAAE;gBACpC,MAAM,WAAW,qBAAqB;oBACpC,GAAG,MAAM,OAAO;oBAChB,GAAG,MAAM,OAAO;gBAClB;gBAEA,uCAAuC;gBACvC,QAAQ,MAAM;oBACZ,GAAG,SAAS,CAAC,GAAG;oBAChB,GAAG,SAAS,CAAC,GAAG;gBAClB;YACF;QACF;qDACA;QAAC;QAAS;KAAqB;IAGjC,qBAAqB;IACrB,MAAM,gBAAgB,IAAA,4KAAW;6DAAC,CAAC,OAA8B,SAAS;YACxE,MAAM,UAAU,iBAAiB,OAAO;YACxC,IAAI,SAAS;gBACX,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,QAAQ,qBAAqB;gBACvD,MAAM,iBAAiB,qBAAqB;oBAC1C,GAAG,QAAQ;oBACX,GAAG,SAAS;gBACd;gBACA,QAAQ,MAAM;oBACZ,GAAG,eAAe,CAAC,GAAG;oBACtB,GAAG,eAAe,CAAC,GAAG;gBACxB;YACF;QACF;4DAAG;QAAC;QAAS;KAAqB;IAElC,gBAAgB;IAChB,MAAM,oBAAoB,IAAA,4KAAW;iEAAC;YACpC,IAAI,iBAAiB,OAAO,EAAE;gBAC5B,MAAM,UAAU,MAAM,IAAA,8JAAK,EAAC,iBAAiB,OAAO,EAAE;oBACpD,iBAAiB;gBACnB;gBACA,MAAM,OAAO,SAAS,aAAa,CAAC;gBACpC,KAAK,QAAQ,GAAG;gBAChB,KAAK,IAAI,GAAG;gBACZ,KAAK,KAAK;YACZ;QACF;gEAAG,EAAE;IAEL,iBAAiB;IACjB,MAAM,mBAAmB,IAAA,4KAAW;gEAAC;YACnC,MAAM,OAAO;YACb,MAAM,OAAO,IAAI,KAAK;gBAAC;aAAK,EAAE;gBAAE,MAAM;YAAmB;YACzD,MAAM,MAAM,IAAI,eAAe,CAAC;YAChC,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,KAAK,QAAQ,GAAG;YAChB,KAAK,IAAI,GAAG;YACZ,KAAK,KAAK;YACV,IAAI,eAAe,CAAC;QACtB;+DAAG;QAAC;KAAa;IAEjB,cAAc;IACd,MAAM,mBAAmB,IAAA,4KAAW;gEAAC,CAAC;YACpC,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;YAChC,IAAI,MAAM;gBACR,MAAM,SAAS,IAAI;gBACnB,OAAO,MAAM;4EAAG,CAAC;wBACf,IAAI;4BACF,MAAM,OAAO,MAAM,MAAM,EAAE;4BAC3B,eAAe;wBACjB,EAAE,OAAO,OAAO;4BACd,MAAM;wBACR;oBACF;;gBACA,OAAO,UAAU,CAAC;YACpB;YACA,EAAE,MAAM,CAAC,KAAK,GAAG;QACnB;+DAAG;QAAC;KAAe;IAEnB,qBAAqB;IACrB,IAAA,0KAAS;4CAAC;YACR,MAAM;kEAAgB,CAAC;oBACrB,MAAM,SAAS,EAAE,MAAM;oBACvB,MAAM,UAAU,OAAO,OAAO,KAAK,WAAW,OAAO,OAAO,KAAK,cAAc,OAAO,iBAAiB;oBAEvG,SAAS;oBACT,IAAI,CAAC,EAAE,GAAG,KAAK,YAAY,EAAE,GAAG,KAAK,WAAW,KAAK,CAAC,SAAS;wBAC7D;oBACF;oBACA,YAAY;oBACZ,IAAI,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,EAAE,GAAG,KAAK,KAAK;wBAC7C,EAAE,cAAc;wBAChB;oBACF;gBACF;;YAEA,OAAO,gBAAgB,CAAC,WAAW;YACnC;oDAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;;QACrD;2CAAG;QAAC;QAAgB;KAAkB;IAEtC,qBACE,6LAAC;QAAI,WAAU;QAAyB,KAAK;kBAC3C,cAAA,6LAAC,yLAAS;YACR,OAAO;YACP,OAAO;YACP,eAAe;YACf,eAAe;YACf,WAAW;YACX,gBAAgB;YAChB,aAAa;YACb,aAAa;YACb,aAAa;YACb,YAAY;YACZ,QAAQ;YACR,WAAW;YACX,WAAW;YACX,gBAAgB,+KAAc,CAAC,KAAK;YACpC,OAAO;YACP,gBAAgB;gBAAE,SAAS;YAAI;YAC/B,oBAAoB;gBAClB,MAAM;YACR;YACA,UAAU;YACV,UAAU;gBAAC;gBAAI;aAAG;YAClB,WAAU;YACV,eAAe;gBAAC;gBAAa;aAAS;;gBAErC,0BACC,6LAAC,0LAAU;oBACT,SAAS,iMAAiB,CAAC,IAAI;oBAC/B,KAAK;oBACL,MAAM;oBACN,OAAM;oBACN,WAAU;;;;;;8BAId,6LAAC,wLAAQ;oBACP,WAAU;oBACV,iBAAiB;;;;;;gBAGlB,6BACC,6LAAC,uLAAO;oBACN,WAAU;oBACV,iBAAiB;oBACjB,QAAQ;oBACR,QAAQ;oBACR,WAAU;oBACV,WAAW,CAAC;wBACV,MAAM,WAAW,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,EAAE;wBACnD,OAAO,UAAU,KAAK,SAAS;oBACjC;;;;;;8BAKJ,6LAAC,qLAAK;oBAAC,UAAS;oBAAW,WAAU;8BACnC,cAAA,6LAAC,uMAAM,CAAC,GAAG;wBACT,SAAS;4BAAE,SAAS;4BAAG,GAAG,CAAC;wBAAG;wBAC9B,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAC5B,WAAU;;0CAEV,6LAAC;gCACC,SAAS,IAAM,cAAc;gCAC7B,WAAU;;kDAEV,6LAAC,6MAAI;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAI9B,6LAAC;gCAAI,WAAU;;;;;;0CAEf,6LAAC;gCACC,SAAS,IAAM;gCACf,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,0NAAO;oCAAC,WAAU;;;;;;;;;;;0CAErB,6LAAC;gCACC,SAAS,IAAM,QAAQ;wCAAE,SAAS;oCAAI;gCACtC,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,yNAAQ;oCAAC,WAAU;;;;;;;;;;;0CAEtB,6LAAC;gCACC,SAAS,IAAM;gCACf,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,uNAAM;oCAAC,WAAU;;;;;;;;;;;0CAGpB,6LAAC;gCAAI,WAAU;;;;;;0CAEf,6LAAC;gCACC,SAAS,IAAM,YAAY,CAAC;gCAC5B,WAAW,IAAA,4HAAE,EACX,oCACA,WACI,iCACA;gCAEN,OAAM;0CAEN,cAAA,6LAAC,0NAAO;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;8BAMzB,6LAAC,qLAAK;oBAAC,UAAS;oBAAY,WAAU;8BACpC,cAAA,6LAAC,uMAAM,CAAC,GAAG;wBACT,SAAS;4BAAE,SAAS;4BAAG,GAAG,CAAC;wBAAG;wBAC9B,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAC5B,WAAU;;0CAEV,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAM,WAAU;;0DACf,6LAAC,+NAAQ;gDAAC,WAAU;;;;;;4CAAY;0DAEhC,6LAAC;gDACC,MAAK;gDACL,QAAO;gDACP,UAAU;gDACV,WAAU;;;;;;;;;;;;kDAId,6LAAC;wCAAI,WAAU;;;;;;kDAEf,6LAAC;wCACC,SAAS;wCACT,WAAU;wCACV,OAAM;;0DAEN,6LAAC,+NAAQ;gDAAC,WAAU;;;;;;4CAAY;;;;;;;kDAGlC,6LAAC;wCACC,SAAS;wCACT,WAAU;wCACV,OAAM;;0DAEN,6LAAC,yNAAQ;gDAAC,WAAU;;;;;;4CAAY;;;;;;;kDAIlC,6LAAC;wCAAI,WAAU;;;;;;kDAEf,6LAAC;wCACC,SAAS;4CACP,IAAI,QAAQ,wCAAwC;gDAClD;4CACF;wCACF;wCACA,WAAU;wCACV,OAAM;kDAEN,cAAA,6LAAC,uNAAM;4CAAC,WAAU;;;;;;;;;;;;;;;;;0CAKtB,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAK,WAAU;;4CACb,MAAM,MAAM;4CAAC;4CAAM,MAAM,MAAM,KAAK,IAAI,MAAM;4CAAG;4CAAI,MAAM,MAAM;4CAAC;4CAAY,MAAM,MAAM,KAAK,IAAI,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAQpH,6LAAC,qLAAK;oBAAC,UAAS;oBAAgB,WAAU;8BACxC,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;;kDACd,6LAAC,yNAAQ;wCAAC,WAAU;;;;;;oCAAgB;;;;;;;0CAGtC,6LAAC;;kDAAK,6LAAC;wCAAI,WAAU;kDAAoD;;;;;;oCAAY;;;;;;;0CACrF,6LAAC;;kDAAK,6LAAC;wCAAI,WAAU;kDAAoD;;;;;;oCAAY;;;;;;;0CACrF,6LAAC;;kDAAK,6LAAC;wCAAI,WAAU;kDAAoD;;;;;;oCAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM/F;GArZS;;QAkBH,sJAAiB;QAE4B,6LAAa;QACb,6LAAa;QAGH,4LAAY;;;KAxBhE;AAuZM,SAAS;IACtB,qBACE,6LAAC,iMAAiB;kBAChB,cAAA,6LAAC;;;;;;;;;;AAGP;MANwB"}},
    {"offset": {"line": 2597, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/flowchart/ShapeLibrary.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { FLOWCHART_SHAPES, type FlowchartNodeType } from '@/types/flowchart';\nimport { cn } from '@/lib/utils';\nimport { \n  Play, \n  Square, \n  Diamond, \n  Database, \n  FileText, \n  Clock,\n  HardDrive,\n  Monitor,\n  Hexagon,\n  CircleDot,\n  ArrowRightToLine,\n  Keyboard,\n  ChevronRight,\n  ChevronDown,\n  Search,\n  X\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface ShapeLibraryProps {\n  onDragStart: (type: FlowchartNodeType) => void;\n}\n\nconst iconMap: Record<string, React.ReactNode> = {\n  'Circle': <div className=\"w-4 h-4 rounded-full bg-current\" />,\n  'Square': <Square className=\"w-4 h-4\" />,\n  'Diamond': <Diamond className=\"w-4 h-4\" />,\n  'Parallelogram': <div className=\"w-4 h-3 bg-current transform skew-x-12\" />,\n  'FileText': <FileText className=\"w-4 h-4\" />,\n  'Database': <Database className=\"w-4 h-4\" />,\n  'RectangleHorizontal': <div className=\"w-5 h-3 border-2 border-current\" />,\n  'Clock': <Clock className=\"w-4 h-4\" />,\n  'HardDrive': <HardDrive className=\"w-4 h-4\" />,\n  'Keyboard': <Keyboard className=\"w-4 h-4\" />,\n  'Monitor': <Monitor className=\"w-4 h-4\" />,\n  'Hexagon': <Hexagon className=\"w-4 h-4\" />,\n  'CircleDot': <CircleDot className=\"w-4 h-4\" />,\n  'ArrowRightToLine': <ArrowRightToLine className=\"w-4 h-4\" />,\n};\n\nconst categories = [\n  { id: 'basic', name: 'Basic', types: ['start', 'end', 'process', 'decision'] as FlowchartNodeType[] },\n  { id: 'io', name: 'Input/Output', types: ['input', 'output', 'document'] as FlowchartNodeType[] },\n  { id: 'data', name: 'Data', types: ['database', 'stored-data'] as FlowchartNodeType[] },\n  { id: 'advanced', name: 'Advanced', types: ['predefined', 'delay', 'manual-input', 'display', 'preparation'] as FlowchartNodeType[] },\n  { id: 'connector', name: 'Connectors', types: ['connector', 'off-page'] as FlowchartNodeType[] },\n];\n\nexport default function ShapeLibrary({ onDragStart }: ShapeLibraryProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [expandedCategories, setExpandedCategories] = useState<string[]>(['basic']);\n\n  const toggleCategory = (categoryId: string) => {\n    setExpandedCategories(prev => \n      prev.includes(categoryId) \n        ? prev.filter(id => id !== categoryId)\n        : [...prev, categoryId]\n    );\n  };\n\n  const filteredShapes = searchQuery \n    ? FLOWCHART_SHAPES.filter(shape => \n        shape.label.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        shape.description.toLowerCase().includes(searchQuery.toLowerCase())\n      )\n    : null;\n\n  return (\n    <div className=\"w-full h-full bg-slate-900/95 backdrop-blur-sm flex flex-col\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-slate-800\">\n        <h2 className=\"font-semibold text-slate-200\">Shapes</h2>\n      </div>\n\n      {/* Search */}\n      <div className=\"px-3 py-2 border-b border-slate-800\">\n        <div className=\"relative\">\n          <Search className=\"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500\" />\n          <input\n            type=\"text\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            placeholder=\"Search shapes...\"\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-9 pr-8 py-1.5 text-sm text-slate-200 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n          />\n          {searchQuery && (\n            <button\n              onClick={() => setSearchQuery('')}\n              className=\"absolute right-2.5 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300\"\n            >\n              <X className=\"w-3.5 h-3.5\" />\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Shape List */}\n      <div className=\"flex-1 overflow-y-auto py-2\">\n        {filteredShapes ? (\n          // Search results\n          <div className=\"px-2 space-y-1\">\n            {filteredShapes.map((shape) => (\n              <DraggableShapeItem \n                key={shape.type} \n                shape={shape} \n                onDragStart={() => onDragStart(shape.type)}\n              />\n            ))}\n            {filteredShapes.length === 0 && (\n              <div className=\"text-center py-8 text-slate-500 text-sm\">\n                No shapes found\n              </div>\n            )}\n          </div>\n        ) : (\n          // Categories\n          <div className=\"space-y-1\">\n            {categories.map((category) => (\n              <div key={category.id}>\n                <button\n                  onClick={() => toggleCategory(category.id)}\n                  className=\"w-full flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-colors\"\n                >\n                  {expandedCategories.includes(category.id) ? (\n                    <ChevronDown className=\"w-4 h-4\" />\n                  ) : (\n                    <ChevronRight className=\"w-4 h-4\" />\n                  )}\n                  {category.name}\n                </button>\n                \n                <AnimatePresence>\n                  {expandedCategories.includes(category.id) && (\n                    <motion.div\n                      initial={{ height: 0, opacity: 0 }}\n                      animate={{ height: 'auto', opacity: 1 }}\n                      exit={{ height: 0, opacity: 0 }}\n                      className=\"overflow-hidden\"\n                    >\n                      <div className=\"px-2 pb-2 space-y-1\">\n                        {category.types.map((type) => {\n                          const shape = FLOWCHART_SHAPES.find(s => s.type === type);\n                          if (!shape) return null;\n                          return (\n                            <DraggableShapeItem \n                              key={shape.type} \n                              shape={shape} \n                              onDragStart={() => onDragStart(shape.type)}\n                            />\n                          );\n                        })}\n                      </div>\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Tips */}\n      <div className=\"px-4 py-3 border-t border-slate-800\">\n        <p className=\"text-xs text-slate-500\">\n          Drag shapes to the canvas or click to add at center\n        </p>\n      </div>\n    </div>\n  );\n}\n\ninterface DraggableShapeItemProps {\n  shape: typeof FLOWCHART_SHAPES[0];\n  onDragStart: () => void;\n}\n\nfunction DraggableShapeItem({ shape, onDragStart }: DraggableShapeItemProps) {\n  const [isDragging, setIsDragging] = useState(false);\n\n  return (\n    <div\n      draggable\n      onDragStart={(e) => {\n        setIsDragging(true);\n        onDragStart();\n        // Set drag data\n        e.dataTransfer.setData('application/flowchart-shape', shape.type);\n        e.dataTransfer.effectAllowed = 'copy';\n      }}\n      onDragEnd={() => setIsDragging(false)}\n      className={cn(\n        'group flex items-center gap-3 px-3 py-2 rounded-lg cursor-grab',\n        'hover:bg-white/5 transition-all duration-200',\n        isDragging && 'opacity-50 cursor-grabbing'\n      )}\n    >\n      {/* Icon */}\n      <div \n        className=\"w-8 h-8 rounded-lg flex items-center justify-center text-white shrink-0\"\n        style={{ backgroundColor: shape.defaultColor }}\n      >\n        {iconMap[shape.icon] || <Square className=\"w-4 h-4\" />}\n      </div>\n\n      {/* Info */}\n      <div className=\"flex-1 min-w-0\">\n        <p className=\"text-sm font-medium text-slate-300 group-hover:text-white truncate\">\n          {shape.label}\n        </p>\n        <p className=\"text-xs text-slate-500 truncate\">\n          {shape.description}\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3074, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/flowchart/PropertiesPanel.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useFlowchartStore } from '@/store/flowchartStore';\nimport { cn } from '@/lib/utils';\nimport { \n  X, \n  Settings2, \n  Trash2,\n  Type,\n  Palette,\n  Layout,\n  ArrowUp,\n  ArrowDown,\n  RotateCw,\n  Copy,\n  Maximize2,\n  Move,\n  Link2\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { FLOWCHART_COLORS, type FlowchartEdgeType } from '@/types/flowchart';\n\nexport default function FlowchartPropertiesPanel() {\n  const [activeTab, setActiveTab] = useState<'node' | 'edge' | 'style'>('node');\n  \n  const {\n    nodes,\n    edges,\n    selectedNodeId,\n    selectedEdgeId,\n    updateNode,\n    updateNodeData,\n    updateEdge,\n    updateEdgeData,\n    deleteNode,\n    deleteEdge,\n    duplicateNode,\n    bringToFront,\n    sendToBack,\n    clearSelection,\n  } = useFlowchartStore();\n\n  const selectedNode = nodes.find((n) => n.id === selectedNodeId);\n  const selectedEdge = edges.find((e) => e.id === selectedEdgeId);\n\n  // Update active tab based on selection\n  if (selectedEdge && activeTab !== 'edge') {\n    setActiveTab('edge');\n  } else if (selectedNode && activeTab !== 'node' && activeTab !== 'style') {\n    setActiveTab('node');\n  }\n\n  const hasSelection = selectedNode || selectedEdge;\n\n  if (!hasSelection) {\n    return (\n      <motion.div\n        initial={{ opacity: 0, x: 20 }}\n        animate={{ opacity: 1, x: 0 }}\n        className=\"w-full h-full bg-slate-900/95 backdrop-blur-sm flex flex-col\"\n      >\n        <div className=\"flex items-center justify-between px-4 py-3 border-b border-slate-800\">\n          <h2 className=\"font-semibold text-slate-200\">Properties</h2>\n        </div>\n        <div className=\"flex-1 flex flex-col items-center justify-center p-8 text-center\">\n          <div className=\"w-16 h-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4\">\n            <Settings2 className=\"w-8 h-8 text-slate-500\" />\n          </div>\n          <p className=\"text-slate-400 text-sm\">\n            Select a node or connection to edit its properties\n          </p>\n          <div className=\"mt-6 space-y-2 text-xs text-slate-500\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded bg-slate-700\" />\n              <span>Drag shapes from the left panel</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded-full border-2 border-slate-500\" />\n              <span>Connect nodes by dragging handles</span>\n            </div>\n          </div>\n        </div>\n      </motion.div>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: 20 }}\n      animate={{ opacity: 1, x: 0 }}\n      className=\"w-full h-full bg-slate-900/95 backdrop-blur-sm flex flex-col\"\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-slate-800\">\n        <div className=\"flex items-center gap-2\">\n          {selectedEdge ? (\n            <>\n              <Link2 className=\"w-4 h-4 text-blue-400\" />\n              <h2 className=\"font-semibold text-slate-200\">Connection</h2>\n            </>\n          ) : (\n            <>\n              <div \n                className=\"w-4 h-4 rounded\"\n                style={{ backgroundColor: selectedNode?.data.color || '#3B82F6' }}\n              />\n              <h2 className=\"font-semibold text-slate-200\">Node</h2>\n            </>\n          )}\n        </div>\n        <button\n          onClick={clearSelection}\n          className=\"p-1.5 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors\"\n        >\n          <X className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {/* Tabs */}\n      {selectedNode && (\n        <div className=\"flex border-b border-slate-800\">\n          <button\n            onClick={() => setActiveTab('node')}\n            className={cn(\n              'flex-1 px-4 py-2 text-xs font-medium transition-colors',\n              activeTab === 'node' \n                ? 'text-blue-400 border-b-2 border-blue-400' \n                : 'text-slate-400 hover:text-slate-200'\n            )}\n          >\n            Content\n          </button>\n          <button\n            onClick={() => setActiveTab('style')}\n            className={cn(\n              'flex-1 px-4 py-2 text-xs font-medium transition-colors',\n              activeTab === 'style' \n                ? 'text-blue-400 border-b-2 border-blue-400' \n                : 'text-slate-400 hover:text-slate-200'\n            )}\n          >\n            Style\n          </button>\n        </div>\n      )}\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        <AnimatePresence mode=\"wait\">\n          {/* Node Properties - Content Tab */}\n          {selectedNode && activeTab === 'node' && (\n            <motion.div\n              key=\"node-content\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-4\"\n            >\n              {/* Label */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5\">\n                  <Type className=\"w-3.5 h-3.5\" />\n                  Label\n                </label>\n                <input\n                  type=\"text\"\n                  value={selectedNode.data.label}\n                  onChange={(e) => updateNodeData(selectedNode.id, { label: e.target.value })}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n                  placeholder=\"Enter label...\"\n                />\n              </div>\n\n              {/* Description */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">\n                  Description\n                </label>\n                <textarea\n                  value={selectedNode.data.description || ''}\n                  onChange={(e) => updateNodeData(selectedNode.id, { description: e.target.value })}\n                  rows={3}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 resize-none\"\n                  placeholder=\"Add description...\"\n                />\n              </div>\n\n              {/* Node Type Info */}\n              <div className=\"p-3 bg-slate-800/50 rounded-lg border border-slate-700/50\">\n                <span className=\"text-[10px] text-slate-500 uppercase tracking-wider\">Type</span>\n                <p className=\"text-sm text-slate-300 mt-1 capitalize\">\n                  {selectedNode.type.replace('-', ' ')}\n                </p>\n              </div>\n\n              {/* Dimensions */}\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5\">\n                    <Maximize2 className=\"w-3.5 h-3.5\" />\n                    Width\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={selectedNode.size.width}\n                    onChange={(e) => updateNode(selectedNode.id, { \n                      size: { ...selectedNode.size, width: parseInt(e.target.value) || 100 }\n                    })}\n                    className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n                  />\n                </div>\n                <div>\n                  <label className=\"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5\">\n                    <Maximize2 className=\"w-3.5 h-3.5\" />\n                    Height\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={selectedNode.size.height}\n                    onChange={(e) => updateNode(selectedNode.id, { \n                      size: { ...selectedNode.size, height: parseInt(e.target.value) || 60 }\n                    })}\n                    className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\n                  />\n                </div>\n              </div>\n\n              {/* Position */}\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5\">\n                    <Move className=\"w-3.5 h-3.5\" />\n                    X Position\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={Math.round(selectedNode.position.x)}\n                    readOnly\n                    className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-500\"\n                  />\n                </div>\n                <div>\n                  <label className=\"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5\">\n                    <Move className=\"w-3.5 h-3.5\" />\n                    Y Position\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={Math.round(selectedNode.position.y)}\n                    readOnly\n                    className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-500\"\n                  />\n                </div>\n              </div>\n\n              {/* Layer Controls */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\n                  Layer Order\n                </label>\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => bringToFront(selectedNode.id)}\n                    className=\"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs text-slate-300 transition-colors\"\n                  >\n                    <ArrowUp className=\"w-3.5 h-3.5\" />\n                    To Front\n                  </button>\n                  <button\n                    onClick={() => sendToBack(selectedNode.id)}\n                    className=\"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs text-slate-300 transition-colors\"\n                  >\n                    <ArrowDown className=\"w-3.5 h-3.5\" />\n                    To Back\n                  </button>\n                </div>\n              </div>\n\n              {/* Actions */}\n              <div className=\"pt-4 border-t border-slate-800 space-y-2\">\n                <button\n                  onClick={() => duplicateNode(selectedNode.id)}\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg text-sm transition-colors\"\n                >\n                  <Copy className=\"w-4 h-4\" />\n                  Duplicate Node\n                </button>\n                <button\n                  onClick={() => deleteNode(selectedNode.id)}\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg text-sm transition-colors\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  Delete Node\n                </button>\n              </div>\n            </motion.div>\n          )}\n\n          {/* Node Properties - Style Tab */}\n          {selectedNode && activeTab === 'style' && (\n            <motion.div\n              key=\"node-style\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-4\"\n            >\n              {/* Fill Color */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-2 flex items-center gap-1.5\">\n                  <Palette className=\"w-3.5 h-3.5\" />\n                  Fill Color\n                </label>\n                <div className=\"flex flex-wrap gap-2\">\n                  {FLOWCHART_COLORS.map((color) => (\n                    <button\n                      key={color}\n                      onClick={() => updateNodeData(selectedNode.id, { color })}\n                      className={cn(\n                        'w-8 h-8 rounded-lg transition-all hover:scale-110',\n                        selectedNode.data.color === color \n                          ? 'ring-2 ring-white shadow-lg' \n                          : 'hover:ring-2 hover:ring-white/50'\n                      )}\n                      style={{ backgroundColor: color }}\n                    />\n                  ))}\n                </div>\n              </div>\n\n              {/* Border Color */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\n                  Border Color\n                </label>\n                <div className=\"flex flex-wrap gap-2\">\n                  {FLOWCHART_COLORS.map((color) => (\n                    <button\n                      key={color}\n                      onClick={() => updateNodeData(selectedNode.id, { borderColor: color })}\n                      className={cn(\n                        'w-6 h-6 rounded-full transition-all hover:scale-110',\n                        selectedNode.data.borderColor === color \n                          ? 'ring-2 ring-white' \n                          : 'hover:ring-2 hover:ring-white/50'\n                      )}\n                      style={{ backgroundColor: color }}\n                    />\n                  ))}\n                </div>\n              </div>\n\n              {/* Text Color */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\n                  Text Color\n                </label>\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => updateNodeData(selectedNode.id, { textColor: '#FFFFFF' })}\n                    className={cn(\n                      'w-8 h-8 rounded-lg bg-white border-2',\n                      selectedNode.data.textColor === '#FFFFFF' ? 'border-blue-500' : 'border-slate-600'\n                    )}\n                  />\n                  <button\n                    onClick={() => updateNodeData(selectedNode.id, { textColor: '#0F172A' })}\n                    className={cn(\n                      'w-8 h-8 rounded-lg bg-slate-900 border-2',\n                      selectedNode.data.textColor === '#0F172A' ? 'border-blue-500' : 'border-slate-600'\n                    )}\n                  />\n                  <button\n                    onClick={() => updateNodeData(selectedNode.id, { textColor: '#94A3B8' })}\n                    className={cn(\n                      'w-8 h-8 rounded-lg bg-slate-400 border-2',\n                      selectedNode.data.textColor === '#94A3B8' ? 'border-blue-500' : 'border-slate-600'\n                    )}\n                  />\n                </div>\n              </div>\n\n              {/* Font Size */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">\n                  Font Size: {selectedNode.data.fontSize || 14}px\n                </label>\n                <input\n                  type=\"range\"\n                  min={10}\n                  max={24}\n                  value={selectedNode.data.fontSize || 14}\n                  onChange={(e) => updateNodeData(selectedNode.id, { fontSize: parseInt(e.target.value) })}\n                  className=\"w-full\"\n                />\n              </div>\n\n              {/* Border Width */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">\n                  Border Width: {selectedNode.data.borderWidth || 2}px\n                </label>\n                <input\n                  type=\"range\"\n                  min={0}\n                  max={5}\n                  value={selectedNode.data.borderWidth || 2}\n                  onChange={(e) => updateNodeData(selectedNode.id, { borderWidth: parseInt(e.target.value) })}\n                  className=\"w-full\"\n                />\n              </div>\n\n              {/* Border Style */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\n                  Border Style\n                </label>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {(['solid', 'dashed', 'dotted'] as const).map((style) => (\n                    <button\n                      key={style}\n                      onClick={() => updateNodeData(selectedNode.id, { borderStyle: style })}\n                      className={cn(\n                        'px-3 py-2 rounded-lg text-xs font-medium transition-all capitalize',\n                        selectedNode.data.borderStyle === style\n                          ? 'bg-blue-500 text-white'\n                          : 'bg-slate-800 text-slate-400 hover:bg-slate-700'\n                      )}\n                    >\n                      {style}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Opacity */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">\n                  Opacity: {Math.round((selectedNode.data.opacity || 1) * 100)}%\n                </label>\n                <input\n                  type=\"range\"\n                  min={0.2}\n                  max={1}\n                  step={0.1}\n                  value={selectedNode.data.opacity || 1}\n                  onChange={(e) => updateNodeData(selectedNode.id, { opacity: parseFloat(e.target.value) })}\n                  className=\"w-full\"\n                />\n              </div>\n\n              {/* Rotation */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5\">\n                  <RotateCw className=\"w-3.5 h-3.5\" />\n                  Rotation: {selectedNode.rotation || 0}\n                </label>\n                <input\n                  type=\"range\"\n                  min={0}\n                  max={360}\n                  value={selectedNode.rotation || 0}\n                  onChange={(e) => updateNode(selectedNode.id, { rotation: parseInt(e.target.value) })}\n                  className=\"w-full\"\n                />\n              </div>\n            </motion.div>\n          )}\n\n          {/* Edge Properties */}\n          {selectedEdge && (\n            <motion.div\n              key=\"edge\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-4\"\n            >\n              {/* Edge Type */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\n                  Connection Type\n                </label>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {(['smooth', 'straight', 'step'] as FlowchartEdgeType[]).map((type) => (\n                    <button\n                      key={type}\n                      onClick={() => updateEdge(selectedEdge.id, { type })}\n                      className={cn(\n                        'px-3 py-2 rounded-lg text-xs font-medium transition-all capitalize',\n                        selectedEdge.type === type\n                          ? 'bg-blue-500 text-white'\n                          : 'bg-slate-800 text-slate-400 hover:bg-slate-700'\n                      )}\n                    >\n                      {type}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Line Color */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\n                  Line Color\n                </label>\n                <div className=\"flex flex-wrap gap-2\">\n                  {FLOWCHART_COLORS.slice(0, 8).map((color) => (\n                    <button\n                      key={color}\n                      onClick={() => updateEdgeData(selectedEdge.id, { color })}\n                      className={cn(\n                        'w-6 h-6 rounded-full transition-all hover:scale-110',\n                        selectedEdge.data?.color === color \n                          ? 'ring-2 ring-white' \n                          : 'hover:ring-2 hover:ring-white/50'\n                      )}\n                      style={{ backgroundColor: color }}\n                    />\n                  ))}\n                </div>\n              </div>\n\n              {/* Line Width */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">\n                  Line Width: {selectedEdge.data?.strokeWidth || 2}px\n                </label>\n                <input\n                  type=\"range\"\n                  min={1}\n                  max={5}\n                  value={selectedEdge.data?.strokeWidth || 2}\n                  onChange={(e) => updateEdgeData(selectedEdge.id, { strokeWidth: parseInt(e.target.value) })}\n                  className=\"w-full\"\n                />\n              </div>\n\n              {/* Line Style */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\n                  Line Style\n                </label>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {(['solid', 'dashed', 'dotted'] as const).map((style) => (\n                    <button\n                      key={style}\n                      onClick={() => updateEdgeData(selectedEdge.id, { strokeStyle: style })}\n                      className={cn(\n                        'px-3 py-2 rounded-lg text-xs font-medium transition-all capitalize',\n                        selectedEdge.data?.strokeStyle === style\n                          ? 'bg-blue-500 text-white'\n                          : 'bg-slate-800 text-slate-400 hover:bg-slate-700'\n                      )}\n                    >\n                      {style}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Arrow Controls */}\n              <div>\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\n                  Arrows\n                </label>\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => updateEdgeData(selectedEdge.id, { startArrow: !selectedEdge.data?.startArrow })}\n                    className={cn(\n                      'flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all',\n                      selectedEdge.data?.startArrow\n                        ? 'bg-blue-500 text-white'\n                        : 'bg-slate-800 text-slate-400 hover:bg-slate-700'\n                    )}\n                  >\n                     Start\n                  </button>\n                  <button\n                    onClick={() => updateEdgeData(selectedEdge.id, { endArrow: !selectedEdge.data?.endArrow })}\n                    className={cn(\n                      'flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all',\n                      selectedEdge.data?.endArrow !== false\n                        ? 'bg-blue-500 text-white'\n                        : 'bg-slate-800 text-slate-400 hover:bg-slate-700'\n                    )}\n                  >\n                    End \n                  </button>\n                </div>\n              </div>\n\n              {/* Delete Button */}\n              <div className=\"pt-4 border-t border-slate-800\">\n                <button\n                  onClick={() => deleteEdge(selectedEdge.id)}\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg text-sm transition-colors\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  Delete Connection\n                </button>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4351, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/flowchart/index.ts"],"sourcesContent":["export { default as FlowchartCanvas } from './FlowchartCanvas';\nexport { default as FlowchartNode } from './FlowchartNode';\nexport { default as FlowchartEdge } from './FlowchartEdge';\nexport { default as ShapeLibrary } from './ShapeLibrary';\nexport { default as PropertiesPanel } from './PropertiesPanel';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 4396, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/components/layout/AppHeader.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { cn } from '@/lib/utils';\nimport { \n  Database, \n  Workflow,\n  Users,\n  Github, \n  HelpCircle, \n  Sparkles,\n  ChevronDown,\n  Download,\n  Upload,\n  FileCode,\n  Keyboard,\n  Settings,\n  Plus,\n  Menu,\n  X,\n  PanelLeft,\n  PanelRight,\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface AppHeaderProps {\n  onExportJSON?: () => void;\n  onExportSQL?: () => void;\n  onExportPNG?: () => void;\n  onImport?: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  stats?: { label: string; value: number }[];\n  title?: string;\n  subtitle?: string;\n  helpContent?: React.ReactNode;\n  // Panel toggle props\n  leftPanelOpen?: boolean;\n  rightPanelOpen?: boolean;\n  onToggleLeftPanel?: () => void;\n  onToggleRightPanel?: () => void;\n  showLeftPanelToggle?: boolean;\n  showRightPanelToggle?: boolean;\n}\n\nexport default function AppHeader({\n  onExportJSON,\n  onExportSQL,\n  onExportPNG,\n  onImport,\n  stats = [],\n  title = 'Designer',\n  subtitle = 'Visual Design Tool',\n  helpContent,\n  // Panel toggles\n  leftPanelOpen,\n  rightPanelOpen,\n  onToggleLeftPanel,\n  onToggleRightPanel,\n  showLeftPanelToggle,\n  showRightPanelToggle,\n}: AppHeaderProps) {\n  const [showHelp, setShowHelp] = useState(false);\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\n  const pathname = usePathname();\n\n  const isERD = pathname === '/';\n  const isFlowchart = pathname === '/flowchart';\n  const isUseCase = pathname === '/usecase';\n\n  return (\n    <>\n      <header className=\"h-14 bg-slate-900/95 backdrop-blur-sm border-b border-slate-800 flex items-center justify-between px-3 lg:px-4 shrink-0 z-50\">\n        {/* Left Section: Logo & Panel Toggles */}\n        <div className=\"flex items-center gap-2 lg:gap-4\">\n          {/* Panel Toggles (Mobile/Tablet) */}\n          {showLeftPanelToggle && onToggleLeftPanel && (\n            <button\n              onClick={onToggleLeftPanel}\n              className={cn(\n                \"lg:hidden p-2 rounded-lg transition-colors\",\n                leftPanelOpen \n                  ? \"text-blue-400 bg-blue-500/10\" \n                  : \"text-slate-400 hover:text-white hover:bg-white/5\"\n              )}\n              title=\"Toggle Sidebar\"\n            >\n              <PanelLeft className=\"w-5 h-5\" />\n            </button>\n          )}\n\n          {/* Logo */}\n          <Link href=\"/\" className=\"flex items-center gap-2 lg:gap-3\">\n            <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg shadow-blue-500/20\">\n              {isERD ? (\n                <Database className=\"w-4 h-4 text-white\" />\n              ) : isUseCase ? (\n                <Users className=\"w-4 h-4 text-white\" />\n              ) : (\n                <Workflow className=\"w-4 h-4 text-white\" />\n              )}\n            </div>\n            <div className=\"hidden sm:block\">\n              <h1 className=\"font-bold text-slate-100 text-sm\">{title}</h1>\n              <p className=\"text-[10px] text-slate-500 hidden lg:block\">{subtitle}</p>\n            </div>\n          </Link>\n\n          {/* Desktop Navigation Tabs */}\n          <div className=\"hidden md:flex items-center gap-1 p-1 bg-slate-800/50 rounded-lg border border-slate-700/50 ml-2 lg:ml-4\">\n            <Link\n              href=\"/\"\n              className={cn(\n                \"flex items-center gap-2 px-2 lg:px-3 py-1.5 rounded-md text-xs font-medium transition-all\",\n                isERD\n                  ? \"bg-blue-500 text-white\"\n                  : \"text-slate-400 hover:text-slate-200 hover:bg-white/5\"\n              )}\n            >\n              <Database className=\"w-3.5 h-3.5\" />\n              <span className=\"hidden lg:inline\">ERD</span>\n            </Link>\n            <Link\n              href=\"/flowchart\"\n              className={cn(\n                \"flex items-center gap-2 px-2 lg:px-3 py-1.5 rounded-md text-xs font-medium transition-all\",\n                isFlowchart\n                  ? \"bg-blue-500 text-white\"\n                  : \"text-slate-400 hover:text-slate-200 hover:bg-white/5\"\n              )}\n            >\n              <Workflow className=\"w-3.5 h-3.5\" />\n              <span className=\"hidden lg:inline\">Flowchart</span>\n            </Link>\n            <Link\n              href=\"/usecase\"\n              className={cn(\n                \"flex items-center gap-2 px-2 lg:px-3 py-1.5 rounded-md text-xs font-medium transition-all\",\n                isUseCase\n                  ? \"bg-blue-500 text-white\"\n                  : \"text-slate-400 hover:text-slate-200 hover:bg-white/5\"\n              )}\n            >\n              <Users className=\"w-3.5 h-3.5\" />\n              <span className=\"hidden lg:inline\">Use Case</span>\n            </Link>\n          </div>\n        </div>\n\n        {/* Center: Stats */}\n        {stats.length > 0 && (\n          <div className=\"hidden lg:flex items-center gap-3\">\n            {stats.map((stat, index) => (\n              <div \n                key={index}\n                className=\"flex items-center gap-2 px-3 py-1.5 bg-slate-800/50 rounded-lg border border-slate-700/50\"\n              >\n                <span className=\"text-xs text-slate-400\">{stat.label}:</span>\n                <span className=\"text-xs font-semibold text-slate-200\">{stat.value}</span>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Right: Actions */}\n        <div className=\"flex items-center gap-1 lg:gap-2\">\n          {/* Desktop Export/Import */}\n          <div className=\"hidden sm:flex items-center gap-2\">\n            {(onExportJSON || onExportPNG) && (\n              <div className=\"relative group\">\n                <button className=\"flex items-center gap-2 px-3 py-1.5 text-slate-300 hover:text-white hover:bg-white/5 rounded-lg text-sm transition-colors\">\n                  <Download className=\"w-4 h-4\" />\n                  <span className=\"hidden xl:inline\">Export</span>\n                  <ChevronDown className=\"w-3 h-3\" />\n                </button>\n                \n                <div className=\"absolute right-0 top-full mt-1 w-40 bg-slate-800 rounded-xl border border-slate-700 shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50\">\n                  {onExportJSON && (\n                    <button\n                      onClick={onExportJSON}\n                      className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors first:rounded-t-xl\"\n                    >\n                      <Download className=\"w-4 h-4\" />\n                      Export JSON\n                    </button>\n                  )}\n                  {onExportSQL && (\n                    <button\n                      onClick={onExportSQL}\n                      className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors\"\n                    >\n                      <FileCode className=\"w-4 h-4\" />\n                      Export SQL\n                    </button>\n                  )}\n                  {onExportPNG && (\n                    <button\n                      onClick={onExportPNG}\n                      className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors last:rounded-b-xl\"\n                    >\n                      <Download className=\"w-4 h-4\" />\n                      Export PNG\n                    </button>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {onImport && (\n              <label className=\"flex items-center gap-2 px-3 py-1.5 text-slate-300 hover:text-white hover:bg-white/5 rounded-lg text-sm cursor-pointer transition-colors\">\n                <Upload className=\"w-4 h-4\" />\n                <span className=\"hidden xl:inline\">Import</span>\n                <input\n                  type=\"file\"\n                  accept=\".json\"\n                  onChange={onImport}\n                  className=\"hidden\"\n                />\n              </label>\n            )}\n\n            <div className=\"hidden md:block w-px h-6 bg-slate-700 mx-1\" />\n          </div>\n\n          {/* Right Panel Toggle */}\n          {showRightPanelToggle && onToggleRightPanel && (\n            <button\n              onClick={onToggleRightPanel}\n              className={cn(\n                \"p-2 rounded-lg transition-colors\",\n                rightPanelOpen \n                  ? \"text-blue-400 bg-blue-500/10\" \n                  : \"text-slate-400 hover:text-white hover:bg-white/5\"\n              )}\n              title=\"Toggle Properties Panel\"\n            >\n              <PanelRight className=\"w-5 h-5\" />\n            </button>\n          )}\n\n          {/* Help */}\n          <button\n            onClick={() => setShowHelp(!showHelp)}\n            className={cn(\n              \"p-2 rounded-lg transition-colors hidden sm:flex\",\n              showHelp ? \"text-blue-400 bg-blue-500/10\" : \"text-slate-400 hover:text-white hover:bg-white/5\"\n            )}\n          >\n            <HelpCircle className=\"w-4 h-4\" />\n          </button>\n\n          {/* GitHub */}\n          <a\n            href=\"https://github.com\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"hidden sm:flex p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\n          >\n            <Github className=\"w-4 h-4\" />\n          </a>\n\n          {/* Mobile Menu Button */}\n          <button\n            onClick={() => setShowMobileMenu(!showMobileMenu)}\n            className=\"md:hidden p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\n          >\n            {showMobileMenu ? <X className=\"w-5 h-5\" /> : <Menu className=\"w-5 h-5\" />}\n          </button>\n        </div>\n      </header>\n\n      {/* Mobile Menu */}\n      <AnimatePresence>\n        {showMobileMenu && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"md:hidden bg-slate-900 border-b border-slate-800 z-40\"\n          >\n            <nav className=\"p-4 space-y-2\">\n              <Link\n                href=\"/\"\n                onClick={() => setShowMobileMenu(false)}\n                className={cn(\n                  \"flex items-center gap-3 px-4 py-3 rounded-xl transition-all\",\n                  isERD\n                    ? \"bg-blue-500 text-white\"\n                    : \"text-slate-300 hover:bg-white/5\"\n                )}\n              >\n                <Database className=\"w-5 h-5\" />\n                <span className=\"font-medium\">ERD Designer</span>\n              </Link>\n              <Link\n                href=\"/flowchart\"\n                onClick={() => setShowMobileMenu(false)}\n                className={cn(\n                  \"flex items-center gap-3 px-4 py-3 rounded-xl transition-all\",\n                  isFlowchart\n                    ? \"bg-blue-500 text-white\"\n                    : \"text-slate-300 hover:bg-white/5\"\n                )}\n              >\n                <Workflow className=\"w-5 h-5\" />\n                <span className=\"font-medium\">Flowchart</span>\n              </Link>\n              <Link\n                href=\"/usecase\"\n                onClick={() => setShowMobileMenu(false)}\n                className={cn(\n                  \"flex items-center gap-3 px-4 py-3 rounded-xl transition-all\",\n                  isUseCase\n                    ? \"bg-blue-500 text-white\"\n                    : \"text-slate-300 hover:bg-white/5\"\n                )}\n              >\n                <Users className=\"w-5 h-5\" />\n                <span className=\"font-medium\">Use Case</span>\n              </Link>\n            </nav>\n\n            {/* Mobile Actions */}\n            <div className=\"px-4 pb-4 space-y-2\">\n              {stats.length > 0 && (\n                <div className=\"flex flex-wrap gap-2 pb-2\">\n                  {stats.map((stat, index) => (\n                    <div \n                      key={index}\n                      className=\"flex items-center gap-1.5 px-2.5 py-1 bg-slate-800 rounded-lg\"\n                    >\n                      <span className=\"text-[10px] text-slate-400\">{stat.label}:</span>\n                      <span className=\"text-xs font-medium text-slate-200\">{stat.value}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              <div className=\"flex gap-2\">\n                {onExportJSON && (\n                  <button\n                    onClick={() => {\n                      onExportJSON();\n                      setShowMobileMenu(false);\n                    }}\n                    className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-slate-800 text-slate-300 rounded-lg text-sm\"\n                  >\n                    <Download className=\"w-4 h-4\" />\n                    Export\n                  </button>\n                )}\n                {onImport && (\n                  <label className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-slate-800 text-slate-300 rounded-lg text-sm cursor-pointer\">\n                    <Upload className=\"w-4 h-4\" />\n                    Import\n                    <input\n                      type=\"file\"\n                      accept=\".json\"\n                      onChange={(e) => {\n                        onImport(e);\n                        setShowMobileMenu(false);\n                      }}\n                      className=\"hidden\"\n                    />\n                  </label>\n                )}\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Help Modal */}\n      <AnimatePresence>\n        {showHelp && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n            onClick={() => setShowHelp(false)}\n          >\n            <motion.div\n              initial={{ scale: 0.95, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.95, opacity: 0 }}\n              className=\"bg-slate-900 rounded-2xl border border-slate-700 shadow-2xl max-w-lg w-full max-h-[80vh] overflow-auto\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"p-6\">\n                <div className=\"flex items-center gap-3 mb-6\">\n                  <div className=\"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center\">\n                    <Sparkles className=\"w-5 h-5 text-blue-400\" />\n                  </div>\n                  <div>\n                    <h2 className=\"text-lg font-semibold text-white\">Quick Guide</h2>\n                    <p className=\"text-sm text-slate-400\">Learn how to use {title}</p>\n                  </div>\n                </div>\n\n                {helpContent || (\n                  <div className=\"space-y-4\">\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                        <Plus className=\"w-5 h-5 text-blue-400\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-medium text-slate-200\">Create Elements</h3>\n                        <p className=\"text-sm text-slate-400\">Add new elements to your diagram using the toolbar or sidebar.</p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                        <Settings className=\"w-5 h-5 text-green-400\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-medium text-slate-200\">Edit Properties</h3>\n                        <p className=\"text-sm text-slate-400\">Click on any element to edit its properties in the sidebar.</p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\n                        <Download className=\"w-5 h-5 text-amber-400\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-medium text-slate-200\">Export</h3>\n                        <p className=\"text-sm text-slate-400\">Save your work as JSON or export as an image.</p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"mt-6 pt-4 border-t border-slate-800\">\n                  <h4 className=\"text-xs font-medium text-slate-500 uppercase tracking-wider mb-3\">Keyboard Shortcuts</h4>\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm\">\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Delete</span>\n                      <span className=\"text-slate-200\">Remove selected</span>\n                    </div>\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Space + Drag</span>\n                      <span className=\"text-slate-200\">Pan canvas</span>\n                    </div>\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Scroll</span>\n                      <span className=\"text-slate-200\">Zoom in/out</span>\n                    </div>\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\n                      <span className=\"text-slate-400\">Click</span>\n                      <span className=\"text-slate-200\">Select element</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"px-6 py-4 bg-slate-800/50 border-t border-slate-800\">\n                <button\n                  onClick={() => setShowHelp(false)}\n                  className=\"w-full py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors\"\n                >\n                  Got it!\n                </button>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5520, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/hooks/usePanelState.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\n\ninterface PanelState {\n  leftPanel: boolean;\n  rightPanel: boolean;\n}\n\ninterface UsePanelStateOptions {\n  storageKey?: string;\n  defaultLeftPanel?: boolean;\n  defaultRightPanel?: boolean;\n  mobileBreakpoint?: number;\n}\n\nexport function usePanelState(options: UsePanelStateOptions = {}) {\n  const {\n    storageKey,\n    defaultLeftPanel = true,\n    defaultRightPanel = true,\n    mobileBreakpoint = 768,\n  } = options;\n\n  const [panels, setPanels] = useState<PanelState>({\n    leftPanel: defaultLeftPanel,\n    rightPanel: defaultRightPanel,\n  });\n\n  const [isMobile, setIsMobile] = useState(false);\n  const [isTablet, setIsTablet] = useState(false);\n\n  // Check screen size\n  useEffect(() => {\n    const checkScreenSize = () => {\n      const width = window.innerWidth;\n      const mobile = width < mobileBreakpoint;\n      const tablet = width >= mobileBreakpoint && width < 1024;\n      \n      setIsMobile(mobile);\n      setIsTablet(tablet);\n\n      // Auto-hide panels on mobile\n      if (mobile) {\n        setPanels({ leftPanel: false, rightPanel: false });\n      } else if (tablet) {\n        // On tablet, show only one panel by default\n        setPanels({ leftPanel: true, rightPanel: false });\n      }\n    };\n\n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    return () => window.removeEventListener('resize', checkScreenSize);\n  }, [mobileBreakpoint]);\n\n  // Load from storage\n  useEffect(() => {\n    if (storageKey && typeof window !== 'undefined') {\n      try {\n        const saved = localStorage.getItem(storageKey);\n        if (saved) {\n          const parsed = JSON.parse(saved);\n          setPanels(parsed);\n        }\n      } catch (e) {\n        console.warn('Failed to load panel state:', e);\n      }\n    }\n  }, [storageKey]);\n\n  // Save to storage\n  useEffect(() => {\n    if (storageKey && typeof window !== 'undefined') {\n      try {\n        localStorage.setItem(storageKey, JSON.stringify(panels));\n      } catch (e) {\n        console.warn('Failed to save panel state:', e);\n      }\n    }\n  }, [panels, storageKey]);\n\n  const toggleLeftPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, leftPanel: !prev.leftPanel }));\n  }, []);\n\n  const toggleRightPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, rightPanel: !prev.rightPanel }));\n  }, []);\n\n  const openLeftPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, leftPanel: true }));\n  }, []);\n\n  const openRightPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, rightPanel: true }));\n  }, []);\n\n  const closeLeftPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, leftPanel: false }));\n  }, []);\n\n  const closeRightPanel = useCallback(() => {\n    setPanels(prev => ({ ...prev, rightPanel: false }));\n  }, []);\n\n  const closeAllPanels = useCallback(() => {\n    setPanels({ leftPanel: false, rightPanel: false });\n  }, []);\n\n  const openAllPanels = useCallback(() => {\n    setPanels({ leftPanel: true, rightPanel: true });\n  }, []);\n\n  return {\n    // State\n    leftPanelOpen: panels.leftPanel,\n    rightPanelOpen: panels.rightPanel,\n    isMobile,\n    isTablet,\n    isDesktop: !isMobile && !isTablet,\n    \n    // Actions\n    toggleLeftPanel,\n    toggleRightPanel,\n    openLeftPanel,\n    openRightPanel,\n    closeLeftPanel,\n    closeRightPanel,\n    closeAllPanels,\n    openAllPanels,\n    \n    // Responsive helpers\n    anyPanelOpen: panels.leftPanel || panels.rightPanel,\n    bothPanelsOpen: panels.leftPanel && panels.rightPanel,\n  };\n}\n\nexport default usePanelState;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5712, "column": 0}, "map": {"version":3,"sources":["file:///root/designer/src/app/flowchart/page.tsx"],"sourcesContent":["'use client';\n\nimport { FlowchartCanvas, ShapeLibrary, PropertiesPanel } from '@/components/flowchart';\nimport AppHeader from '@/components/layout/AppHeader';\nimport { useFlowchartStore } from '@/store/flowchartStore';\nimport { type FlowchartNodeType } from '@/types/flowchart';\nimport { useCallback } from 'react';\nimport { usePanelState } from '@/hooks/usePanelState';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { cn } from '@/lib/utils';\nimport { X, PanelLeft, PanelRight } from 'lucide-react';\n\nexport default function FlowchartPage() {\n  const { \n    nodes, \n    edges, \n    exportToJSON, \n    importFromJSON \n  } = useFlowchartStore();\n\n  const {\n    leftPanelOpen,\n    rightPanelOpen,\n    toggleLeftPanel,\n    toggleRightPanel,\n    closeLeftPanel,\n    closeRightPanel,\n    isMobile,\n  } = usePanelState({\n    storageKey: 'flowchart-panels',\n    defaultLeftPanel: true,\n    defaultRightPanel: true,\n  });\n\n  const handleExportJSON = useCallback(() => {\n    const json = exportToJSON();\n    const blob = new Blob([json], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.download = 'flowchart.json';\n    link.href = url;\n    link.click();\n    URL.revokeObjectURL(url);\n  }, [exportToJSON]);\n\n  const handleImport = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        try {\n          const json = event.target?.result as string;\n          importFromJSON(json);\n        } catch (error) {\n          alert('Invalid JSON file');\n        }\n      };\n      reader.readAsText(file);\n    }\n    e.target.value = '';\n  }, [importFromJSON]);\n\n  const handleDragStart = (type: FlowchartNodeType) => {\n    if (typeof window !== 'undefined') {\n      (window as any).draggedShapeType = type;\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-screen bg-slate-950 overflow-hidden\">\n      <AppHeader\n        title=\"Flowchart Designer\"\n        subtitle=\"Visual Process Design\"\n        onExportJSON={handleExportJSON}\n        onImport={handleImport}\n        stats={[\n          { label: 'Nodes', value: nodes.length },\n          { label: 'Connections', value: edges.length },\n        ]}\n        leftPanelOpen={leftPanelOpen}\n        rightPanelOpen={rightPanelOpen}\n        onToggleLeftPanel={toggleLeftPanel}\n        onToggleRightPanel={toggleRightPanel}\n        showLeftPanelToggle={true}\n        showRightPanelToggle={true}\n      />\n      \n      <div className=\"flex flex-1 overflow-hidden relative\">\n        {/* Left Panel - Shape Library */}\n        <AnimatePresence>\n          {leftPanelOpen && (\n            <>\n              {/* Mobile Overlay */}\n              {isMobile && (\n                <motion.div\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  exit={{ opacity: 0 }}\n                  className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-30\"\n                  onClick={closeLeftPanel}\n                />\n              )}\n              \n              {/* Panel */}\n              <motion.div\n                initial={{ x: '-100%', opacity: 0.5 }}\n                animate={{ x: 0, opacity: 1 }}\n                exit={{ x: '-100%', opacity: 0.5 }}\n                transition={{ type: 'spring', damping: 30, stiffness: 300 }}\n                className={cn(\n                  \"fixed left-0 top-14 bottom-0 z-40\",\n                  \"w-[280px] sm:w-[320px]\",\n                  \"bg-slate-900/95 backdrop-blur-sm border-r border-slate-800\"\n                )}\n              >\n                {/* Mobile Close Button */}\n                <div className=\"lg:hidden flex items-center justify-between p-4 border-b border-slate-800\">\n                  <h2 className=\"font-semibold text-slate-200\">Shapes</h2>\n                  <button\n                    onClick={closeLeftPanel}\n                    className=\"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-white/10 transition-colors\"\n                  >\n                    <X className=\"w-5 h-5\" />\n                  </button>\n                </div>\n                \n                <div className=\"h-full overflow-hidden\">\n                  <ShapeLibrary onDragStart={handleDragStart} />\n                </div>\n              </motion.div>\n            </>\n          )}\n        </AnimatePresence>\n\n        {/* Main Canvas Area */}\n        <div className={cn(\n          \"flex-1 relative transition-all duration-300\",\n          leftPanelOpen && !isMobile && \"ml-[280px] lg:ml-[320px]\",\n          rightPanelOpen && !isMobile && \"mr-[320px]\"\n        )}>\n          <FlowchartCanvas />\n        </div>\n\n        {/* Right Panel - Properties */}\n        <AnimatePresence>\n          {rightPanelOpen && (\n            <>\n              {/* Mobile Overlay */}\n              {isMobile && (\n                <motion.div\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  exit={{ opacity: 0 }}\n                  className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-30\"\n                  onClick={closeRightPanel}\n                />\n              )}\n              \n              {/* Panel */}\n              <motion.div\n                initial={{ x: '100%', opacity: 0.5 }}\n                animate={{ x: 0, opacity: 1 }}\n                exit={{ x: '100%', opacity: 0.5 }}\n                transition={{ type: 'spring', damping: 30, stiffness: 300 }}\n                className={cn(\n                  \"fixed right-0 top-14 bottom-0 z-40\",\n                  \"w-full sm:w-[400px] lg:w-[320px]\",\n                  \"bg-slate-900/95 backdrop-blur-sm border-l border-slate-800\"\n                )}\n              >\n                {/* Mobile Close Button */}\n                <div className=\"lg:hidden flex items-center justify-between p-4 border-b border-slate-800\">\n                  <h2 className=\"font-semibold text-slate-200\">Properties</h2>\n                  <button\n                    onClick={closeRightPanel}\n                    className=\"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-white/10 transition-colors\"\n                  >\n                    <X className=\"w-5 h-5\" />\n                  </button>\n                </div>\n                \n                <div className=\"h-full overflow-hidden\">\n                  <PropertiesPanel />\n                </div>\n              </motion.div>\n            </>\n          )}\n        </AnimatePresence>\n\n        {/* Floating Toggle Buttons (when panels are closed) */}\n        <AnimatePresence>\n          {!leftPanelOpen && !isMobile && (\n            <motion.button\n              initial={{ scale: 0, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0, opacity: 0 }}\n              onClick={toggleLeftPanel}\n              className=\"fixed left-4 top-[72px] z-30 p-2.5 rounded-xl bg-slate-800/90 border border-slate-700 shadow-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors\"\n              title=\"Open Shape Library\"\n            >\n              <PanelLeft className=\"w-5 h-5\" />\n            </motion.button>\n          )}\n        </AnimatePresence>\n\n        <AnimatePresence>\n          {!rightPanelOpen && (\n            <motion.button\n              initial={{ scale: 0, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0, opacity: 0 }}\n              onClick={toggleRightPanel}\n              className=\"fixed right-4 top-[72px] z-30 p-2.5 rounded-xl bg-slate-800/90 border border-slate-700 shadow-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors\"\n              title=\"Open Properties Panel\"\n            >\n              <PanelRight className=\"w-5 h-5\" />\n            </motion.button>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}