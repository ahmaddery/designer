{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AsusTuf/Desktop/canvas/erd-designer/src/types/flowchart.ts"],"sourcesContent":["// Types for Flowchart Designer\r\n\r\nexport type FlowchartNodeType = \r\n  | 'process' \r\n  | 'decision' \r\n  | 'start' \r\n  | 'end' \r\n  | 'input'\r\n  | 'output'\r\n  | 'document'\r\n  | 'database'\r\n  | 'predefined'\r\n  | 'delay'\r\n  | 'stored-data'\r\n  | 'manual-input'\r\n  | 'display'\r\n  | 'preparation'\r\n  | 'connector'\r\n  | 'off-page';\r\n\r\nexport type FlowchartEdgeType = 'smooth' | 'straight' | 'step' | 'bezier';\r\n\r\nexport interface FlowchartNode {\r\n  id: string;\r\n  type: FlowchartNodeType;\r\n  position: {\r\n    x: number;\r\n    y: number;\r\n  };\r\n  size: {\r\n    width: number;\r\n    height: number;\r\n  };\r\n  data: {\r\n    label: string;\r\n    description?: string;\r\n    color?: string;\r\n    borderColor?: string;\r\n    textColor?: string;\r\n    fontSize?: number;\r\n    borderWidth?: number;\r\n    borderStyle?: 'solid' | 'dashed' | 'dotted';\r\n    opacity?: number;\r\n    icon?: string;\r\n  };\r\n  rotation?: number;\r\n  zIndex?: number;\r\n}\r\n\r\nexport interface FlowchartEdge {\r\n  id: string;\r\n  source: string;\r\n  target: string;\r\n  type: FlowchartEdgeType;\r\n  label?: string;\r\n  data?: {\r\n    color?: string;\r\n    strokeWidth?: number;\r\n    strokeStyle?: 'solid' | 'dashed' | 'dotted';\r\n    startArrow?: boolean;\r\n    endArrow?: boolean;\r\n    labelBgColor?: string;\r\n    labelTextColor?: string;\r\n  };\r\n  sourceHandle?: string;\r\n  targetHandle?: string;\r\n}\r\n\r\nexport interface FlowchartState {\r\n  nodes: FlowchartNode[];\r\n  edges: FlowchartEdge[];\r\n  selectedNodeId: string | null;\r\n  selectedEdgeId: string | null;\r\n  viewport: {\r\n    x: number;\r\n    y: number;\r\n    zoom: number;\r\n  };\r\n}\r\n\r\n// Shape definitions with icons and descriptions\r\nexport const FLOWCHART_SHAPES: {\r\n  type: FlowchartNodeType;\r\n  label: string;\r\n  icon: string;\r\n  description: string;\r\n  defaultSize: { width: number; height: number };\r\n  defaultColor: string;\r\n}[] = [\r\n  {\r\n    type: 'start',\r\n    label: 'Start/End',\r\n    icon: 'Circle',\r\n    description: 'Terminal point - Start or end of process',\r\n    defaultSize: { width: 120, height: 60 },\r\n    defaultColor: '#10B981',\r\n  },\r\n  {\r\n    type: 'process',\r\n    label: 'Process',\r\n    icon: 'Square',\r\n    description: 'Action or operation step',\r\n    defaultSize: { width: 140, height: 80 },\r\n    defaultColor: '#3B82F6',\r\n  },\r\n  {\r\n    type: 'decision',\r\n    label: 'Decision',\r\n    icon: 'Diamond',\r\n    description: 'Conditional branch (Yes/No)',\r\n    defaultSize: { width: 140, height: 100 },\r\n    defaultColor: '#F59E0B',\r\n  },\r\n  {\r\n    type: 'input',\r\n    label: 'Input',\r\n    icon: 'Parallelogram',\r\n    description: 'Data input operation',\r\n    defaultSize: { width: 140, height: 70 },\r\n    defaultColor: '#8B5CF6',\r\n  },\r\n  {\r\n    type: 'output',\r\n    label: 'Output',\r\n    icon: 'Parallelogram',\r\n    description: 'Data output operation',\r\n    defaultSize: { width: 140, height: 70 },\r\n    defaultColor: '#EC4899',\r\n  },\r\n  {\r\n    type: 'document',\r\n    label: 'Document',\r\n    icon: 'FileText',\r\n    description: 'Document or report',\r\n    defaultSize: { width: 140, height: 90 },\r\n    defaultColor: '#06B6D4',\r\n  },\r\n  {\r\n    type: 'database',\r\n    label: 'Database',\r\n    icon: 'Database',\r\n    description: 'Database storage',\r\n    defaultSize: { width: 140, height: 90 },\r\n    defaultColor: '#6366F1',\r\n  },\r\n  {\r\n    type: 'predefined',\r\n    label: 'Predefined',\r\n    icon: 'RectangleHorizontal',\r\n    description: 'Predefined process (subroutine)',\r\n    defaultSize: { width: 140, height: 80 },\r\n    defaultColor: '#84CC16',\r\n  },\r\n  {\r\n    type: 'delay',\r\n    label: 'Delay',\r\n    icon: 'Clock',\r\n    description: 'Wait or delay operation',\r\n    defaultSize: { width: 120, height: 70 },\r\n    defaultColor: '#F97316',\r\n  },\r\n  {\r\n    type: 'stored-data',\r\n    label: 'Stored Data',\r\n    icon: 'HardDrive',\r\n    description: 'Data storage',\r\n    defaultSize: { width: 140, height: 90 },\r\n    defaultColor: '#14B8A6',\r\n  },\r\n  {\r\n    type: 'manual-input',\r\n    label: 'Manual Input',\r\n    icon: 'Keyboard',\r\n    description: 'Manual data entry',\r\n    defaultSize: { width: 140, height: 80 },\r\n    defaultColor: '#A855F7',\r\n  },\r\n  {\r\n    type: 'display',\r\n    label: 'Display',\r\n    icon: 'Monitor',\r\n    description: 'Display output',\r\n    defaultSize: { width: 140, height: 80 },\r\n    defaultColor: '#E11D48',\r\n  },\r\n  {\r\n    type: 'preparation',\r\n    label: 'Preparation',\r\n    icon: 'Hexagon',\r\n    description: 'Initialization or preparation',\r\n    defaultSize: { width: 140, height: 90 },\r\n    defaultColor: '#0EA5E9',\r\n  },\r\n  {\r\n    type: 'connector',\r\n    label: 'Connector',\r\n    icon: 'CircleDot',\r\n    description: 'Connection point within page',\r\n    defaultSize: { width: 50, height: 50 },\r\n    defaultColor: '#64748B',\r\n  },\r\n  {\r\n    type: 'off-page',\r\n    label: 'Off-Page',\r\n    icon: 'ArrowRightToLine',\r\n    description: 'Connection to another page',\r\n    defaultSize: { width: 100, height: 60 },\r\n    defaultColor: '#94A3B8',\r\n  },\r\n];\r\n\r\nexport const FLOWCHART_COLORS = [\r\n  '#3B82F6', // Blue\r\n  '#10B981', // Emerald\r\n  '#F59E0B', // Amber\r\n  '#EF4444', // Red\r\n  '#8B5CF6', // Violet\r\n  '#EC4899', // Pink\r\n  '#06B6D4', // Cyan\r\n  '#84CC16', // Lime\r\n  '#F97316', // Orange\r\n  '#6366F1', // Indigo\r\n  '#14B8A6', // Teal\r\n  '#A855F7', // Purple\r\n  '#E11D48', // Rose\r\n  '#0EA5E9', // Sky\r\n  '#64748B', // Slate\r\n];\r\n\r\nexport const DEFAULT_FLOWCHART_NODE: Omit<FlowchartNode, 'id' | 'type' | 'position'> = {\r\n  size: { width: 140, height: 80 },\r\n  data: {\r\n    label: 'New Node',\r\n    color: '#3B82F6',\r\n    borderColor: '#1D4ED8',\r\n    textColor: '#FFFFFF',\r\n    fontSize: 14,\r\n    borderWidth: 2,\r\n    borderStyle: 'solid',\r\n    opacity: 1,\r\n  },\r\n  rotation: 0,\r\n  zIndex: 0,\r\n};\r\n\r\nexport const DEFAULT_FLOWCHART_EDGE: Omit<FlowchartEdge, 'id' | 'source' | 'target'> = {\r\n  type: 'smooth',\r\n  label: '',\r\n  data: {\r\n    color: '#64748B',\r\n    strokeWidth: 2,\r\n    strokeStyle: 'solid',\r\n    startArrow: false,\r\n    endArrow: true,\r\n    labelBgColor: '#1E293B',\r\n    labelTextColor: '#F1F5F9',\r\n  },\r\n};\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;;;;;;AAiFxB,MAAM,mBAOP;IACJ;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAI;QACvC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAI,QAAQ;QAAG;QACrC,cAAc;IAChB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,aAAa;QACb,aAAa;YAAE,OAAO;YAAK,QAAQ;QAAG;QACtC,cAAc;IAChB;CACD;AAEM,MAAM,mBAAmB;IAC9B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,yBAA0E;IACrF,MAAM;QAAE,OAAO;QAAK,QAAQ;IAAG;IAC/B,MAAM;QACJ,OAAO;QACP,OAAO;QACP,aAAa;QACb,WAAW;QACX,UAAU;QACV,aAAa;QACb,aAAa;QACb,SAAS;IACX;IACA,UAAU;IACV,QAAQ;AACV;AAEO,MAAM,yBAA0E;IACrF,MAAM;IACN,OAAO;IACP,MAAM;QACJ,OAAO;QACP,aAAa;QACb,aAAa;QACb,YAAY;QACZ,UAAU;QACV,cAAc;QACd,gBAAgB;IAClB;AACF"}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AsusTuf/Desktop/canvas/erd-designer/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\nexport function generateId(): string {\r\n  return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\r\n}\r\n\r\nexport function generateTableName(existingTables: { name: string }[]): string {\r\n  let counter = 1;\r\n  let name = `Table_${counter}`;\r\n  \r\n  while (existingTables.some(t => t.name === name)) {\r\n    counter++;\r\n    name = `Table_${counter}`;\r\n  }\r\n  \r\n  return name;\r\n}\r\n\r\nexport function generateColumnName(existingColumns: { name: string }[]): string {\r\n  let counter = 1;\r\n  let name = `column_${counter}`;\r\n  \r\n  while (existingColumns.some(c => c.name === name)) {\r\n    counter++;\r\n    name = `column_${counter}`;\r\n  }\r\n  \r\n  return name;\r\n}\r\n\r\nexport function toSnakeCase(str: string): string {\r\n  return str\r\n    .replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`)\r\n    .replace(/^_/, '');\r\n}\r\n\r\nexport function toPascalCase(str: string): string {\r\n  return str\r\n    .replace(/[_\\s]+(.)?/g, (_, char) => (char ? char.toUpperCase() : ''))\r\n    .replace(/^./, char => char.toUpperCase());\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB;AAEO,SAAS;IACd,OAAO,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG,MAAM,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG;AAC/F;AAEO,SAAS,kBAAkB,cAAkC;IAClE,IAAI,UAAU;IACd,IAAI,OAAO,CAAC,MAAM,EAAE,SAAS;IAE7B,MAAO,eAAe,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,MAAO;QAChD;QACA,OAAO,CAAC,MAAM,EAAE,SAAS;IAC3B;IAEA,OAAO;AACT;AAEO,SAAS,mBAAmB,eAAmC;IACpE,IAAI,UAAU;IACd,IAAI,OAAO,CAAC,OAAO,EAAE,SAAS;IAE9B,MAAO,gBAAgB,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,MAAO;QACjD;QACA,OAAO,CAAC,OAAO,EAAE,SAAS;IAC5B;IAEA,OAAO;AACT;AAEO,SAAS,YAAY,GAAW;IACrC,OAAO,IACJ,OAAO,CAAC,UAAU,CAAA,SAAU,CAAC,CAAC,EAAE,OAAO,WAAW,IAAI,EACtD,OAAO,CAAC,MAAM;AACnB;AAEO,SAAS,aAAa,GAAW;IACtC,OAAO,IACJ,OAAO,CAAC,eAAe,CAAC,GAAG,OAAU,OAAO,KAAK,WAAW,KAAK,IACjE,OAAO,CAAC,MAAM,CAAA,OAAQ,KAAK,WAAW;AAC3C"}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AsusTuf/Desktop/canvas/erd-designer/src/store/flowchartStore.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { persist } from 'zustand/middleware';\r\nimport { \r\n  FlowchartNode, \r\n  FlowchartEdge, \r\n  FlowchartNodeType, \r\n  FlowchartEdgeType,\r\n  FLOWCHART_SHAPES \r\n} from '@/types/flowchart';\r\nimport { generateId } from '@/lib/utils';\r\n\r\ninterface FlowchartStoreState {\r\n  nodes: FlowchartNode[];\r\n  edges: FlowchartEdge[];\r\n  selectedNodeId: string | null;\r\n  selectedEdgeId: string | null;\r\n  \r\n  // Node actions\r\n  addNode: (type: FlowchartNodeType, position: { x: number; y: number }) => string;\r\n  updateNode: (nodeId: string, updates: Partial<FlowchartNode>) => void;\r\n  updateNodeData: (nodeId: string, data: Partial<FlowchartNode['data']>) => void;\r\n  deleteNode: (nodeId: string) => void;\r\n  duplicateNode: (nodeId: string) => void;\r\n  moveNode: (nodeId: string, position: { x: number; y: number }) => void;\r\n  resizeNode: (nodeId: string, size: { width: number; height: number }) => void;\r\n  rotateNode: (nodeId: string, rotation: number) => void;\r\n  bringToFront: (nodeId: string) => void;\r\n  sendToBack: (nodeId: string) => void;\r\n  \r\n  // Edge actions\r\n  addEdge: (edge: Omit<FlowchartEdge, 'id'>) => string;\r\n  updateEdge: (edgeId: string, updates: Partial<FlowchartEdge>) => void;\r\n  updateEdgeData: (edgeId: string, data: Partial<FlowchartEdge['data']>) => void;\r\n  deleteEdge: (edgeId: string) => void;\r\n  \r\n  // Selection\r\n  selectNode: (nodeId: string | null) => void;\r\n  selectEdge: (edgeId: string | null) => void;\r\n  clearSelection: () => void;\r\n  \r\n  // Bulk actions\r\n  deleteSelected: () => void;\r\n  duplicateSelected: () => void;\r\n  \r\n  // Import/Export\r\n  exportToJSON: () => string;\r\n  importFromJSON: (json: string) => void;\r\n  exportToPNG: (element: HTMLElement) => Promise<string>;\r\n  clearAll: () => void;\r\n  \r\n  // History (undo/redo placeholder)\r\n  canUndo: boolean;\r\n  canRedo: boolean;\r\n  undo: () => void;\r\n  redo: () => void;\r\n}\r\n\r\nconst getShapeDefaults = (type: FlowchartNodeType) => {\r\n  const shape = FLOWCHART_SHAPES.find(s => s.type === type);\r\n  return shape || FLOWCHART_SHAPES[1]; // Default to process\r\n};\r\n\r\nexport const useFlowchartStore = create<FlowchartStoreState>()(\r\n  persist(\r\n    (set, get) => ({\r\n      nodes: [],\r\n      edges: [],\r\n      selectedNodeId: null,\r\n      selectedEdgeId: null,\r\n      canUndo: false,\r\n      canRedo: false,\r\n\r\n      addNode: (type, position) => {\r\n        const id = generateId();\r\n        const shapeDefaults = getShapeDefaults(type);\r\n        \r\n        const newNode: FlowchartNode = {\r\n          id,\r\n          type,\r\n          position,\r\n          size: { ...shapeDefaults.defaultSize },\r\n          data: {\r\n            label: shapeDefaults.label,\r\n            description: '',\r\n            color: shapeDefaults.defaultColor,\r\n            borderColor: shapeDefaults.defaultColor,\r\n            textColor: '#FFFFFF',\r\n            fontSize: 14,\r\n            borderWidth: 2,\r\n            borderStyle: 'solid',\r\n            opacity: 1,\r\n          },\r\n          rotation: 0,\r\n          zIndex: get().nodes.length,\r\n        };\r\n\r\n        set({ \r\n          nodes: [...get().nodes, newNode],\r\n          selectedNodeId: id,\r\n          selectedEdgeId: null,\r\n        });\r\n        return id;\r\n      },\r\n\r\n      updateNode: (nodeId, updates) => {\r\n        set({\r\n          nodes: get().nodes.map((n) =>\r\n            n.id === nodeId ? { ...n, ...updates } : n\r\n          ),\r\n        });\r\n      },\r\n\r\n      updateNodeData: (nodeId, data) => {\r\n        set({\r\n          nodes: get().nodes.map((n) =>\r\n            n.id === nodeId ? { ...n, data: { ...n.data, ...data } } : n\r\n          ),\r\n        });\r\n      },\r\n\r\n      deleteNode: (nodeId) => {\r\n        const { nodes, edges, selectedNodeId } = get();\r\n        \r\n        // Delete connected edges\r\n        const remainingEdges = edges.filter(\r\n          (e) => e.source !== nodeId && e.target !== nodeId\r\n        );\r\n        \r\n        set({\r\n          nodes: nodes.filter((n) => n.id !== nodeId),\r\n          edges: remainingEdges,\r\n          selectedNodeId: selectedNodeId === nodeId ? null : selectedNodeId,\r\n        });\r\n      },\r\n\r\n      duplicateNode: (nodeId) => {\r\n        const { nodes } = get();\r\n        const node = nodes.find((n) => n.id === nodeId);\r\n        if (!node) return;\r\n\r\n        const newId = generateId();\r\n        const newNode: FlowchartNode = {\r\n          ...node,\r\n          id: newId,\r\n          position: {\r\n            x: node.position.x + 50,\r\n            y: node.position.y + 50,\r\n          },\r\n          zIndex: nodes.length,\r\n        };\r\n\r\n        set({ \r\n          nodes: [...nodes, newNode],\r\n          selectedNodeId: newId,\r\n        });\r\n      },\r\n\r\n      moveNode: (nodeId, position) => {\r\n        set({\r\n          nodes: get().nodes.map((n) =>\r\n            n.id === nodeId ? { ...n, position } : n\r\n          ),\r\n        });\r\n      },\r\n\r\n      resizeNode: (nodeId, size) => {\r\n        set({\r\n          nodes: get().nodes.map((n) =>\r\n            n.id === nodeId ? { ...n, size } : n\r\n          ),\r\n        });\r\n      },\r\n\r\n      rotateNode: (nodeId, rotation) => {\r\n        set({\r\n          nodes: get().nodes.map((n) =>\r\n            n.id === nodeId ? { ...n, rotation } : n\r\n          ),\r\n        });\r\n      },\r\n\r\n      bringToFront: (nodeId) => {\r\n        const { nodes } = get();\r\n        const maxZ = Math.max(...nodes.map(n => n.zIndex || 0));\r\n        set({\r\n          nodes: nodes.map((n) =>\r\n            n.id === nodeId ? { ...n, zIndex: maxZ + 1 } : n\r\n          ),\r\n        });\r\n      },\r\n\r\n      sendToBack: (nodeId) => {\r\n        const { nodes } = get();\r\n        const minZ = Math.min(...nodes.map(n => n.zIndex || 0));\r\n        set({\r\n          nodes: nodes.map((n) =>\r\n            n.id === nodeId ? { ...n, zIndex: minZ - 1 } : n\r\n          ),\r\n        });\r\n      },\r\n\r\n      addEdge: (edge) => {\r\n        const id = generateId();\r\n        const newEdge: FlowchartEdge = {\r\n          ...edge,\r\n          id,\r\n          type: edge.type || 'smooth',\r\n          data: {\r\n            color: '#64748B',\r\n            strokeWidth: 2,\r\n            strokeStyle: 'solid',\r\n            startArrow: false,\r\n            endArrow: true,\r\n            labelBgColor: '#1E293B',\r\n            labelTextColor: '#F1F5F9',\r\n            ...edge.data,\r\n          },\r\n        };\r\n\r\n        set({ \r\n          edges: [...get().edges, newEdge],\r\n          selectedEdgeId: id,\r\n          selectedNodeId: null,\r\n        });\r\n        return id;\r\n      },\r\n\r\n      updateEdge: (edgeId, updates) => {\r\n        set({\r\n          edges: get().edges.map((e) =>\r\n            e.id === edgeId ? { ...e, ...updates } : e\r\n          ),\r\n        });\r\n      },\r\n\r\n      updateEdgeData: (edgeId, data) => {\r\n        set({\r\n          edges: get().edges.map((e) =>\r\n            e.id === edgeId ? { ...e, data: { ...e.data, ...data } } : e\r\n          ),\r\n        });\r\n      },\r\n\r\n      deleteEdge: (edgeId) => {\r\n        const { edges, selectedEdgeId } = get();\r\n        set({\r\n          edges: edges.filter((e) => e.id !== edgeId),\r\n          selectedEdgeId: selectedEdgeId === edgeId ? null : selectedEdgeId,\r\n        });\r\n      },\r\n\r\n      selectNode: (nodeId) => {\r\n        set({\r\n          selectedNodeId: nodeId,\r\n          selectedEdgeId: null,\r\n        });\r\n      },\r\n\r\n      selectEdge: (edgeId) => {\r\n        set({\r\n          selectedEdgeId: edgeId,\r\n          selectedNodeId: null,\r\n        });\r\n      },\r\n\r\n      clearSelection: () => {\r\n        set({\r\n          selectedNodeId: null,\r\n          selectedEdgeId: null,\r\n        });\r\n      },\r\n\r\n      deleteSelected: () => {\r\n        const { selectedNodeId, selectedEdgeId } = get();\r\n        if (selectedNodeId) {\r\n          get().deleteNode(selectedNodeId);\r\n        } else if (selectedEdgeId) {\r\n          get().deleteEdge(selectedEdgeId);\r\n        }\r\n      },\r\n\r\n      duplicateSelected: () => {\r\n        const { selectedNodeId } = get();\r\n        if (selectedNodeId) {\r\n          get().duplicateNode(selectedNodeId);\r\n        }\r\n      },\r\n\r\n      exportToJSON: () => {\r\n        const { nodes, edges } = get();\r\n        return JSON.stringify({ nodes, edges }, null, 2);\r\n      },\r\n\r\n      importFromJSON: (json) => {\r\n        try {\r\n          const data = JSON.parse(json);\r\n          if (data.nodes && Array.isArray(data.nodes)) {\r\n            set({\r\n              nodes: data.nodes,\r\n              edges: data.edges || [],\r\n              selectedNodeId: null,\r\n              selectedEdgeId: null,\r\n            });\r\n          }\r\n        } catch (error) {\r\n          console.error('Failed to import JSON:', error);\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      exportToPNG: async (element) => {\r\n        // This will be implemented with html-to-image in the component\r\n        return '';\r\n      },\r\n\r\n      clearAll: () => {\r\n        set({\r\n          nodes: [],\r\n          edges: [],\r\n          selectedNodeId: null,\r\n          selectedEdgeId: null,\r\n        });\r\n      },\r\n\r\n      undo: () => {\r\n        // Placeholder for undo functionality\r\n      },\r\n\r\n      redo: () => {\r\n        // Placeholder for redo functionality\r\n      },\r\n    }),\r\n    {\r\n      name: 'flowchart-designer-storage',\r\n    }\r\n  )\r\n);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 580, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AsusTuf/Desktop/canvas/erd-designer/src/components/flowchart/FlowchartNode.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { memo, useState } from 'react';\r\nimport { Handle, Position, type NodeProps } from '@xyflow/react';\r\nimport { useFlowchartStore } from '@/store/flowchartStore';\r\nimport { cn } from '@/lib/utils';\r\nimport { FlowchartNode as FlowchartNodeType } from '@/types/flowchart';\r\nimport { \r\n  MoreVertical,\r\n  Trash2,\r\n  Copy,\r\n  ArrowUp,\r\n  ArrowDown,\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface FlowchartNodeData extends Record<string, unknown> {\r\n  nodeId: string;\r\n}\r\n\r\n// Shape rendering components\r\nconst StartEndShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full rounded-full flex items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      border: `${borderWidth}px solid ${borderColor}`,\r\n    }}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst ProcessShape = ({ color, borderColor, borderWidth, borderStyle, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full rounded-xl flex items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      border: `${borderWidth}px ${borderStyle} ${borderColor}`,\r\n    }}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst DecisionShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full flex items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      clipPath: 'polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)',\r\n    }}\r\n  >\r\n    <div className=\"w-[70%] h-[70%] flex items-center justify-center\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst InputOutputShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full flex items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      clipPath: 'polygon(15% 0%, 100% 0%, 85% 100%, 0% 100%)',\r\n    }}\r\n  >\r\n    <div className=\"w-[80%] h-[70%] flex items-center justify-center\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst DocumentShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full rounded-t-xl flex items-center justify-center relative transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50 rounded-b-xl'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      border: `${borderWidth}px solid ${borderColor}`,\r\n      borderBottom: 'none',\r\n      borderRadius: '12px 12px 0 12px',\r\n    }}\r\n  >\r\n    <div\r\n      className=\"absolute bottom-0 right-0 w-[30%] h-[30%]\"\r\n      style={{\r\n        backgroundColor: borderColor,\r\n        clipPath: 'polygon(100% 0, 0 100%, 100% 100%)',\r\n      }}\r\n    />\r\n    <div className=\"w-[80%] h-[70%] flex items-center justify-center z-10\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst DatabaseShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full flex flex-col items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50 rounded-xl'\r\n    )}\r\n  >\r\n    <div\r\n      className=\"w-full h-[20%] rounded-[50%]\"\r\n      style={{\r\n        backgroundColor: borderColor,\r\n        border: `${borderWidth}px solid ${borderColor}`,\r\n      }}\r\n    />\r\n    <div\r\n      className=\"w-full flex-1\"\r\n      style={{\r\n        backgroundColor: color,\r\n        borderLeft: `${borderWidth}px solid ${borderColor}`,\r\n        borderRight: `${borderWidth}px solid ${borderColor}`,\r\n      }}\r\n    />\r\n    <div\r\n      className=\"w-full h-[20%] rounded-[50%] border-t-0\"\r\n      style={{\r\n        backgroundColor: color,\r\n        border: `${borderWidth}px solid ${borderColor}`,\r\n      }}\r\n    />\r\n    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst PredefinedShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full flex items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50 rounded-xl'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      border: `${borderWidth}px double ${borderColor}`,\r\n      borderRadius: '12px',\r\n    }}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst DelayShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full flex items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      border: `${borderWidth}px solid ${borderColor}`,\r\n      borderRadius: '12px 12px 40px 12px',\r\n    }}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst StoredDataShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full flex items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50 rounded-xl'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      border: `${borderWidth}px solid ${borderColor}`,\r\n      borderRadius: '0 50% 50% 0',\r\n    }}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst PreparationShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full flex items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      clipPath: 'polygon(20% 0%, 80% 0%, 100% 50%, 80% 100%, 20% 100%, 0% 50%)',\r\n    }}\r\n  >\r\n    <div className=\"w-[70%] h-[70%] flex items-center justify-center\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst ConnectorShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full rounded-full flex items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      border: `${borderWidth}px solid ${borderColor}`,\r\n    }}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst OffPageShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full flex items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      clipPath: 'polygon(0% 0%, 75% 0%, 100% 50%, 75% 100%, 0% 100%)',\r\n    }}\r\n  >\r\n    <div className=\"w-[70%] h-[70%] flex items-center justify-center\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst ManualInputShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full flex items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      clipPath: 'polygon(0% 25%, 100% 0%, 100% 100%, 0% 100%)',\r\n    }}\r\n  >\r\n    <div className=\"w-[80%] h-[70%] flex items-center justify-center mt-2\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst DisplayShape = ({ color, borderColor, borderWidth, selected, children }: any) => (\r\n  <div\r\n    className={cn(\r\n      'w-full h-full flex items-center justify-center transition-all duration-200',\r\n      selected && 'ring-2 ring-white/50'\r\n    )}\r\n    style={{\r\n      backgroundColor: color,\r\n      clipPath: 'polygon(15% 0%, 85% 0%, 100% 50%, 85% 100%, 15% 100%, 0% 50%)',\r\n    }}\r\n  >\r\n    <div className=\"w-[70%] h-[70%] flex items-center justify-center\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst ShapeContent = ({ node, isSelected }: { node: FlowchartNodeType; isSelected: boolean }) => {\r\n  const { data, type } = node;\r\n  const textStyle: React.CSSProperties = {\r\n    color: data.textColor || '#FFFFFF',\r\n    fontSize: `${data.fontSize || 14}px`,\r\n    fontWeight: 500,\r\n    textAlign: 'center',\r\n    wordWrap: 'break-word',\r\n    maxWidth: '90%',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    display: '-webkit-box',\r\n    WebkitLineClamp: 3,\r\n    WebkitBoxOrient: 'vertical',\r\n    lineHeight: 1.3,\r\n    opacity: data.opacity || 1,\r\n  };\r\n\r\n  const shapeProps = {\r\n    color: data.color || '#3B82F6',\r\n    borderColor: data.borderColor || '#1D4ED8',\r\n    borderWidth: data.borderWidth || 2,\r\n    borderStyle: data.borderStyle || 'solid',\r\n    selected: isSelected,\r\n  };\r\n\r\n  const content = (\r\n    <span style={textStyle} className=\"px-2 select-none pointer-events-none\">\r\n      {data.label}\r\n    </span>\r\n  );\r\n\r\n  switch (type) {\r\n    case 'start':\r\n    case 'end':\r\n      return <StartEndShape {...shapeProps}>{content}</StartEndShape>;\r\n    case 'process':\r\n      return <ProcessShape {...shapeProps}>{content}</ProcessShape>;\r\n    case 'decision':\r\n      return <DecisionShape {...shapeProps}>{content}</DecisionShape>;\r\n    case 'input':\r\n    case 'output':\r\n      return <InputOutputShape {...shapeProps}>{content}</InputOutputShape>;\r\n    case 'document':\r\n      return <DocumentShape {...shapeProps}>{content}</DocumentShape>;\r\n    case 'database':\r\n      return <DatabaseShape {...shapeProps}>{content}</DatabaseShape>;\r\n    case 'predefined':\r\n      return <PredefinedShape {...shapeProps}>{content}</PredefinedShape>;\r\n    case 'delay':\r\n      return <DelayShape {...shapeProps}>{content}</DelayShape>;\r\n    case 'stored-data':\r\n      return <StoredDataShape {...shapeProps}>{content}</StoredDataShape>;\r\n    case 'preparation':\r\n      return <PreparationShape {...shapeProps}>{content}</PreparationShape>;\r\n    case 'connector':\r\n      return <ConnectorShape {...shapeProps}>{content}</ConnectorShape>;\r\n    case 'off-page':\r\n      return <OffPageShape {...shapeProps}>{content}</OffPageShape>;\r\n    case 'manual-input':\r\n      return <ManualInputShape {...shapeProps}>{content}</ManualInputShape>;\r\n    case 'display':\r\n      return <DisplayShape {...shapeProps}>{content}</DisplayShape>;\r\n    default:\r\n      return <ProcessShape {...shapeProps}>{content}</ProcessShape>;\r\n  }\r\n};\r\n\r\nfunction FlowchartNodeComponent({ data, selected }: NodeProps) {\r\n  const { nodeId } = data as FlowchartNodeData;\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  const [isHovered, setIsHovered] = useState(false);\r\n  \r\n  const node = useFlowchartStore((state) => \r\n    state.nodes.find((n) => n.id === nodeId)\r\n  );\r\n  const selectedNodeId = useFlowchartStore((state) => state.selectedNodeId);\r\n  const selectNode = useFlowchartStore((state) => state.selectNode);\r\n  const duplicateNode = useFlowchartStore((state) => state.duplicateNode);\r\n  const deleteNode = useFlowchartStore((state) => state.deleteNode);\r\n  const bringToFront = useFlowchartStore((state) => state.bringToFront);\r\n  const sendToBack = useFlowchartStore((state) => state.sendToBack);\r\n  const updateNodeData = useFlowchartStore((state) => state.updateNodeData);\r\n  \r\n  const isSelected = selectedNodeId === nodeId || selected;\r\n\r\n  if (!node) return null;\r\n\r\n  const handleDuplicate = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    duplicateNode(nodeId);\r\n    setShowMenu(false);\r\n  };\r\n\r\n  const handleDelete = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    deleteNode(nodeId);\r\n    setShowMenu(false);\r\n  };\r\n\r\n  const handleColorChange = (color: string) => {\r\n    updateNodeData(nodeId, { color, borderColor: color });\r\n    setShowMenu(false);\r\n  };\r\n\r\n  const rotation = node.rotation || 0;\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'relative transition-all duration-200',\r\n        isSelected && 'z-50'\r\n      )}\r\n      style={{\r\n        width: node.size.width,\r\n        height: node.size.height,\r\n        transform: `rotate(${rotation}deg)`,\r\n        opacity: node.data.opacity || 1,\r\n      }}\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n      onClick={() => selectNode(nodeId)}\r\n    >\r\n      {/* Shape */}\r\n      <ShapeContent node={node} isSelected={isSelected} />\r\n\r\n      {/* Selection indicator */}\r\n      {isSelected && (\r\n        <div className=\"absolute -inset-1 border-2 border-dashed border-blue-400 rounded-lg pointer-events-none\" />\r\n      )}\r\n\r\n      {/* Resize handles (visible when selected) */}\r\n      {isSelected && (\r\n        <>\r\n          <div className=\"absolute -top-1 -left-1 w-3 h-3 bg-blue-500 rounded-full cursor-nw-resize\" />\r\n          <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full cursor-ne-resize\" />\r\n          <div className=\"absolute -bottom-1 -left-1 w-3 h-3 bg-blue-500 rounded-full cursor-sw-resize\" />\r\n          <div className=\"absolute -bottom-1 -right-1 w-3 h-3 bg-blue-500 rounded-full cursor-se-resize\" />\r\n        </>\r\n      )}\r\n\r\n      {/* Context Menu Button */}\r\n      {(isHovered || isSelected) && (\r\n        <button\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            setShowMenu(!showMenu);\r\n          }}\r\n          className=\"absolute -top-3 -right-3 p-1.5 rounded-full bg-slate-700 hover:bg-slate-600 text-slate-300 shadow-lg transition-all z-50\"\r\n        >\r\n          <MoreVertical className=\"w-3 h-3\" />\r\n        </button>\r\n      )}\r\n\r\n      {/* Dropdown Menu */}\r\n      <AnimatePresence>\r\n        {showMenu && (\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.95, y: -5 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.95, y: -5 }}\r\n            className=\"absolute -top-2 left-full ml-2 w-48 bg-slate-800 rounded-xl border border-slate-700 shadow-2xl z-50 overflow-hidden\"\r\n          >\r\n            <button\r\n              onClick={handleDuplicate}\r\n              className=\"w-full px-3 py-2 flex items-center gap-2 text-xs text-slate-300 hover:bg-white/5 transition-colors\"\r\n            >\r\n              <Copy className=\"w-3.5 h-3.5\" />\r\n              Duplicate\r\n            </button>\r\n            \r\n            <button\r\n              onClick={(e) => { e.stopPropagation(); bringToFront(nodeId); setShowMenu(false); }}\r\n              className=\"w-full px-3 py-2 flex items-center gap-2 text-xs text-slate-300 hover:bg-white/5 transition-colors\"\r\n            >\r\n              <ArrowUp className=\"w-3.5 h-3.5\" />\r\n              Bring to Front\r\n            </button>\r\n            \r\n            <button\r\n              onClick={(e) => { e.stopPropagation(); sendToBack(nodeId); setShowMenu(false); }}\r\n              className=\"w-full px-3 py-2 flex items-center gap-2 text-xs text-slate-300 hover:bg-white/5 transition-colors\"\r\n            >\r\n              <ArrowDown className=\"w-3.5 h-3.5\" />\r\n              Send to Back\r\n            </button>\r\n\r\n            <div className=\"px-3 py-2 border-t border-white/5\">\r\n              <span className=\"text-[10px] text-slate-500 uppercase tracking-wider\">Color</span>\r\n              <div className=\"flex flex-wrap gap-1 mt-1.5\">\r\n                {['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899', '#06B6D4', '#84CC16'].map((color) => (\r\n                  <button\r\n                    key={color}\r\n                    onClick={() => handleColorChange(color)}\r\n                    className={cn(\r\n                      'w-5 h-5 rounded-full transition-transform hover:scale-110',\r\n                      node.data.color === color && 'ring-2 ring-white'\r\n                    )}\r\n                    style={{ backgroundColor: color }}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <button\r\n              onClick={handleDelete}\r\n              className=\"w-full px-3 py-2 flex items-center gap-2 text-xs text-red-400 hover:bg-red-500/10 transition-colors border-t border-white/5\"\r\n            >\r\n              <Trash2 className=\"w-3.5 h-3.5\" />\r\n              Delete\r\n            </button>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Click outside to close menu */}\r\n      {showMenu && (\r\n        <div \r\n          className=\"fixed inset-0 z-40\" \r\n          onClick={() => setShowMenu(false)}\r\n        />\r\n      )}\r\n\r\n      {/* React Flow Handles */}\r\n      <Handle\r\n        type=\"source\"\r\n        position={Position.Top}\r\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\r\n        style={{ top: -6 }}\r\n      />\r\n      <Handle\r\n        type=\"target\"\r\n        position={Position.Top}\r\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\r\n        style={{ top: -6 }}\r\n      />\r\n      <Handle\r\n        type=\"source\"\r\n        position={Position.Right}\r\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\r\n        style={{ right: -6 }}\r\n      />\r\n      <Handle\r\n        type=\"target\"\r\n        position={Position.Right}\r\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\r\n        style={{ right: -6 }}\r\n      />\r\n      <Handle\r\n        type=\"source\"\r\n        position={Position.Bottom}\r\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\r\n        style={{ bottom: -6 }}\r\n      />\r\n      <Handle\r\n        type=\"target\"\r\n        position={Position.Bottom}\r\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\r\n        style={{ bottom: -6 }}\r\n      />\r\n      <Handle\r\n        type=\"source\"\r\n        position={Position.Left}\r\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\r\n        style={{ left: -6 }}\r\n      />\r\n      <Handle\r\n        type=\"target\"\r\n        position={Position.Left}\r\n        className=\"!w-3 !h-3 !bg-white/50 !border-2 !border-slate-400 hover:!bg-blue-400 hover:!border-blue-400 transition-colors\"\r\n        style={{ left: -6 }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default memo(FlowchartNodeComponent);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1501, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AsusTuf/Desktop/canvas/erd-designer/src/components/flowchart/FlowchartEdge.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { memo, useState } from 'react';\r\nimport {\r\n  BaseEdge,\r\n  EdgeLabelRenderer,\r\n  EdgeProps,\r\n  getBezierPath,\r\n  getSmoothStepPath,\r\n  getStraightPath,\r\n} from '@xyflow/react';\r\nimport { useFlowchartStore } from '@/store/flowchartStore';\r\nimport { cn } from '@/lib/utils';\r\nimport { X, Settings2 } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport default memo(function FlowchartEdgeComponent({\r\n  id,\r\n  sourceX,\r\n  sourceY,\r\n  targetX,\r\n  targetY,\r\n  sourcePosition,\r\n  targetPosition,\r\n  data,\r\n  label,\r\n  selected,\r\n}: EdgeProps) {\r\n  const [showControls, setShowControls] = useState(false);\r\n  \r\n  const selectedEdgeId = useFlowchartStore((state) => state.selectedEdgeId);\r\n  const selectEdge = useFlowchartStore((state) => state.selectEdge);\r\n  const deleteEdge = useFlowchartStore((state) => state.deleteEdge);\r\n  const updateEdge = useFlowchartStore((state) => state.updateEdge);\r\n  const updateEdgeData = useFlowchartStore((state) => state.updateEdgeData);\r\n  \r\n  const isSelected = selectedEdgeId === id || selected;\r\n\r\n  // Get edge type from data\r\n  const edgeType = (data?.type as string) || 'smooth';\r\n  const color = (data?.color as string) || '#64748B';\r\n  const strokeWidth = (data?.strokeWidth as number) || 2;\r\n  const strokeStyle = (data?.strokeStyle as string) || 'solid';\r\n  const startArrow = (data?.startArrow as boolean) || false;\r\n  const endArrow = (data?.endArrow as boolean) !== false; // default true\r\n\r\n  // Calculate path based on edge type\r\n  let edgePath = '';\r\n  let labelX = 0;\r\n  let labelY = 0;\r\n\r\n  switch (edgeType) {\r\n    case 'straight':\r\n      [edgePath, labelX, labelY] = getStraightPath({\r\n        sourceX,\r\n        sourceY,\r\n        targetX,\r\n        targetY,\r\n      });\r\n      break;\r\n    case 'step':\r\n      [edgePath, labelX, labelY] = getSmoothStepPath({\r\n        sourceX,\r\n        sourceY,\r\n        sourcePosition,\r\n        targetX,\r\n        targetY,\r\n        targetPosition,\r\n        borderRadius: 0,\r\n      });\r\n      break;\r\n    case 'smooth':\r\n    default:\r\n      [edgePath, labelX, labelY] = getBezierPath({\r\n        sourceX,\r\n        sourceY,\r\n        sourcePosition,\r\n        targetX,\r\n        targetY,\r\n        targetPosition,\r\n        curvature: 0.3,\r\n      });\r\n      break;\r\n  }\r\n\r\n  const handleDelete = () => {\r\n    if (id) {\r\n      deleteEdge(id);\r\n    }\r\n  };\r\n\r\n  const handleTypeChange = (newType: string) => {\r\n    if (id) {\r\n      updateEdge(id, { type: newType as any });\r\n    }\r\n  };\r\n\r\n  const markerStart = startArrow ? `url(#arrow-start-${id})` : undefined;\r\n  const markerEnd = endArrow ? `url(#arrow-end-${id})` : undefined;\r\n\r\n  const dashArray = strokeStyle === 'dashed' ? '8,4' : strokeStyle === 'dotted' ? '2,4' : undefined;\r\n\r\n  return (\r\n    <>\r\n      {/* Marker definitions */}\r\n      <defs>\r\n        <marker\r\n          id={`arrow-start-${id}`}\r\n          markerWidth=\"10\"\r\n          markerHeight=\"10\"\r\n          refX=\"0\"\r\n          refY=\"3\"\r\n          orient=\"auto\"\r\n          markerUnits=\"strokeWidth\"\r\n        >\r\n          <path d=\"M10,0 L0,3 L10,6\" fill=\"none\" stroke={color} strokeWidth=\"1.5\" />\r\n        </marker>\r\n        <marker\r\n          id={`arrow-end-${id}`}\r\n          markerWidth=\"10\"\r\n          markerHeight=\"10\"\r\n          refX=\"9\"\r\n          refY=\"3\"\r\n          orient=\"auto\"\r\n          markerUnits=\"strokeWidth\"\r\n        >\r\n          <path d=\"M0,0 L10,3 L0,6\" fill=\"none\" stroke={color} strokeWidth=\"1.5\" />\r\n        </marker>\r\n      </defs>\r\n\r\n      <BaseEdge\r\n        path={edgePath}\r\n        style={{\r\n          stroke: color,\r\n          strokeWidth: isSelected ? strokeWidth + 1 : strokeWidth,\r\n          strokeDasharray: dashArray,\r\n        }}\r\n        markerStart={markerStart}\r\n        markerEnd={markerEnd}\r\n        className=\"transition-all duration-200\"\r\n      />\r\n\r\n      {/* Label */}\r\n      <EdgeLabelRenderer>\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            transform: `translate(-50%, -50%) translate(${labelX}px, ${labelY}px)`,\r\n          }}\r\n          className=\"nodrag nopan\"\r\n          onMouseEnter={() => setShowControls(true)}\r\n          onMouseLeave={() => setShowControls(false)}\r\n        >\r\n          <AnimatePresence>\r\n            {(showControls || isSelected) && (\r\n              <motion.div\r\n                initial={{ opacity: 0, scale: 0.9 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                exit={{ opacity: 0, scale: 0.9 }}\r\n                className={cn(\r\n                  'flex items-center gap-1 p-1 rounded-lg',\r\n                  'bg-slate-800 border border-slate-600 shadow-xl'\r\n                )}\r\n              >\r\n                {/* Type selector */}\r\n                <select\r\n                  value={edgeType}\r\n                  onChange={(e) => handleTypeChange(e.target.value)}\r\n                  onClick={(e) => e.stopPropagation()}\r\n                  className=\"text-[10px] bg-slate-700 text-slate-200 rounded px-1.5 py-0.5 border-none outline-none cursor-pointer\"\r\n                >\r\n                  <option value=\"smooth\">Smooth</option>\r\n                  <option value=\"straight\">Straight</option>\r\n                  <option value=\"step\">Step</option>\r\n                </select>\r\n\r\n                {/* Arrow toggle */}\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    updateEdgeData(id, { endArrow: !endArrow });\r\n                  }}\r\n                  className={cn(\r\n                    \"px-1.5 py-0.5 rounded text-[10px] font-medium transition-colors\",\r\n                    endArrow ? \"bg-blue-500 text-white\" : \"bg-slate-600 text-slate-300\"\r\n                  )}\r\n                >\r\n                  \r\n                </button>\r\n\r\n                {/* Delete button */}\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    handleDelete();\r\n                  }}\r\n                  className=\"p-1 rounded hover:bg-red-500/20 text-red-400 transition-colors\"\r\n                >\r\n                  <X className=\"w-3 h-3\" />\r\n                </button>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n        </div>\r\n      </EdgeLabelRenderer>\r\n\r\n      {/* Invisible wider edge for easier selection */}\r\n      <path\r\n        d={edgePath}\r\n        stroke=\"transparent\"\r\n        strokeWidth={15}\r\n        fill=\"none\"\r\n        className=\"cursor-pointer\"\r\n        onClick={() => id && selectEdge(id)}\r\n      />\r\n    </>\r\n  );\r\n});\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1827, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AsusTuf/Desktop/canvas/erd-designer/src/components/flowchart/FlowchartCanvas.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useCallback, useRef, useEffect, useState } from 'react';\r\nimport {\r\n  ReactFlow,\r\n  Background,\r\n  BackgroundVariant,\r\n  Controls,\r\n  MiniMap,\r\n  useNodesState,\r\n  useEdgesState,\r\n  Connection,\r\n  ConnectionMode,\r\n  Panel,\r\n  useReactFlow,\r\n  ReactFlowProvider,\r\n  type Node,\r\n  type Edge,\r\n} from '@xyflow/react';\r\nimport { addEdge as addEdgeHelper } from '@xyflow/react';\r\nimport '@xyflow/react/dist/style.css';\r\nimport { useFlowchartStore } from '@/store/flowchartStore';\r\nimport { FlowchartNode as FlowchartNodeType, type FlowchartNodeType as FlowchartNodeTypeEnum } from '@/types/flowchart';\r\nimport FlowchartNode from './FlowchartNode';\r\nimport FlowchartEdge from './FlowchartEdge';\r\nimport { toPng } from 'html-to-image';\r\nimport { \r\n  Download, \r\n  FileJson, \r\n  Trash2, \r\n  Plus,\r\n  ZoomIn,\r\n  ZoomOut,\r\n  Maximize,\r\n  Grid3X3,\r\n  MousePointer2,\r\n  Undo2,\r\n  Redo2,\r\n  Keyboard,\r\n  Copy\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface NodeData extends Record<string, unknown> {\r\n  nodeId: string;\r\n}\r\n\r\ninterface EdgeData extends Record<string, unknown> {\r\n  edgeId: string;\r\n}\r\n\r\ntype FlowchartNodeComponentType = Node<NodeData, 'flowchartNode'>;\r\ntype FlowchartEdgeComponentType = Edge<EdgeData, 'flowchartEdge'>;\r\n\r\nconst nodeTypes: any = {\r\n  flowchartNode: FlowchartNode,\r\n};\r\n\r\nconst edgeTypes: any = {\r\n  flowchartEdge: FlowchartEdge,\r\n};\r\n\r\nfunction FlowchartCanvasContent() {\r\n  const reactFlowWrapper = useRef<HTMLDivElement>(null);\r\n  const {\r\n    nodes,\r\n    edges,\r\n    selectedNodeId,\r\n    selectedEdgeId,\r\n    addNode,\r\n    addEdge,\r\n    selectNode,\r\n    selectEdge,\r\n    clearSelection,\r\n    moveNode,\r\n    deleteSelected,\r\n    duplicateSelected,\r\n    exportToJSON,\r\n    importFromJSON,\r\n    clearAll,\r\n  } = useFlowchartStore();\r\n\r\n  const [flowNodes, setFlowNodes, onNodesChange] = useNodesState<FlowchartNodeComponentType>([]);\r\n  const [flowEdges, setFlowEdges, onEdgesChange] = useEdgesState<FlowchartEdgeComponentType>([]);\r\n  const [showGrid, setShowGrid] = useState(true);\r\n  const [showMiniMap, setShowMiniMap] = useState(true);\r\n  const { fitView, zoomIn, zoomOut, screenToFlowPosition } = useReactFlow();\r\n\r\n  // Convert store nodes to React Flow nodes\r\n  useEffect(() => {\r\n    const convertedNodes: FlowchartNodeComponentType[] = nodes.map((node) => ({\r\n      id: node.id,\r\n      type: 'flowchartNode',\r\n      position: node.position,\r\n      data: { nodeId: node.id },\r\n      selected: node.id === selectedNodeId,\r\n      zIndex: node.zIndex || 0,\r\n    }));\r\n    setFlowNodes(convertedNodes);\r\n  }, [nodes, selectedNodeId, setFlowNodes]);\r\n\r\n  // Convert store edges to React Flow edges\r\n  useEffect(() => {\r\n    const convertedEdges: FlowchartEdgeComponentType[] = edges.map((edge) => ({\r\n      id: edge.id,\r\n      source: edge.source,\r\n      target: edge.target,\r\n      type: 'flowchartEdge',\r\n      data: { \r\n        edgeId: edge.id,\r\n        ...edge.data,\r\n        type: edge.type,\r\n      },\r\n      selected: edge.id === selectedEdgeId,\r\n      label: edge.label,\r\n    }));\r\n    setFlowEdges(convertedEdges);\r\n  }, [edges, selectedEdgeId, setFlowEdges]);\r\n\r\n  // Handle connections (creating new edges)\r\n  const onConnect = useCallback(\r\n    (connection: Connection) => {\r\n      if (connection.source && connection.target) {\r\n        addEdge({\r\n          source: connection.source,\r\n          target: connection.target,\r\n          type: 'smooth',\r\n          sourceHandle: connection.sourceHandle || undefined,\r\n          targetHandle: connection.targetHandle || undefined,\r\n        });\r\n      }\r\n      setFlowEdges((eds) => {\r\n        const newEdges = addEdgeHelper(connection, eds);\r\n        return newEdges as FlowchartEdgeComponentType[];\r\n      });\r\n    },\r\n    [addEdge, setFlowEdges]\r\n  );\r\n\r\n  // Handle node drag stop (update position in store)\r\n  const onNodeDragStop = useCallback(\r\n    (_: React.MouseEvent, node: FlowchartNodeComponentType) => {\r\n      moveNode(node.id, node.position);\r\n    },\r\n    [moveNode]\r\n  );\r\n\r\n  // Handle pane click (deselect)\r\n  const onPaneClick = useCallback(() => {\r\n    clearSelection();\r\n  }, [clearSelection]);\r\n\r\n  // Handle node click\r\n  const onNodeClick = useCallback(\r\n    (_: React.MouseEvent, node: FlowchartNodeComponentType) => {\r\n      selectNode(node.id);\r\n    },\r\n    [selectNode]\r\n  );\r\n\r\n  // Handle edge click\r\n  const onEdgeClick = useCallback(\r\n    (_: React.MouseEvent, edge: FlowchartEdgeComponentType) => {\r\n      selectEdge(edge.id);\r\n    },\r\n    [selectEdge]\r\n  );\r\n\r\n  // Handle drop from shape library\r\n  const onDragOver = useCallback((event: React.DragEvent) => {\r\n    event.preventDefault();\r\n    event.dataTransfer.dropEffect = 'copy';\r\n  }, []);\r\n\r\n  const onDrop = useCallback(\r\n    (event: React.DragEvent) => {\r\n      event.preventDefault();\r\n\r\n      const type = event.dataTransfer.getData('application/flowchart-shape') as FlowchartNodeTypeEnum;\r\n      \r\n      if (type && reactFlowWrapper.current) {\r\n        const position = screenToFlowPosition({\r\n          x: event.clientX,\r\n          y: event.clientY,\r\n        });\r\n        \r\n        // Center the node on the drop position\r\n        addNode(type, { \r\n          x: position.x - 70, \r\n          y: position.y - 40 \r\n        });\r\n      }\r\n    },\r\n    [addNode, screenToFlowPosition]\r\n  );\r\n\r\n  // Add node at center\r\n  const handleAddNode = useCallback((type: FlowchartNodeTypeEnum = 'process') => {\r\n    const wrapper = reactFlowWrapper.current;\r\n    if (wrapper) {\r\n      const { width, height } = wrapper.getBoundingClientRect();\r\n      const centerPosition = screenToFlowPosition({\r\n        x: width / 2,\r\n        y: height / 2,\r\n      });\r\n      addNode(type, { \r\n        x: centerPosition.x - 70, \r\n        y: centerPosition.y - 40 \r\n      });\r\n    }\r\n  }, [addNode, screenToFlowPosition]);\r\n\r\n  // Export as PNG\r\n  const handleExportImage = useCallback(async () => {\r\n    if (reactFlowWrapper.current) {\r\n      const dataUrl = await toPng(reactFlowWrapper.current, {\r\n        backgroundColor: '#0f172a',\r\n      });\r\n      const link = document.createElement('a');\r\n      link.download = 'flowchart.png';\r\n      link.href = dataUrl;\r\n      link.click();\r\n    }\r\n  }, []);\r\n\r\n  // Export as JSON\r\n  const handleExportJSON = useCallback(() => {\r\n    const json = exportToJSON();\r\n    const blob = new Blob([json], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.download = 'flowchart.json';\r\n    link.href = url;\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n  }, [exportToJSON]);\r\n\r\n  // Import JSON\r\n  const handleImportJSON = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        try {\r\n          const json = event.target?.result as string;\r\n          importFromJSON(json);\r\n        } catch (error) {\r\n          alert('Invalid JSON file');\r\n        }\r\n      };\r\n      reader.readAsText(file);\r\n    }\r\n    e.target.value = '';\r\n  }, [importFromJSON]);\r\n\r\n  // Keyboard shortcuts\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      const target = e.target as HTMLElement;\r\n      const isInput = target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.isContentEditable;\r\n      \r\n      // Delete\r\n      if ((e.key === 'Delete' || e.key === 'Backspace') && !isInput) {\r\n        deleteSelected();\r\n      }\r\n      // Duplicate\r\n      if ((e.ctrlKey || e.metaKey) && e.key === 'd') {\r\n        e.preventDefault();\r\n        duplicateSelected();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [deleteSelected, duplicateSelected]);\r\n\r\n  return (\r\n    <div className=\"relative w-full h-full\" ref={reactFlowWrapper}>\r\n      <ReactFlow\r\n        nodes={flowNodes}\r\n        edges={flowEdges}\r\n        onNodesChange={onNodesChange}\r\n        onEdgesChange={onEdgesChange}\r\n        onConnect={onConnect}\r\n        onNodeDragStop={onNodeDragStop}\r\n        onPaneClick={onPaneClick}\r\n        onNodeClick={onNodeClick}\r\n        onEdgeClick={onEdgeClick}\r\n        onDragOver={onDragOver}\r\n        onDrop={onDrop}\r\n        nodeTypes={nodeTypes}\r\n        edgeTypes={edgeTypes}\r\n        connectionMode={ConnectionMode.Loose}\r\n        fitView\r\n        fitViewOptions={{ padding: 0.2 }}\r\n        defaultEdgeOptions={{\r\n          type: 'flowchartEdge',\r\n        }}\r\n        snapToGrid\r\n        snapGrid={[15, 15]}\r\n        className=\"bg-slate-950\"\r\n        deleteKeyCode={['Backspace', 'Delete']}\r\n      >\r\n        {showGrid && (\r\n          <Background\r\n            variant={BackgroundVariant.Dots}\r\n            gap={20}\r\n            size={1}\r\n            color=\"rgba(148, 163, 184, 0.15)\"\r\n            className=\"bg-slate-950\"\r\n          />\r\n        )}\r\n\r\n        <Controls \r\n          className=\"!bg-slate-800/80 !border-slate-700 !shadow-xl !rounded-xl overflow-hidden\"\r\n          showInteractive={false}\r\n        />\r\n\r\n        {showMiniMap && (\r\n          <MiniMap\r\n            className=\"!bg-slate-800/80 !border-slate-700 !rounded-xl !shadow-xl !overflow-hidden\"\r\n            nodeStrokeWidth={3}\r\n            zoomable\r\n            pannable\r\n            maskColor=\"rgba(15, 23, 42, 0.7)\"\r\n            nodeColor={(node) => {\r\n              const flowNode = nodes.find((n) => n.id === node.id);\r\n              return flowNode?.data.color || '#64748B';\r\n            }}\r\n          />\r\n        )}\r\n\r\n        {/* Toolbar */}\r\n        <Panel position=\"top-left\" className=\"m-4\">\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"flex items-center gap-2 p-2 bg-slate-800/90 backdrop-blur-sm rounded-xl border border-slate-700 shadow-2xl\"\r\n          >\r\n            <button\r\n              onClick={() => handleAddNode('process')}\r\n              className=\"flex items-center gap-2 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-all\"\r\n            >\r\n              <Plus className=\"w-4 h-4\" />\r\n              Add Node\r\n            </button>\r\n\r\n            <div className=\"w-px h-6 bg-slate-600 mx-1\" />\r\n\r\n            <button\r\n              onClick={() => zoomOut()}\r\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\r\n              title=\"Zoom Out\"\r\n            >\r\n              <ZoomOut className=\"w-4 h-4\" />\r\n            </button>\r\n            <button\r\n              onClick={() => fitView({ padding: 0.2 })}\r\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\r\n              title=\"Fit View\"\r\n            >\r\n              <Maximize className=\"w-4 h-4\" />\r\n            </button>\r\n            <button\r\n              onClick={() => zoomIn()}\r\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\r\n              title=\"Zoom In\"\r\n            >\r\n              <ZoomIn className=\"w-4 h-4\" />\r\n            </button>\r\n\r\n            <div className=\"w-px h-6 bg-slate-600 mx-1\" />\r\n\r\n            <button\r\n              onClick={() => setShowGrid(!showGrid)}\r\n              className={cn(\r\n                \"p-2 rounded-lg transition-colors\",\r\n                showGrid \r\n                  ? \"text-blue-400 bg-blue-500/20\" \r\n                  : \"text-slate-400 hover:text-white hover:bg-white/10\"\r\n              )}\r\n              title=\"Toggle Grid\"\r\n            >\r\n              <Grid3X3 className=\"w-4 h-4\" />\r\n            </button>\r\n          </motion.div>\r\n        </Panel>\r\n\r\n        {/* Export/Import Panel */}\r\n        <Panel position=\"top-right\" className=\"m-4\">\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"flex flex-col gap-2\"\r\n          >\r\n            <div className=\"flex items-center gap-2 p-2 bg-slate-800/90 backdrop-blur-sm rounded-xl border border-slate-700 shadow-2xl\">\r\n              <label className=\"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm cursor-pointer transition-colors\">\r\n                <FileJson className=\"w-4 h-4\" />\r\n                Import\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\".json\"\r\n                  onChange={handleImportJSON}\r\n                  className=\"hidden\"\r\n                />\r\n              </label>\r\n\r\n              <div className=\"w-px h-6 bg-slate-600\" />\r\n\r\n              <button\r\n                onClick={handleExportJSON}\r\n                className=\"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-colors\"\r\n                title=\"Export as JSON\"\r\n              >\r\n                <FileJson className=\"w-4 h-4\" />\r\n                JSON\r\n              </button>\r\n              <button\r\n                onClick={handleExportImage}\r\n                className=\"flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-colors\"\r\n                title=\"Export as Image\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                PNG\r\n              </button>\r\n\r\n              <div className=\"w-px h-6 bg-slate-600\" />\r\n\r\n              <button\r\n                onClick={() => {\r\n                  if (confirm('Are you sure you want to clear all?')) {\r\n                    clearAll();\r\n                  }\r\n                }}\r\n                className=\"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors\"\r\n                title=\"Clear All\"\r\n              >\r\n                <Trash2 className=\"w-4 h-4\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Stats */}\r\n            <div className=\"flex justify-end\">\r\n              <div className=\"px-3 py-1.5 bg-slate-800/60 backdrop-blur-sm rounded-lg border border-slate-700/50\">\r\n                <span className=\"text-xs text-slate-400\">\r\n                  {nodes.length} node{nodes.length !== 1 ? 's' : ''}  {edges.length} connection{edges.length !== 1 ? 's' : ''}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </Panel>\r\n\r\n        {/* Keyboard Shortcuts Hint */}\r\n        <Panel position=\"bottom-center\" className=\"mb-4\">\r\n          <div className=\"px-4 py-2 bg-slate-800/80 backdrop-blur-sm rounded-full border border-slate-700/50 text-xs text-slate-400 flex items-center gap-4\">\r\n            <span className=\"flex items-center gap-1.5\">\r\n              <Keyboard className=\"w-3.5 h-3.5\" />\r\n              Shortcuts:\r\n            </span>\r\n            <span><kbd className=\"px-1.5 py-0.5 bg-slate-700 rounded text-slate-300\">Delete</kbd> Remove</span>\r\n            <span><kbd className=\"px-1.5 py-0.5 bg-slate-700 rounded text-slate-300\">Ctrl+D</kbd> Duplicate</span>\r\n            <span><kbd className=\"px-1.5 py-0.5 bg-slate-700 rounded text-slate-300\">Drag</kbd> Connect</span>\r\n          </div>\r\n        </Panel>\r\n      </ReactFlow>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function FlowchartCanvas() {\r\n  return (\r\n    <ReactFlowProvider>\r\n      <FlowchartCanvasContent />\r\n    </ReactFlowProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2597, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AsusTuf/Desktop/canvas/erd-designer/src/components/flowchart/ShapeLibrary.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { FLOWCHART_SHAPES, type FlowchartNodeType } from '@/types/flowchart';\r\nimport { cn } from '@/lib/utils';\r\nimport { \r\n  Play, \r\n  Square, \r\n  Diamond, \r\n  Database, \r\n  FileText, \r\n  Clock,\r\n  HardDrive,\r\n  Monitor,\r\n  Hexagon,\r\n  CircleDot,\r\n  ArrowRightToLine,\r\n  Keyboard,\r\n  ChevronRight,\r\n  ChevronDown,\r\n  Search,\r\n  X\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface ShapeLibraryProps {\r\n  onDragStart: (type: FlowchartNodeType) => void;\r\n}\r\n\r\nconst iconMap: Record<string, React.ReactNode> = {\r\n  'Circle': <div className=\"w-4 h-4 rounded-full bg-current\" />,\r\n  'Square': <Square className=\"w-4 h-4\" />,\r\n  'Diamond': <Diamond className=\"w-4 h-4\" />,\r\n  'Parallelogram': <div className=\"w-4 h-3 bg-current transform skew-x-12\" />,\r\n  'FileText': <FileText className=\"w-4 h-4\" />,\r\n  'Database': <Database className=\"w-4 h-4\" />,\r\n  'RectangleHorizontal': <div className=\"w-5 h-3 border-2 border-current\" />,\r\n  'Clock': <Clock className=\"w-4 h-4\" />,\r\n  'HardDrive': <HardDrive className=\"w-4 h-4\" />,\r\n  'Keyboard': <Keyboard className=\"w-4 h-4\" />,\r\n  'Monitor': <Monitor className=\"w-4 h-4\" />,\r\n  'Hexagon': <Hexagon className=\"w-4 h-4\" />,\r\n  'CircleDot': <CircleDot className=\"w-4 h-4\" />,\r\n  'ArrowRightToLine': <ArrowRightToLine className=\"w-4 h-4\" />,\r\n};\r\n\r\nconst categories = [\r\n  { id: 'basic', name: 'Basic', types: ['start', 'end', 'process', 'decision'] as FlowchartNodeType[] },\r\n  { id: 'io', name: 'Input/Output', types: ['input', 'output', 'document'] as FlowchartNodeType[] },\r\n  { id: 'data', name: 'Data', types: ['database', 'stored-data'] as FlowchartNodeType[] },\r\n  { id: 'advanced', name: 'Advanced', types: ['predefined', 'delay', 'manual-input', 'display', 'preparation'] as FlowchartNodeType[] },\r\n  { id: 'connector', name: 'Connectors', types: ['connector', 'off-page'] as FlowchartNodeType[] },\r\n];\r\n\r\nexport default function ShapeLibrary({ onDragStart }: ShapeLibraryProps) {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [expandedCategories, setExpandedCategories] = useState<string[]>(['basic']);\r\n\r\n  const toggleCategory = (categoryId: string) => {\r\n    setExpandedCategories(prev => \r\n      prev.includes(categoryId) \r\n        ? prev.filter(id => id !== categoryId)\r\n        : [...prev, categoryId]\r\n    );\r\n  };\r\n\r\n  const filteredShapes = searchQuery \r\n    ? FLOWCHART_SHAPES.filter(shape => \r\n        shape.label.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        shape.description.toLowerCase().includes(searchQuery.toLowerCase())\r\n      )\r\n    : null;\r\n\r\n  return (\r\n    <div className=\"w-64 bg-slate-900/95 backdrop-blur-sm border-r border-slate-800 flex flex-col h-full\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-slate-800\">\r\n        <h2 className=\"font-semibold text-slate-200\">Shapes</h2>\r\n      </div>\r\n\r\n      {/* Search */}\r\n      <div className=\"px-3 py-2 border-b border-slate-800\">\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500\" />\r\n          <input\r\n            type=\"text\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            placeholder=\"Search shapes...\"\r\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-9 pr-8 py-1.5 text-sm text-slate-200 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\r\n          />\r\n          {searchQuery && (\r\n            <button\r\n              onClick={() => setSearchQuery('')}\r\n              className=\"absolute right-2.5 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300\"\r\n            >\r\n              <X className=\"w-3.5 h-3.5\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Shape List */}\r\n      <div className=\"flex-1 overflow-y-auto py-2\">\r\n        {filteredShapes ? (\r\n          // Search results\r\n          <div className=\"px-2 space-y-1\">\r\n            {filteredShapes.map((shape) => (\r\n              <DraggableShapeItem \r\n                key={shape.type} \r\n                shape={shape} \r\n                onDragStart={() => onDragStart(shape.type)}\r\n              />\r\n            ))}\r\n            {filteredShapes.length === 0 && (\r\n              <div className=\"text-center py-8 text-slate-500 text-sm\">\r\n                No shapes found\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          // Categories\r\n          <div className=\"space-y-1\">\r\n            {categories.map((category) => (\r\n              <div key={category.id}>\r\n                <button\r\n                  onClick={() => toggleCategory(category.id)}\r\n                  className=\"w-full flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-400 hover:text-slate-200 hover:bg-white/5 transition-colors\"\r\n                >\r\n                  {expandedCategories.includes(category.id) ? (\r\n                    <ChevronDown className=\"w-4 h-4\" />\r\n                  ) : (\r\n                    <ChevronRight className=\"w-4 h-4\" />\r\n                  )}\r\n                  {category.name}\r\n                </button>\r\n                \r\n                <AnimatePresence>\r\n                  {expandedCategories.includes(category.id) && (\r\n                    <motion.div\r\n                      initial={{ height: 0, opacity: 0 }}\r\n                      animate={{ height: 'auto', opacity: 1 }}\r\n                      exit={{ height: 0, opacity: 0 }}\r\n                      className=\"overflow-hidden\"\r\n                    >\r\n                      <div className=\"px-2 pb-2 space-y-1\">\r\n                        {category.types.map((type) => {\r\n                          const shape = FLOWCHART_SHAPES.find(s => s.type === type);\r\n                          if (!shape) return null;\r\n                          return (\r\n                            <DraggableShapeItem \r\n                              key={shape.type} \r\n                              shape={shape} \r\n                              onDragStart={() => onDragStart(shape.type)}\r\n                            />\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </motion.div>\r\n                  )}\r\n                </AnimatePresence>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Tips */}\r\n      <div className=\"px-4 py-3 border-t border-slate-800\">\r\n        <p className=\"text-xs text-slate-500\">\r\n          Drag shapes to the canvas or click to add at center\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface DraggableShapeItemProps {\r\n  shape: typeof FLOWCHART_SHAPES[0];\r\n  onDragStart: () => void;\r\n}\r\n\r\nfunction DraggableShapeItem({ shape, onDragStart }: DraggableShapeItemProps) {\r\n  const [isDragging, setIsDragging] = useState(false);\r\n\r\n  return (\r\n    <div\r\n      draggable\r\n      onDragStart={(e) => {\r\n        setIsDragging(true);\r\n        onDragStart();\r\n        // Set drag data\r\n        e.dataTransfer.setData('application/flowchart-shape', shape.type);\r\n        e.dataTransfer.effectAllowed = 'copy';\r\n      }}\r\n      onDragEnd={() => setIsDragging(false)}\r\n      className={cn(\r\n        'group flex items-center gap-3 px-3 py-2 rounded-lg cursor-grab',\r\n        'hover:bg-white/5 transition-all duration-200',\r\n        isDragging && 'opacity-50 cursor-grabbing'\r\n      )}\r\n    >\r\n      {/* Icon */}\r\n      <div \r\n        className=\"w-8 h-8 rounded-lg flex items-center justify-center text-white shrink-0\"\r\n        style={{ backgroundColor: shape.defaultColor }}\r\n      >\r\n        {iconMap[shape.icon] || <Square className=\"w-4 h-4\" />}\r\n      </div>\r\n\r\n      {/* Info */}\r\n      <div className=\"flex-1 min-w-0\">\r\n        <p className=\"text-sm font-medium text-slate-300 group-hover:text-white truncate\">\r\n          {shape.label}\r\n        </p>\r\n        <p className=\"text-xs text-slate-500 truncate\">\r\n          {shape.description}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;AAAA;;;AAvBA;;;;;;AA6BA,MAAM,UAA2C;IAC/C,wBAAU,6LAAC;QAAI,WAAU;;;;;;IACzB,wBAAU,6LAAC,mNAAM;QAAC,WAAU;;;;;;IAC5B,yBAAW,6LAAC,sNAAO;QAAC,WAAU;;;;;;IAC9B,+BAAiB,6LAAC;QAAI,WAAU;;;;;;IAChC,0BAAY,6LAAC,6NAAQ;QAAC,WAAU;;;;;;IAChC,0BAAY,6LAAC,yNAAQ;QAAC,WAAU;;;;;;IAChC,qCAAuB,6LAAC;QAAI,WAAU;;;;;;IACtC,uBAAS,6LAAC,gNAAK;QAAC,WAAU;;;;;;IAC1B,2BAAa,6LAAC,gOAAS;QAAC,WAAU;;;;;;IAClC,0BAAY,6LAAC,yNAAQ;QAAC,WAAU;;;;;;IAChC,yBAAW,6LAAC,sNAAO;QAAC,WAAU;;;;;;IAC9B,yBAAW,6LAAC,sNAAO;QAAC,WAAU;;;;;;IAC9B,2BAAa,6LAAC,gOAAS;QAAC,WAAU;;;;;;IAClC,kCAAoB,6LAAC,6PAAgB;QAAC,WAAU;;;;;;AAClD;AAEA,MAAM,aAAa;IACjB;QAAE,IAAI;QAAS,MAAM;QAAS,OAAO;YAAC;YAAS;YAAO;YAAW;SAAW;IAAwB;IACpG;QAAE,IAAI;QAAM,MAAM;QAAgB,OAAO;YAAC;YAAS;YAAU;SAAW;IAAwB;IAChG;QAAE,IAAI;QAAQ,MAAM;QAAQ,OAAO;YAAC;YAAY;SAAc;IAAwB;IACtF;QAAE,IAAI;QAAY,MAAM;QAAY,OAAO;YAAC;YAAc;YAAS;YAAgB;YAAW;SAAc;IAAwB;IACpI;QAAE,IAAI;QAAa,MAAM;QAAc,OAAO;YAAC;YAAa;SAAW;IAAwB;CAChG;AAEc,SAAS,aAAa,EAAE,WAAW,EAAqB;;IACrE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAAW;QAAC;KAAQ;IAEhF,MAAM,iBAAiB,CAAC;QACtB,sBAAsB,CAAA,OACpB,KAAK,QAAQ,CAAC,cACV,KAAK,MAAM,CAAC,CAAA,KAAM,OAAO,cACzB;mBAAI;gBAAM;aAAW;IAE7B;IAEA,MAAM,iBAAiB,cACnB,gJAAgB,CAAC,MAAM,CAAC,CAAA,QACtB,MAAM,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,OAC1D,MAAM,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,OAElE;IAEJ,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAG,WAAU;8BAA+B;;;;;;;;;;;0BAI/C,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,mNAAM;4BAAC,WAAU;;;;;;sCAClB,6LAAC;4BACC,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;4BAC9C,aAAY;4BACZ,WAAU;;;;;;wBAEX,6BACC,6LAAC;4BACC,SAAS,IAAM,eAAe;4BAC9B,WAAU;sCAEV,cAAA,6LAAC,oMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;0BAOrB,6LAAC;gBAAI,WAAU;0BACZ,iBACC,iBAAiB;8BACjB,6LAAC;oBAAI,WAAU;;wBACZ,eAAe,GAAG,CAAC,CAAC,sBACnB,6LAAC;gCAEC,OAAO;gCACP,aAAa,IAAM,YAAY,MAAM,IAAI;+BAFpC,MAAM,IAAI;;;;;wBAKlB,eAAe,MAAM,KAAK,mBACzB,6LAAC;4BAAI,WAAU;sCAA0C;;;;;;;;;;;2BAM7D,aAAa;8BACb,6LAAC;oBAAI,WAAU;8BACZ,WAAW,GAAG,CAAC,CAAC,yBACf,6LAAC;;8CACC,6LAAC;oCACC,SAAS,IAAM,eAAe,SAAS,EAAE;oCACzC,WAAU;;wCAET,mBAAmB,QAAQ,CAAC,SAAS,EAAE,kBACtC,6LAAC,sOAAW;4CAAC,WAAU;;;;;iEAEvB,6LAAC,yOAAY;4CAAC,WAAU;;;;;;wCAEzB,SAAS,IAAI;;;;;;;8CAGhB,6LAAC,+MAAe;8CACb,mBAAmB,QAAQ,CAAC,SAAS,EAAE,mBACtC,6LAAC,uMAAM,CAAC,GAAG;wCACT,SAAS;4CAAE,QAAQ;4CAAG,SAAS;wCAAE;wCACjC,SAAS;4CAAE,QAAQ;4CAAQ,SAAS;wCAAE;wCACtC,MAAM;4CAAE,QAAQ;4CAAG,SAAS;wCAAE;wCAC9B,WAAU;kDAEV,cAAA,6LAAC;4CAAI,WAAU;sDACZ,SAAS,KAAK,CAAC,GAAG,CAAC,CAAC;gDACnB,MAAM,QAAQ,gJAAgB,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK;gDACpD,IAAI,CAAC,OAAO,OAAO;gDACnB,qBACE,6LAAC;oDAEC,OAAO;oDACP,aAAa,IAAM,YAAY,MAAM,IAAI;mDAFpC,MAAM,IAAI;;;;;4CAKrB;;;;;;;;;;;;;;;;;2BAhCA,SAAS,EAAE;;;;;;;;;;;;;;;0BA4C7B,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAE,WAAU;8BAAyB;;;;;;;;;;;;;;;;;AAM9C;GAzHwB;KAAA;AAgIxB,SAAS,mBAAmB,EAAE,KAAK,EAAE,WAAW,EAA2B;;IACzE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,qBACE,6LAAC;QACC,SAAS;QACT,aAAa,CAAC;YACZ,cAAc;YACd;YACA,gBAAgB;YAChB,EAAE,YAAY,CAAC,OAAO,CAAC,+BAA+B,MAAM,IAAI;YAChE,EAAE,YAAY,CAAC,aAAa,GAAG;QACjC;QACA,WAAW,IAAM,cAAc;QAC/B,WAAW,IAAA,4HAAE,EACX,kEACA,gDACA,cAAc;;0BAIhB,6LAAC;gBACC,WAAU;gBACV,OAAO;oBAAE,iBAAiB,MAAM,YAAY;gBAAC;0BAE5C,OAAO,CAAC,MAAM,IAAI,CAAC,kBAAI,6LAAC,mNAAM;oBAAC,WAAU;;;;;;;;;;;0BAI5C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCACV,MAAM,KAAK;;;;;;kCAEd,6LAAC;wBAAE,WAAU;kCACV,MAAM,WAAW;;;;;;;;;;;;;;;;;;AAK5B;IAvCS;MAAA"}},
    {"offset": {"line": 3074, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AsusTuf/Desktop/canvas/erd-designer/src/components/flowchart/PropertiesPanel.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useFlowchartStore } from '@/store/flowchartStore';\r\nimport { cn } from '@/lib/utils';\r\nimport { \r\n  X, \r\n  Settings2, \r\n  Trash2,\r\n  Type,\r\n  Palette,\r\n  Layout,\r\n  ArrowUp,\r\n  ArrowDown,\r\n  RotateCw,\r\n  Copy,\r\n  Maximize2,\r\n  Move,\r\n  Link2\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { FLOWCHART_COLORS, type FlowchartEdgeType } from '@/types/flowchart';\r\n\r\nexport default function FlowchartPropertiesPanel() {\r\n  const [activeTab, setActiveTab] = useState<'node' | 'edge' | 'style'>('node');\r\n  \r\n  const {\r\n    nodes,\r\n    edges,\r\n    selectedNodeId,\r\n    selectedEdgeId,\r\n    updateNode,\r\n    updateNodeData,\r\n    updateEdge,\r\n    updateEdgeData,\r\n    deleteNode,\r\n    deleteEdge,\r\n    duplicateNode,\r\n    bringToFront,\r\n    sendToBack,\r\n    clearSelection,\r\n  } = useFlowchartStore();\r\n\r\n  const selectedNode = nodes.find((n) => n.id === selectedNodeId);\r\n  const selectedEdge = edges.find((e) => e.id === selectedEdgeId);\r\n\r\n  // Update active tab based on selection\r\n  if (selectedEdge && activeTab !== 'edge') {\r\n    setActiveTab('edge');\r\n  } else if (selectedNode && activeTab !== 'node' && activeTab !== 'style') {\r\n    setActiveTab('node');\r\n  }\r\n\r\n  const hasSelection = selectedNode || selectedEdge;\r\n\r\n  if (!hasSelection) {\r\n    return (\r\n      <motion.div\r\n        initial={{ opacity: 0, x: 20 }}\r\n        animate={{ opacity: 1, x: 0 }}\r\n        className=\"w-80 bg-slate-900/95 backdrop-blur-sm border-l border-slate-800 flex flex-col\"\r\n      >\r\n        <div className=\"flex items-center justify-between px-4 py-3 border-b border-slate-800\">\r\n          <h2 className=\"font-semibold text-slate-200\">Properties</h2>\r\n        </div>\r\n        <div className=\"flex-1 flex flex-col items-center justify-center p-8 text-center\">\r\n          <div className=\"w-16 h-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4\">\r\n            <Settings2 className=\"w-8 h-8 text-slate-500\" />\r\n          </div>\r\n          <p className=\"text-slate-400 text-sm\">\r\n            Select a node or connection to edit its properties\r\n          </p>\r\n          <div className=\"mt-6 space-y-2 text-xs text-slate-500\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-4 h-4 rounded bg-slate-700\" />\r\n              <span>Drag shapes from the left panel</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-4 h-4 rounded-full border-2 border-slate-500\" />\r\n              <span>Connect nodes by dragging handles</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, x: 20 }}\r\n      animate={{ opacity: 1, x: 0 }}\r\n      className=\"w-80 bg-slate-900/95 backdrop-blur-sm border-l border-slate-800 flex flex-col h-full\"\r\n    >\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-slate-800\">\r\n        <div className=\"flex items-center gap-2\">\r\n          {selectedEdge ? (\r\n            <>\r\n              <Link2 className=\"w-4 h-4 text-blue-400\" />\r\n              <h2 className=\"font-semibold text-slate-200\">Connection</h2>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <div \r\n                className=\"w-4 h-4 rounded\"\r\n                style={{ backgroundColor: selectedNode?.data.color || '#3B82F6' }}\r\n              />\r\n              <h2 className=\"font-semibold text-slate-200\">Node</h2>\r\n            </>\r\n          )}\r\n        </div>\r\n        <button\r\n          onClick={clearSelection}\r\n          className=\"p-1.5 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors\"\r\n        >\r\n          <X className=\"w-4 h-4\" />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      {selectedNode && (\r\n        <div className=\"flex border-b border-slate-800\">\r\n          <button\r\n            onClick={() => setActiveTab('node')}\r\n            className={cn(\r\n              'flex-1 px-4 py-2 text-xs font-medium transition-colors',\r\n              activeTab === 'node' \r\n                ? 'text-blue-400 border-b-2 border-blue-400' \r\n                : 'text-slate-400 hover:text-slate-200'\r\n            )}\r\n          >\r\n            Content\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('style')}\r\n            className={cn(\r\n              'flex-1 px-4 py-2 text-xs font-medium transition-colors',\r\n              activeTab === 'style' \r\n                ? 'text-blue-400 border-b-2 border-blue-400' \r\n                : 'text-slate-400 hover:text-slate-200'\r\n            )}\r\n          >\r\n            Style\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n        <AnimatePresence mode=\"wait\">\r\n          {/* Node Properties - Content Tab */}\r\n          {selectedNode && activeTab === 'node' && (\r\n            <motion.div\r\n              key=\"node-content\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              className=\"space-y-4\"\r\n            >\r\n              {/* Label */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5\">\r\n                  <Type className=\"w-3.5 h-3.5\" />\r\n                  Label\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={selectedNode.data.label}\r\n                  onChange={(e) => updateNodeData(selectedNode.id, { label: e.target.value })}\r\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\r\n                  placeholder=\"Enter label...\"\r\n                />\r\n              </div>\r\n\r\n              {/* Description */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">\r\n                  Description\r\n                </label>\r\n                <textarea\r\n                  value={selectedNode.data.description || ''}\r\n                  onChange={(e) => updateNodeData(selectedNode.id, { description: e.target.value })}\r\n                  rows={3}\r\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 resize-none\"\r\n                  placeholder=\"Add description...\"\r\n                />\r\n              </div>\r\n\r\n              {/* Node Type Info */}\r\n              <div className=\"p-3 bg-slate-800/50 rounded-lg border border-slate-700/50\">\r\n                <span className=\"text-[10px] text-slate-500 uppercase tracking-wider\">Type</span>\r\n                <p className=\"text-sm text-slate-300 mt-1 capitalize\">\r\n                  {selectedNode.type.replace('-', ' ')}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Dimensions */}\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                <div>\r\n                  <label className=\"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5\">\r\n                    <Maximize2 className=\"w-3.5 h-3.5\" />\r\n                    Width\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={selectedNode.size.width}\r\n                    onChange={(e) => updateNode(selectedNode.id, { \r\n                      size: { ...selectedNode.size, width: parseInt(e.target.value) || 100 }\r\n                    })}\r\n                    className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5\">\r\n                    <Maximize2 className=\"w-3.5 h-3.5\" />\r\n                    Height\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={selectedNode.size.height}\r\n                    onChange={(e) => updateNode(selectedNode.id, { \r\n                      size: { ...selectedNode.size, height: parseInt(e.target.value) || 60 }\r\n                    })}\r\n                    className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Position */}\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                <div>\r\n                  <label className=\"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5\">\r\n                    <Move className=\"w-3.5 h-3.5\" />\r\n                    X Position\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={Math.round(selectedNode.position.x)}\r\n                    readOnly\r\n                    className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-500\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5\">\r\n                    <Move className=\"w-3.5 h-3.5\" />\r\n                    Y Position\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={Math.round(selectedNode.position.y)}\r\n                    readOnly\r\n                    className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Layer Controls */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\r\n                  Layer Order\r\n                </label>\r\n                <div className=\"flex gap-2\">\r\n                  <button\r\n                    onClick={() => bringToFront(selectedNode.id)}\r\n                    className=\"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs text-slate-300 transition-colors\"\r\n                  >\r\n                    <ArrowUp className=\"w-3.5 h-3.5\" />\r\n                    To Front\r\n                  </button>\r\n                  <button\r\n                    onClick={() => sendToBack(selectedNode.id)}\r\n                    className=\"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs text-slate-300 transition-colors\"\r\n                  >\r\n                    <ArrowDown className=\"w-3.5 h-3.5\" />\r\n                    To Back\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"pt-4 border-t border-slate-800 space-y-2\">\r\n                <button\r\n                  onClick={() => duplicateNode(selectedNode.id)}\r\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg text-sm transition-colors\"\r\n                >\r\n                  <Copy className=\"w-4 h-4\" />\r\n                  Duplicate Node\r\n                </button>\r\n                <button\r\n                  onClick={() => deleteNode(selectedNode.id)}\r\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg text-sm transition-colors\"\r\n                >\r\n                  <Trash2 className=\"w-4 h-4\" />\r\n                  Delete Node\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n\r\n          {/* Node Properties - Style Tab */}\r\n          {selectedNode && activeTab === 'style' && (\r\n            <motion.div\r\n              key=\"node-style\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              className=\"space-y-4\"\r\n            >\r\n              {/* Fill Color */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-2 flex items-center gap-1.5\">\r\n                  <Palette className=\"w-3.5 h-3.5\" />\r\n                  Fill Color\r\n                </label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {FLOWCHART_COLORS.map((color) => (\r\n                    <button\r\n                      key={color}\r\n                      onClick={() => updateNodeData(selectedNode.id, { color })}\r\n                      className={cn(\r\n                        'w-8 h-8 rounded-lg transition-all hover:scale-110',\r\n                        selectedNode.data.color === color \r\n                          ? 'ring-2 ring-white shadow-lg' \r\n                          : 'hover:ring-2 hover:ring-white/50'\r\n                      )}\r\n                      style={{ backgroundColor: color }}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Border Color */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\r\n                  Border Color\r\n                </label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {FLOWCHART_COLORS.map((color) => (\r\n                    <button\r\n                      key={color}\r\n                      onClick={() => updateNodeData(selectedNode.id, { borderColor: color })}\r\n                      className={cn(\r\n                        'w-6 h-6 rounded-full transition-all hover:scale-110',\r\n                        selectedNode.data.borderColor === color \r\n                          ? 'ring-2 ring-white' \r\n                          : 'hover:ring-2 hover:ring-white/50'\r\n                      )}\r\n                      style={{ backgroundColor: color }}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Text Color */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\r\n                  Text Color\r\n                </label>\r\n                <div className=\"flex gap-2\">\r\n                  <button\r\n                    onClick={() => updateNodeData(selectedNode.id, { textColor: '#FFFFFF' })}\r\n                    className={cn(\r\n                      'w-8 h-8 rounded-lg bg-white border-2',\r\n                      selectedNode.data.textColor === '#FFFFFF' ? 'border-blue-500' : 'border-slate-600'\r\n                    )}\r\n                  />\r\n                  <button\r\n                    onClick={() => updateNodeData(selectedNode.id, { textColor: '#0F172A' })}\r\n                    className={cn(\r\n                      'w-8 h-8 rounded-lg bg-slate-900 border-2',\r\n                      selectedNode.data.textColor === '#0F172A' ? 'border-blue-500' : 'border-slate-600'\r\n                    )}\r\n                  />\r\n                  <button\r\n                    onClick={() => updateNodeData(selectedNode.id, { textColor: '#94A3B8' })}\r\n                    className={cn(\r\n                      'w-8 h-8 rounded-lg bg-slate-400 border-2',\r\n                      selectedNode.data.textColor === '#94A3B8' ? 'border-blue-500' : 'border-slate-600'\r\n                    )}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Font Size */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">\r\n                  Font Size: {selectedNode.data.fontSize || 14}px\r\n                </label>\r\n                <input\r\n                  type=\"range\"\r\n                  min={10}\r\n                  max={24}\r\n                  value={selectedNode.data.fontSize || 14}\r\n                  onChange={(e) => updateNodeData(selectedNode.id, { fontSize: parseInt(e.target.value) })}\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n\r\n              {/* Border Width */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">\r\n                  Border Width: {selectedNode.data.borderWidth || 2}px\r\n                </label>\r\n                <input\r\n                  type=\"range\"\r\n                  min={0}\r\n                  max={5}\r\n                  value={selectedNode.data.borderWidth || 2}\r\n                  onChange={(e) => updateNodeData(selectedNode.id, { borderWidth: parseInt(e.target.value) })}\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n\r\n              {/* Border Style */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\r\n                  Border Style\r\n                </label>\r\n                <div className=\"grid grid-cols-3 gap-2\">\r\n                  {(['solid', 'dashed', 'dotted'] as const).map((style) => (\r\n                    <button\r\n                      key={style}\r\n                      onClick={() => updateNodeData(selectedNode.id, { borderStyle: style })}\r\n                      className={cn(\r\n                        'px-3 py-2 rounded-lg text-xs font-medium transition-all capitalize',\r\n                        selectedNode.data.borderStyle === style\r\n                          ? 'bg-blue-500 text-white'\r\n                          : 'bg-slate-800 text-slate-400 hover:bg-slate-700'\r\n                      )}\r\n                    >\r\n                      {style}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Opacity */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">\r\n                  Opacity: {Math.round((selectedNode.data.opacity || 1) * 100)}%\r\n                </label>\r\n                <input\r\n                  type=\"range\"\r\n                  min={0.2}\r\n                  max={1}\r\n                  step={0.1}\r\n                  value={selectedNode.data.opacity || 1}\r\n                  onChange={(e) => updateNodeData(selectedNode.id, { opacity: parseFloat(e.target.value) })}\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n\r\n              {/* Rotation */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 flex items-center gap-1.5\">\r\n                  <RotateCw className=\"w-3.5 h-3.5\" />\r\n                  Rotation: {selectedNode.rotation || 0}\r\n                </label>\r\n                <input\r\n                  type=\"range\"\r\n                  min={0}\r\n                  max={360}\r\n                  value={selectedNode.rotation || 0}\r\n                  onChange={(e) => updateNode(selectedNode.id, { rotation: parseInt(e.target.value) })}\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n\r\n          {/* Edge Properties */}\r\n          {selectedEdge && (\r\n            <motion.div\r\n              key=\"edge\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              className=\"space-y-4\"\r\n            >\r\n              {/* Edge Type */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\r\n                  Connection Type\r\n                </label>\r\n                <div className=\"grid grid-cols-3 gap-2\">\r\n                  {(['smooth', 'straight', 'step'] as FlowchartEdgeType[]).map((type) => (\r\n                    <button\r\n                      key={type}\r\n                      onClick={() => updateEdge(selectedEdge.id, { type })}\r\n                      className={cn(\r\n                        'px-3 py-2 rounded-lg text-xs font-medium transition-all capitalize',\r\n                        selectedEdge.type === type\r\n                          ? 'bg-blue-500 text-white'\r\n                          : 'bg-slate-800 text-slate-400 hover:bg-slate-700'\r\n                      )}\r\n                    >\r\n                      {type}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Line Color */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\r\n                  Line Color\r\n                </label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {FLOWCHART_COLORS.slice(0, 8).map((color) => (\r\n                    <button\r\n                      key={color}\r\n                      onClick={() => updateEdgeData(selectedEdge.id, { color })}\r\n                      className={cn(\r\n                        'w-6 h-6 rounded-full transition-all hover:scale-110',\r\n                        selectedEdge.data?.color === color \r\n                          ? 'ring-2 ring-white' \r\n                          : 'hover:ring-2 hover:ring-white/50'\r\n                      )}\r\n                      style={{ backgroundColor: color }}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Line Width */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-1.5 block\">\r\n                  Line Width: {selectedEdge.data?.strokeWidth || 2}px\r\n                </label>\r\n                <input\r\n                  type=\"range\"\r\n                  min={1}\r\n                  max={5}\r\n                  value={selectedEdge.data?.strokeWidth || 2}\r\n                  onChange={(e) => updateEdgeData(selectedEdge.id, { strokeWidth: parseInt(e.target.value) })}\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n\r\n              {/* Line Style */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\r\n                  Line Style\r\n                </label>\r\n                <div className=\"grid grid-cols-3 gap-2\">\r\n                  {(['solid', 'dashed', 'dotted'] as const).map((style) => (\r\n                    <button\r\n                      key={style}\r\n                      onClick={() => updateEdgeData(selectedEdge.id, { strokeStyle: style })}\r\n                      className={cn(\r\n                        'px-3 py-2 rounded-lg text-xs font-medium transition-all capitalize',\r\n                        selectedEdge.data?.strokeStyle === style\r\n                          ? 'bg-blue-500 text-white'\r\n                          : 'bg-slate-800 text-slate-400 hover:bg-slate-700'\r\n                      )}\r\n                    >\r\n                      {style}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Arrow Controls */}\r\n              <div>\r\n                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\r\n                  Arrows\r\n                </label>\r\n                <div className=\"flex gap-2\">\r\n                  <button\r\n                    onClick={() => updateEdgeData(selectedEdge.id, { startArrow: !selectedEdge.data?.startArrow })}\r\n                    className={cn(\r\n                      'flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all',\r\n                      selectedEdge.data?.startArrow\r\n                        ? 'bg-blue-500 text-white'\r\n                        : 'bg-slate-800 text-slate-400 hover:bg-slate-700'\r\n                    )}\r\n                  >\r\n                     Start\r\n                  </button>\r\n                  <button\r\n                    onClick={() => updateEdgeData(selectedEdge.id, { endArrow: !selectedEdge.data?.endArrow })}\r\n                    className={cn(\r\n                      'flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all',\r\n                      selectedEdge.data?.endArrow !== false\r\n                        ? 'bg-blue-500 text-white'\r\n                        : 'bg-slate-800 text-slate-400 hover:bg-slate-700'\r\n                    )}\r\n                  >\r\n                    End \r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Delete Button */}\r\n              <div className=\"pt-4 border-t border-slate-800\">\r\n                <button\r\n                  onClick={() => deleteEdge(selectedEdge.id)}\r\n                  className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg text-sm transition-colors\"\r\n                >\r\n                  <Trash2 className=\"w-4 h-4\" />\r\n                  Delete Connection\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4351, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AsusTuf/Desktop/canvas/erd-designer/src/components/flowchart/index.ts"],"sourcesContent":["export { default as FlowchartCanvas } from './FlowchartCanvas';\r\nexport { default as FlowchartNode } from './FlowchartNode';\r\nexport { default as FlowchartEdge } from './FlowchartEdge';\r\nexport { default as ShapeLibrary } from './ShapeLibrary';\r\nexport { default as PropertiesPanel } from './PropertiesPanel';\r\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 4396, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AsusTuf/Desktop/canvas/erd-designer/src/components/layout/AppHeader.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { cn } from '@/lib/utils';\r\nimport { \r\n  Database, \r\n  Workflow,\r\n  Github, \r\n  HelpCircle, \r\n  Sparkles,\r\n  ChevronDown,\r\n  Download,\r\n  Upload,\r\n  FileCode,\r\n  Keyboard,\r\n  Settings,\r\n  Plus,\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface AppHeaderProps {\r\n  onExportJSON?: () => void;\r\n  onExportSQL?: () => void;\r\n  onExportPNG?: () => void;\r\n  onImport?: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  stats?: { label: string; value: number }[];\r\n  title?: string;\r\n  subtitle?: string;\r\n  helpContent?: React.ReactNode;\r\n}\r\n\r\nexport default function AppHeader({\r\n  onExportJSON,\r\n  onExportSQL,\r\n  onExportPNG,\r\n  onImport,\r\n  stats = [],\r\n  title = 'Designer',\r\n  subtitle = 'Visual Design Tool',\r\n  helpContent,\r\n}: AppHeaderProps) {\r\n  const [showHelp, setShowHelp] = useState(false);\r\n  const pathname = usePathname();\r\n\r\n  const isERD = pathname === '/';\r\n  const isFlowchart = pathname === '/flowchart';\r\n\r\n  return (\r\n    <header className=\"h-14 bg-slate-900/95 backdrop-blur-sm border-b border-slate-800 flex items-center justify-between px-4 shrink-0 z-50\">\r\n      {/* Logo & Navigation */}\r\n      <div className=\"flex items-center gap-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg shadow-blue-500/20\">\r\n            {isERD ? (\r\n              <Database className=\"w-4 h-4 text-white\" />\r\n            ) : (\r\n              <Workflow className=\"w-4 h-4 text-white\" />\r\n            )}\r\n          </div>\r\n          <div>\r\n            <h1 className=\"font-bold text-slate-100 text-sm\">{title}</h1>\r\n            <p className=\"text-[10px] text-slate-500\">{subtitle}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Navigation Tabs */}\r\n        <div className=\"hidden sm:flex items-center gap-1 p-1 bg-slate-800/50 rounded-lg border border-slate-700/50 ml-4\">\r\n          <Link\r\n            href=\"/\"\r\n            className={cn(\r\n              \"flex items-center gap-2 px-3 py-1.5 rounded-md text-xs font-medium transition-all\",\r\n              isERD\r\n                ? \"bg-blue-500 text-white\"\r\n                : \"text-slate-400 hover:text-slate-200 hover:bg-white/5\"\r\n            )}\r\n          >\r\n            <Database className=\"w-3.5 h-3.5\" />\r\n            ERD\r\n          </Link>\r\n          <Link\r\n            href=\"/flowchart\"\r\n            className={cn(\r\n              \"flex items-center gap-2 px-3 py-1.5 rounded-md text-xs font-medium transition-all\",\r\n              isFlowchart\r\n                ? \"bg-blue-500 text-white\"\r\n                : \"text-slate-400 hover:text-slate-200 hover:bg-white/5\"\r\n            )}\r\n          >\r\n            <Workflow className=\"w-3.5 h-3.5\" />\r\n            Flowchart\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Center - Stats */}\r\n      {stats.length > 0 && (\r\n        <div className=\"hidden md:flex items-center gap-3\">\r\n          {stats.map((stat, index) => (\r\n            <div \r\n              key={index}\r\n              className=\"flex items-center gap-2 px-3 py-1.5 bg-slate-800/50 rounded-lg border border-slate-700/50\"\r\n            >\r\n              <span className=\"text-xs text-slate-400\">{stat.label}:</span>\r\n              <span className=\"text-xs font-semibold text-slate-200\">{stat.value}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Right - Actions */}\r\n      <div className=\"flex items-center gap-2\">\r\n        {/* Export Dropdown */}\r\n        {(onExportJSON || onExportPNG) && (\r\n          <div className=\"relative group\">\r\n            <button className=\"flex items-center gap-2 px-3 py-1.5 text-slate-300 hover:text-white hover:bg-white/5 rounded-lg text-sm transition-colors\">\r\n              <Download className=\"w-4 h-4\" />\r\n              <span className=\"hidden sm:inline\">Export</span>\r\n              <ChevronDown className=\"w-3 h-3\" />\r\n            </button>\r\n            \r\n            <div className=\"absolute right-0 top-full mt-1 w-40 bg-slate-800 rounded-xl border border-slate-700 shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50\">\r\n              {onExportJSON && (\r\n                <button\r\n                  onClick={onExportJSON}\r\n                  className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors first:rounded-t-xl\"\r\n                >\r\n                  <Download className=\"w-4 h-4\" />\r\n                  Export JSON\r\n                </button>\r\n              )}\r\n              {onExportSQL && (\r\n                <button\r\n                  onClick={onExportSQL}\r\n                  className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors\"\r\n                >\r\n                  <FileCode className=\"w-4 h-4\" />\r\n                  Export SQL\r\n                </button>\r\n              )}\r\n              {onExportPNG && (\r\n                <button\r\n                  onClick={onExportPNG}\r\n                  className=\"w-full px-4 py-2.5 flex items-center gap-2 text-sm text-slate-300 hover:text-white hover:bg-white/5 transition-colors last:rounded-b-xl\"\r\n                >\r\n                  <Download className=\"w-4 h-4\" />\r\n                  Export PNG\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Import */}\r\n        {onImport && (\r\n          <label className=\"flex items-center gap-2 px-3 py-1.5 text-slate-300 hover:text-white hover:bg-white/5 rounded-lg text-sm cursor-pointer transition-colors\">\r\n            <Upload className=\"w-4 h-4\" />\r\n            <span className=\"hidden sm:inline\">Import</span>\r\n            <input\r\n              type=\"file\"\r\n              accept=\".json\"\r\n              onChange={onImport}\r\n              className=\"hidden\"\r\n            />\r\n          </label>\r\n        )}\r\n\r\n        <div className=\"w-px h-6 bg-slate-700 mx-1\" />\r\n\r\n        {/* Help */}\r\n        <button\r\n          onClick={() => setShowHelp(!showHelp)}\r\n          className={cn(\r\n            \"p-2 rounded-lg transition-colors\",\r\n            showHelp ? \"text-blue-400 bg-blue-500/10\" : \"text-slate-400 hover:text-white hover:bg-white/5\"\r\n          )}\r\n        >\r\n          <HelpCircle className=\"w-4 h-4\" />\r\n        </button>\r\n\r\n        {/* GitHub */}\r\n        <a\r\n          href=\"https://github.com\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\r\n        >\r\n          <Github className=\"w-4 h-4\" />\r\n        </a>\r\n      </div>\r\n\r\n      {/* Help Modal */}\r\n      <AnimatePresence>\r\n        {showHelp && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\r\n            onClick={() => setShowHelp(false)}\r\n          >\r\n            <motion.div\r\n              initial={{ scale: 0.95, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.95, opacity: 0 }}\r\n              className=\"bg-slate-900 rounded-2xl border border-slate-700 shadow-2xl max-w-lg w-full overflow-hidden\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <div className=\"p-6\">\r\n                <div className=\"flex items-center gap-3 mb-6\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center\">\r\n                    <Sparkles className=\"w-5 h-5 text-blue-400\" />\r\n                  </div>\r\n                  <div>\r\n                    <h2 className=\"text-lg font-semibold text-white\">Quick Guide</h2>\r\n                    <p className=\"text-sm text-slate-400\">Learn how to use {title}</p>\r\n                  </div>\r\n                </div>\r\n\r\n                {helpContent || (\r\n                  <div className=\"space-y-4\">\r\n                    <div className=\"flex gap-4\">\r\n                      <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\r\n                        <Plus className=\"w-5 h-5 text-blue-400\" />\r\n                      </div>\r\n                      <div>\r\n                        <h3 className=\"font-medium text-slate-200\">Create Elements</h3>\r\n                        <p className=\"text-sm text-slate-400\">Add new elements to your diagram using the toolbar or sidebar.</p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-4\">\r\n                      <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\r\n                        <Settings className=\"w-5 h-5 text-green-400\" />\r\n                      </div>\r\n                      <div>\r\n                        <h3 className=\"font-medium text-slate-200\">Edit Properties</h3>\r\n                        <p className=\"text-sm text-slate-400\">Click on any element to edit its properties in the sidebar.</p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-4\">\r\n                      <div className=\"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center shrink-0\">\r\n                        <Download className=\"w-5 h-5 text-amber-400\" />\r\n                      </div>\r\n                      <div>\r\n                        <h3 className=\"font-medium text-slate-200\">Export</h3>\r\n                        <p className=\"text-sm text-slate-400\">Save your work as JSON or export as an image.</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"mt-6 pt-4 border-t border-slate-800\">\r\n                  <h4 className=\"text-xs font-medium text-slate-500 uppercase tracking-wider mb-3\">Keyboard Shortcuts</h4>\r\n                  <div className=\"grid grid-cols-2 gap-2 text-sm\">\r\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\r\n                      <span className=\"text-slate-400\">Delete</span>\r\n                      <span className=\"text-slate-200\">Remove selected</span>\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\r\n                      <span className=\"text-slate-400\">Space + Drag</span>\r\n                      <span className=\"text-slate-200\">Pan canvas</span>\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\r\n                      <span className=\"text-slate-400\">Scroll</span>\r\n                      <span className=\"text-slate-200\">Zoom in/out</span>\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg\">\r\n                      <span className=\"text-slate-400\">Click</span>\r\n                      <span className=\"text-slate-200\">Select element</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"px-6 py-4 bg-slate-800/50 border-t border-slate-800\">\r\n                <button\r\n                  onClick={() => setShowHelp(false)}\r\n                  className=\"w-full py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors\"\r\n                >\r\n                  Got it!\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5181, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AsusTuf/Desktop/canvas/erd-designer/src/app/flowchart/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { FlowchartCanvas, ShapeLibrary, PropertiesPanel } from '@/components/flowchart';\r\nimport AppHeader from '@/components/layout/AppHeader';\r\nimport { useFlowchartStore } from '@/store/flowchartStore';\r\nimport { type FlowchartNodeType } from '@/types/flowchart';\r\nimport { useCallback } from 'react';\r\n\r\nexport default function FlowchartPage() {\r\n  const { \r\n    nodes, \r\n    edges, \r\n    exportToJSON, \r\n    importFromJSON \r\n  } = useFlowchartStore();\r\n\r\n  const handleExportJSON = useCallback(() => {\r\n    const json = exportToJSON();\r\n    const blob = new Blob([json], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.download = 'flowchart.json';\r\n    link.href = url;\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n  }, [exportToJSON]);\r\n\r\n  const handleImport = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        try {\r\n          const json = event.target?.result as string;\r\n          importFromJSON(json);\r\n        } catch (error) {\r\n          alert('Invalid JSON file');\r\n        }\r\n      };\r\n      reader.readAsText(file);\r\n    }\r\n    e.target.value = '';\r\n  }, [importFromJSON]);\r\n\r\n  const handleDragStart = (type: FlowchartNodeType) => {\r\n    if (typeof window !== 'undefined') {\r\n      (window as any).draggedShapeType = type;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen bg-slate-950 overflow-hidden\">\r\n      <AppHeader\r\n        title=\"Flowchart Designer\"\r\n        subtitle=\"Visual Process Design\"\r\n        onExportJSON={handleExportJSON}\r\n        onImport={handleImport}\r\n        stats={[\r\n          { label: 'Nodes', value: nodes.length },\r\n          { label: 'Connections', value: edges.length },\r\n        ]}\r\n      />\r\n      <div className=\"flex flex-1 overflow-hidden\">\r\n        {/* Shape Library Sidebar */}\r\n        <ShapeLibrary onDragStart={handleDragStart} />\r\n\r\n        {/* Main Canvas Area */}\r\n        <div className=\"flex-1 relative\">\r\n          <FlowchartCanvas />\r\n        </div>\r\n\r\n        {/* Properties Panel */}\r\n        <PropertiesPanel />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;;;AANA;;;;;AAQe,SAAS;;IACtB,MAAM,EACJ,KAAK,EACL,KAAK,EACL,YAAY,EACZ,cAAc,EACf,GAAG,IAAA,sJAAiB;IAErB,MAAM,mBAAmB,IAAA,4KAAW;uDAAC;YACnC,MAAM,OAAO;YACb,MAAM,OAAO,IAAI,KAAK;gBAAC;aAAK,EAAE;gBAAE,MAAM;YAAmB;YACzD,MAAM,MAAM,IAAI,eAAe,CAAC;YAChC,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,KAAK,QAAQ,GAAG;YAChB,KAAK,IAAI,GAAG;YACZ,KAAK,KAAK;YACV,IAAI,eAAe,CAAC;QACtB;sDAAG;QAAC;KAAa;IAEjB,MAAM,eAAe,IAAA,4KAAW;mDAAC,CAAC;YAChC,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;YAChC,IAAI,MAAM;gBACR,MAAM,SAAS,IAAI;gBACnB,OAAO,MAAM;+DAAG,CAAC;wBACf,IAAI;4BACF,MAAM,OAAO,MAAM,MAAM,EAAE;4BAC3B,eAAe;wBACjB,EAAE,OAAO,OAAO;4BACd,MAAM;wBACR;oBACF;;gBACA,OAAO,UAAU,CAAC;YACpB;YACA,EAAE,MAAM,CAAC,KAAK,GAAG;QACnB;kDAAG;QAAC;KAAe;IAEnB,MAAM,kBAAkB,CAAC;QACvB,wCAAmC;YAChC,OAAe,gBAAgB,GAAG;QACrC;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,uJAAS;gBACR,OAAM;gBACN,UAAS;gBACT,cAAc;gBACd,UAAU;gBACV,OAAO;oBACL;wBAAE,OAAO;wBAAS,OAAO,MAAM,MAAM;oBAAC;oBACtC;wBAAE,OAAO;wBAAe,OAAO,MAAM,MAAM;oBAAC;iBAC7C;;;;;;0BAEH,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC,6MAAY;wBAAC,aAAa;;;;;;kCAG3B,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,sNAAe;;;;;;;;;;kCAIlB,6LAAC,sNAAe;;;;;;;;;;;;;;;;;AAIxB;GApEwB;;QAMlB,sJAAiB;;;KANC"}}]
}